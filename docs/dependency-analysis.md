# 모듈 종속성 분석 도구 사용 가이드

Loop 프로젝트의 모듈 종속성을 분석하기 위한 도구와 사용법을 설명합니다.

## 개요

모듈 종속성 분석 도구는 Loop 프로젝트의 코드베이스를 분석하여 다음과 같은 정보를 제공합니다:

- 모듈 간 종속성 그래프
- 순환 참조 감지
- 중심 모듈 식별
- 불필요한 종속성 확인
- 타입 에러 검사

## 설치 요구사항

분석 도구를 사용하기 위해서는 다음 패키지들이 설치되어 있어야 합니다:

```bash
yarn add --dev madge dependency-cruiser
```

## 기본 사용법

다음 명령어로 종속성 분석을 실행할 수 있습니다:

```bash
node scripts/analyze-dependencies.js
```

이 명령어는 기본적으로 `src` 디렉토리의 코드를 분석하고 결과를 텍스트 파일로 저장합니다.

## 명령줄 옵션

다양한 옵션을 사용하여 분석 도구의 동작을 제어할 수 있습니다:

| 옵션 | 설명 |
|------|------|
| `--verbose`, `-v` | 상세한 로그 출력 |
| `--graph` | 종속성 그래프 데이터 포함 |
| `--skip-typecheck` | 타입 검사 건너뛰기 |
| `--skip-tests` | 테스트 실행 건너뛰기 |
| `--json` | 결과를 JSON 형식으로 저장 |
| `--output`, `-o` <파일> | 출력 파일 경로 지정 |
| `--dir` <디렉토리> | 분석할 디렉토리 지정 |

## 사용 예시

### 특정 디렉토리 분석

```bash
node scripts/analyze-dependencies.js --dir src/app
```

### 상세 로그와 함께 분석

```bash
node scripts/analyze-dependencies.js --verbose
```

### JSON 형식으로 결과 저장

```bash
node scripts/analyze-dependencies.js --json --output dependency-report.json
```

### 타입 검사와 테스트 건너뛰기

```bash
node scripts/analyze-dependencies.js --skip-typecheck --skip-tests
```

## 결과 해석하기

### 순환 참조

순환 참조는 모듈 A가 모듈 B를 참조하고, 모듈 B가 모듈 A를 참조하는 등의 순환 구조를 의미합니다. 이러한 구조는 다음과 같은 문제를 일으킬 수 있습니다:

- 코드 이해 어려움
- 테스트 복잡성 증가
- 메모리 누수 가능성
- 번들 크기 증가

순환 참조가 감지되면 반드시 리팩토링을 고려해야 합니다.

### 중심 모듈

중심 모듈은 다른 많은 모듈들이 의존하는 모듈입니다. 이러한 모듈은:

- 코드베이스의 핵심 부분
- 변경 시 광범위한 영향을 미침
- 성능과 안정성이 중요함

중심 모듈을 식별하여 집중적으로 관리하고 테스트해야 합니다.

### 불필요한 종속성

불필요한 종속성은 모듈에서 선언되었지만 실제로 사용되지 않는 import 문을 의미합니다. 이러한 종속성은:

- 번들 크기 증가
- 코드 이해 어려움
- 의존성 그래프 복잡성 증가

불필요한 종속성은 제거하여 코드베이스를 정리하는 것이 좋습니다.

## 모범 사례

### 정기적인 분석

코드베이스의 건강 상태를 유지하기 위해 정기적으로 종속성 분석을 실행하세요. CI/CD 파이프라인에 통합하는 것도 좋은 방법입니다.

### 순환 참조 제거

순환 참조를 발견하면 다음과 같은 방법으로 해결할 수 있습니다:

1. 공통 모듈 추출하기
2. 인터페이스 사용하기
3. 이벤트 중심 아키텍처 도입
4. 의존성 방향 재설계

### 모듈 구성 최적화

- 관련 기능을 한 모듈로 그룹화
- 너무 많은 책임을 가진 모듈 분리
- 단일 책임 원칙 준수
- 모듈 간 인터페이스 명확하게 정의

## 문제 해결

### 분석 도구가 작동하지 않을 경우

1. 필요한 패키지가 설치되어 있는지 확인
2. Node.js 버전이 최신인지 확인 (v14 이상 권장)
3. 프로젝트 루트 디렉토리에서 스크립트 실행

### 오류 보고

분석 도구에 문제가 발생하면 GitHub 이슈에 다음 정보와 함께 보고해 주세요:

- 사용한 명령어
- 오류 메시지
- Node.js 및 패키지 버전
- 운영 체제 정보 