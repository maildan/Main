"use strict";(()=>{var e={};e.id=283,e.ids=[283],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68621:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>D,routeModule:()=>U,serverHooks:()=>O,workAsyncStorage:()=>S,workUnitAsyncStorage:()=>j});var a={};r.r(a),r.d(a,{GET:()=>x,POST:()=>z});var n=r(96559),o=r(48088),i=r(37719),s=r(32190),c=r(82997),p=r(79687),u=r(90151);async function m(e=!1){try{(0,u.fH)(`[DOM] 정리 시작 (적극적 정리: ${e})`);let t=0;if("undefined"==typeof document)return!1;return t+=function(){try{return 0}catch(e){return(0,u.JE)("[DOM] 이벤트 리스너 정리 오류",e),0}}(),t+=function(e){try{let t=0;return document.querySelectorAll('[hidden], .hidden, [style*="display: none"], [style*="visibility: hidden"]').forEach(r=>{r instanceof HTMLElement&&(e&&!r.dataset.preserveContent&&(r.innerHTML="",t++),r.querySelectorAll("img").forEach(e=>{e.src&&!e.dataset.preserveSrc&&(e.dataset.originalSrc=e.src,e.src="",t++)}))}),t}catch(e){return(0,u.JE)("[DOM] 숨겨진 요소 최적화 오류",e),0}}(e),e&&(t+=function(){try{let e=0,t=window.innerHeight,r=window.innerWidth;return document.querySelectorAll(".optimize-when-offscreen, [data-optimize-offscreen]").forEach(a=>{if(a instanceof HTMLElement){let n=a.getBoundingClientRect(),o=n.bottom<0||n.top>t||n.right<0||n.left>r;o&&!a.dataset.optimized?(a.dataset.optimized="true",a.dataset.originalDisplay=a.style.display||"",a.style.display="none",e++):o||"true"!==a.dataset.optimized||(a.style.display=a.dataset.originalDisplay||"",delete a.dataset.optimized)}}),e}catch(e){return(0,u.JE)("[DOM] 화면 밖 요소 최적화 오류",e),0}}()),(0,u.fH)(`[DOM] 정리 완료: ${t}개 요소 최적화됨`),!0}catch(e){return(0,u.JE)("[DOM] 정리 중 오류 발생",e),!1}}async function d(){return console.log("캐시 정리 시작"),0}async function l(){return console.log("리소스 최적화 시작"),0}async function y(){return console.log("긴급 메모리 복구 시작"),!0}var f=r(11519);async function h(e,t){switch(f.vF.info(`[Optimization Utils] Running optimization at level: ${e}, emergency: ${t}`),e){case c.Uy.LOW:await d();break;case c.Uy.MEDIUM:await d(),await m(!1);break;case c.Uy.HIGH:case c.Uy.AGGRESSIVE:case c.Uy.CRITICAL:await d(),await m(!0),await !1,await l();break;default:f.vF.warn(`[Optimization Utils] Unknown optimization level: ${e}`)}t&&(f.vF.info("[Optimization Utils] Performing emergency optimizations"),await y())}async function g(e=!1){let t=performance.now(),r=w();try{(0,u.fH)(`[GC] 가비지 컬렉션 제안${e?" (긴급)":""}`),e&&function(){try{Array(1e6).fill(0).map(()=>({}))}catch(e){}}();let a=performance.now(),n=w(),o=Math.max(0,r.jsHeapSize-n.jsHeapSize);return{success:!0,freedMemory:o,freedMB:o/1048576,duration:a-t,timestamp:Date.now()}}catch(e){return(0,u.vV)("[GC] 가비지 컬렉션 오류",e),{success:!1,freedMemory:0,freedMB:0,duration:performance.now()-t,timestamp:Date.now(),error:e instanceof Error?e.message:String(e)}}}function w(){return{jsHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0}}async function v(e=c.Uy.MEDIUM,t=!1){try{f.vF.info(`[Memory Optimizer] Starting memory optimization at level: ${e}, emergency: ${t}`);let r=await p.pX();await h(e,t),await g(t);let a=await p.pX(),n=r&&a&&void 0!==r.heapUsed&&void 0!==a.heapUsed?r.heapUsed-a.heapUsed:0;return f.vF.info(`[Memory Optimizer] Memory optimization completed. Freed: ${n} bytes`),{optimizationLevel:e,timestamp:Date.now(),freedMemory:n,success:!0}}catch(t){return f.vF.error("[Memory Optimizer] Error during memory optimization:",t instanceof Error?{message:t.message,stack:t.stack}:{}),{optimizationLevel:e,timestamp:Date.now(),freedMemory:0,success:!1,error:t instanceof Error?t.message:String(t)}}}function M(e,t=2){if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}let E={LOW:"low",MEDIUM:"medium",HIGH:"high",EXTREME:"extreme"};async function x(){try{let e=await (0,p.pX)();if(!e)return s.NextResponse.json({success:!1,error:"메모리 정보를 가져올 수 없습니다."},{status:404});return s.NextResponse.json({success:!0,data:{...e,heapUsedFormatted:M(e.heapUsed??0),heapTotalFormatted:M(e.heapTotal??0),rssFormatted:M(e.rss??0)}})}catch(e){return console.error("Error fetching memory info:",e),s.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e)},{status:500})}}async function z(e){try{let{level:t="medium",emergency:r=!1}=await e.json(),a=Object.values(E).includes(t)?t:E.MEDIUM,n=await v(a,r),o=await (0,p.pX)();if(!o)return s.NextResponse.json({success:!0,result:n,error:"최적화 후 메모리 정보를 가져올 수 없습니다."});return s.NextResponse.json({success:!0,result:n,memoryInfo:{...o,heapUsedFormatted:M(o.heapUsed??0),heapTotalFormatted:M(o.heapTotal??0),rssFormatted:M(o.rss??0)}})}catch(e){return console.error("Error optimizing memory:",e),s.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e)},{status:500})}}let U=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/native/memory/route",pathname:"/api/native/memory",filename:"route",bundlePath:"app/api/native/memory/route"},resolvedPagePath:"C:\\Users\\user\\Desktop\\loop\\src\\app\\api\\native\\memory\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:S,workUnitAsyncStorage:j,serverHooks:O}=U;function D(){return(0,i.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:j})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,580,483],()=>r(68621));module.exports=a})();