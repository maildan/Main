"use strict";(()=>{var e={};e.id=283,e.ids=[283],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34233:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>H,routeModule:()=>F,serverHooks:()=>D,workAsyncStorage:()=>O,workUnitAsyncStorage:()=>S});var n={};r.r(n),r.d(n,{GET:()=>U,POST:()=>R,PUT:()=>j});var a=r(96559),s=r(48088),o=r(37719),i=r(32190),c=r(82997),p=r(79687),u=r(90151);async function m(e=!1){try{(0,u.fH)(`[DOM] 정리 시작 (적극적 정리: ${e})`);let t=0;if("undefined"==typeof document)return!1;return t+=function(){try{return 0}catch(e){return(0,u.JE)("[DOM] 이벤트 리스너 정리 오류",e),0}}(),t+=function(e){try{let t=0;return document.querySelectorAll('[hidden], .hidden, [style*="display: none"], [style*="visibility: hidden"]').forEach(r=>{r instanceof HTMLElement&&(e&&!r.dataset.preserveContent&&(r.innerHTML="",t++),r.querySelectorAll("img").forEach(e=>{e.src&&!e.dataset.preserveSrc&&(e.dataset.originalSrc=e.src,e.src="",t++)}))}),t}catch(e){return(0,u.JE)("[DOM] 숨겨진 요소 최적화 오류",e),0}}(e),e&&(t+=function(){try{let e=0,t=window.innerHeight,r=window.innerWidth;return document.querySelectorAll(".optimize-when-offscreen, [data-optimize-offscreen]").forEach(n=>{if(n instanceof HTMLElement){let a=n.getBoundingClientRect(),s=a.bottom<0||a.top>t||a.right<0||a.left>r;s&&!n.dataset.optimized?(n.dataset.optimized="true",n.dataset.originalDisplay=n.style.display||"",n.style.display="none",e++):s||"true"!==n.dataset.optimized||(n.style.display=n.dataset.originalDisplay||"",delete n.dataset.optimized)}}),e}catch(e){return(0,u.JE)("[DOM] 화면 밖 요소 최적화 오류",e),0}}()),(0,u.fH)(`[DOM] 정리 완료: ${t}개 요소 최적화됨`),!0}catch(e){return(0,u.JE)("[DOM] 정리 중 오류 발생",e),!1}}var d=r(43046);async function l(){try{return d.vF.info("[Cache Optimizer] 캐시 정리 시작"),!1}catch(e){return d.vF.error("[Cache Optimizer] 캐시 정리 중 오류 발생",{error:e}),!1}}async function y(){try{return d.vF.info("[Event Optimizer] 이벤트 리스너 최적화 시작"),!1}catch(e){return d.vF.error("[Event Optimizer] 이벤트 최적화 중 오류 발생",{error:e}),!1}}async function f(){try{return d.vF.info("[Resource Optimizer] 리소스 최적화 시작"),!1}catch(e){return d.vF.error("[Resource Optimizer] 리소스 최적화 중 오류 발생",{error:e}),!1}}async function h(){try{return d.vF.warn("[Emergency Recovery] 긴급 메모리 복구 시작"),!1}catch(e){return d.vF.error("[Emergency Recovery] 긴급 복구 중 오류 발생",{error:e}),!1}}async function g(e,t){switch(d.vF.info(`[Optimization Utils] Running optimization at level: ${e}, emergency: ${t}`),e){case c.Uy.LOW:await l();break;case c.Uy.MEDIUM:await l(),await m(!1);break;case c.Uy.HIGH:case c.Uy.AGGRESSIVE:case c.Uy.CRITICAL:case c.Uy.EXTREME:await l(),await m(!0),await y(),await f();break;default:d.vF.warn(`[Optimization Utils] Unknown optimization level: ${e}`)}t&&(d.vF.info("[Optimization Utils] Performing emergency optimizations"),await h())}async function v(e=!1){let t=performance.now(),r=w();try{(0,u.fH)(`[GC] 가비지 컬렉션 제안${e?" (긴급)":""}`),e&&function(){try{Array(1e6).fill(0).map(()=>({}))}catch(e){}}();let n=performance.now(),a=w(),s=Math.max(0,r.jsHeapSize-a.jsHeapSize);return{success:!0,freedMemory:s,freedMB:s/1048576,duration:n-t,timestamp:Date.now()}}catch(e){return(0,u.vV)("[GC] 가비지 컬렉션 오류",e),{success:!1,freedMemory:0,freedMB:0,duration:performance.now()-t,timestamp:Date.now(),error:e instanceof Error?e.message:String(e)}}}function w(){return{jsHeapSize:0,totalJSHeapSize:0,jsHeapSizeLimit:0}}async function z(e=c.Uy.MEDIUM,t=!1){try{d.vF.info(`[Memory Optimizer] Starting memory optimization at level: ${e}, emergency: ${t}`);let r=await p.pX();await g(e,t),await v(t);let n=await p.pX(),a=r&&n&&void 0!==r.heapUsed&&void 0!==n.heapUsed?r.heapUsed-n.heapUsed:0;d.vF.info(`[Memory Optimizer] Memory optimization completed. Freed: ${a} bytes`);let s={optimizationLevel:e,level:e,freedMemory:a,timestamp:Date.now(),success:!0};return null!==r&&(s.memory_before=r),null!==n&&(s.memory_after=n),s}catch(t){return d.vF.error("[Memory Optimizer] Error during memory optimization:",t instanceof Error?{message:t.message,stack:t.stack}:{}),{optimizationLevel:e,level:e,freedMemory:0,timestamp:Date.now(),success:!1,error:t instanceof Error?t.message:String(t)}}}var E=r(13260);let M={LOW:"low",MEDIUM:"medium",HIGH:"high",EXTREME:"extreme"},x=0;async function U(){try{let e=Date.now();if(e-x<3e3)return i.NextResponse.json({success:!0,cached:!0,message:"요청이 너무 빈번합니다. 잠시 후 다시 시도해주세요.",timeRemaining:3e3-(e-x)});x=e;let t=await (0,p.pX)();if(!t)return i.NextResponse.json({success:!1,error:"메모리 정보를 가져올 수 없습니다."},{status:404});return i.NextResponse.json({success:!0,data:{...t,heapUsedFormatted:(0,E.z3)(t.heapUsed??0),heapTotalFormatted:(0,E.z3)(t.heapTotal??0),rssFormatted:(0,E.z3)(t.rss??0)}})}catch(e){return console.error("Error fetching memory info:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e)},{status:500})}}async function R(e){try{let{level:t="medium",emergency:r=!1}=await e.json(),n=Object.values(M).includes(t)?t:M.MEDIUM,a=await z(n,r),s=await (0,p.pX)();if(!s)return i.NextResponse.json({success:!0,result:a,error:"최적화 후 메모리 정보를 가져올 수 없습니다."});return i.NextResponse.json({success:!0,result:a,memoryInfo:{...s,heapUsedFormatted:(0,E.z3)(s.heapUsed??0),heapTotalFormatted:(0,E.z3)(s.heapTotal??0),rssFormatted:(0,E.z3)(s.rss??0)}})}catch(e){return console.error("Error optimizing memory:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e)},{status:500})}}async function j(e){try{let{type:t}=await e.json();if("gc"===t){let e=Date.now(),t=0;try{let r=await (0,p.pX)();"undefined"!=typeof global&&"function"==typeof global.gc&&global.gc();let n=await (0,p.pX)();return r&&n&&r.heapUsed&&n.heapUsed&&(t=Math.max(0,r.heapUsed-n.heapUsed)),i.NextResponse.json({success:!0,timestamp:Date.now(),duration:Date.now()-e,freedMemory:t,freedMB:t/1048576,freedFormatted:(0,E.z3)(t)})}catch(e){return console.error("가비지 컬렉션 실패:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e),timestamp:Date.now()},{status:500})}}return i.NextResponse.json({success:!1,error:`지원하지 않는 작업 유형: ${t}`},{status:400})}catch(e){return console.error("메모리 작업 처리 중 오류:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:String(e)},{status:500})}}let F=new a.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/native/memory/route",pathname:"/api/native/memory",filename:"route",bundlePath:"app/api/native/memory/route"},resolvedPagePath:"C:\\Users\\user\\Desktop\\loop_2\\src\\app\\api\\native\\memory\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:O,workUnitAsyncStorage:S,serverHooks:D}=F;function H(){return(0,o.patchFetch)({workAsyncStorage:O,workUnitAsyncStorage:S})}},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,580,483],()=>r(34233));module.exports=n})();