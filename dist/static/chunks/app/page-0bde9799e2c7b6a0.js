(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{104:e=>{e.exports={windowControls:"WindowControls_windowControls__SbBFq",windowButton:"WindowControls_windowButton__rzJFU",buttonContent:"WindowControls_buttonContent__1XpLJ",minimizeButton:"WindowControls_minimizeButton__hBC_D",maximizeButton:"WindowControls_maximizeButton__19xOw",closeButton:"WindowControls_closeButton__GWHV_",minimizeIcon:"WindowControls_minimizeIcon__HwMi5",maximizeIcon:"WindowControls_maximizeIcon__H4uH1",closeIcon:"WindowControls_closeIcon__OfU_7"}},753:e=>{e.exports={monitorContainer:"TypingMonitor_monitorContainer__ER1LM",controlPanel:"TypingMonitor_controlPanel__mnPAg",startButton:"TypingMonitor_startButton__6Kfxe",stopButton:"TypingMonitor_stopButton__KAJ8v",saveButton:"TypingMonitor_saveButton__WglP8",statsPanel:"TypingMonitor_statsPanel__hOEWj",statItem:"TypingMonitor_statItem__uJud3",statLabel:"TypingMonitor_statLabel___96yv",statValue:"TypingMonitor_statValue__Gutae",saveSection:"TypingMonitor_saveSection__KoLn9",descriptionInput:"TypingMonitor_descriptionInput__B_Lx7",helpSection:"TypingMonitor_helpSection__JbpyP",statusIndicator:"TypingMonitor_statusIndicator__kULxH",indicator:"TypingMonitor_indicator__z3RHP",active:"TypingMonitor_active__hioKY",pulse:"TypingMonitor_pulse__PJDcF",googleDocsLink:"TypingMonitor_googleDocsLink__sa_xR",websiteTabs:"TypingMonitor_websiteTabs__RgoMF",websiteTabHeader:"TypingMonitor_websiteTabHeader__V_y3l",websiteTabButton:"TypingMonitor_websiteTabButton__rXPP4",activeWebsiteTab:"TypingMonitor_activeWebsiteTab__niDOn",websiteTabContent:"TypingMonitor_websiteTabContent__RBMcj",websiteLinks:"TypingMonitor_websiteLinks__3vAID",websiteLink:"TypingMonitor_websiteLink__lqd9U",actionFeedback:"TypingMonitor_actionFeedback__VPiGl",fadeIn:"TypingMonitor_fadeIn__BRcC2",browserStatus:"TypingMonitor_browserStatus__b4rGV",browserInfo:"TypingMonitor_browserInfo__w3N_l",browserRow:"TypingMonitor_browserRow__27uT0",browserValue:"TypingMonitor_browserValue__cu5JE",detectedBadge:"TypingMonitor_detectedBadge__iDUgv",notDetectedBadge:"TypingMonitor_notDetectedBadge__EtIo1",browserList:"TypingMonitor_browserList__JrDTA",browserColumn:"TypingMonitor_browserColumn__EOGEk",trackingButton:"TypingMonitor_trackingButton__szR9V",trackingActive:"TypingMonitor_trackingActive__eHDsS",monitorHeader:"TypingMonitor_monitorHeader__yUhAy",container:"TypingMonitor_container__TzhrN",contentWrapper:"TypingMonitor_contentWrapper__PPmCK",leftPanel:"TypingMonitor_leftPanel__FJhBH",rightPanel:"TypingMonitor_rightPanel__DQxqP",statsTabs:"TypingMonitor_statsTabs__BFC0M",statsTabButton:"TypingMonitor_statsTabButton__PM_Rt",activeStatsTab:"TypingMonitor_activeStatsTab__rEAV4",statsTabContent:"TypingMonitor_statsTabContent__RAlml",statsGroup:"TypingMonitor_statsGroup__eqddv",statCard:"TypingMonitor_statCard__qVky4"}},773:(e,t,n)=>{"use strict";n.d(t,{t:()=>l,d:()=>d});var a=n(5155),o=n(2115),s=n(5821),r=n.n(s);function i(e){let{message:t,type:n,duration:s=3e3,onClose:i}=e,[c,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=setTimeout(()=>{l(!1),i&&i()},s);return()=>clearTimeout(e)},[s,i]),c?(0,a.jsx)("div",{className:"".concat(r().toast," ").concat(r()[n]),children:(0,a.jsx)("span",{className:r().message,children:t})}):null}let c=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[n,s]=(0,o.useState)(null);return(0,a.jsxs)(c.Provider,{value:{showToast:(e,t)=>{s({message:e,type:t})}},children:[t,n&&(0,a.jsx)(i,{message:n.message,type:n.type,onClose:()=>s(null)})]})}let d=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useToast must be used within a ToastProvider");return e}},812:e=>{e.exports={appHeader:"AppHeader_appHeader__GHmNp",leftSection:"AppHeader_leftSection__bx_bz",rightSection:"AppHeader_rightSection__2Sou5",iconOnly:"AppHeader_iconOnly__AbZ3Q",darkMode:"AppHeader_darkMode__vqPCA",visible:"AppHeader_visible__uRggq",hidden:"AppHeader_hidden__yln_L",autoHide:"AppHeader_autoHide__qqjph",headerDetectionArea:"AppHeader_headerDetectionArea__vaapr"}},2147:e=>{e.exports={chartContainer:"TypingChart_chartContainer__Xxoiu",charts:"TypingChart_charts__fz60g",chartItem:"TypingChart_chartItem__CNTM_",chartWrapper:"TypingChart_chartWrapper__1KDYX",noData:"TypingChart_noData__zjjvx"}},2335:e=>{e.exports={settingsContainer:"Settings_settingsContainer__0SxHP",darkMode:"Settings_darkMode__a5VLX",settingSection:"Settings_settingSection__XwrF7",categoryToggles:"Settings_categoryToggles__HQHhT",toggleItem:"Settings_toggleItem___q_0D",toggleLabel:"Settings_toggleLabel__8fIJv",radioGroup:"Settings_radioGroup__QGEGo",radioLabel:"Settings_radioLabel__Iog9l",radioText:"Settings_radioText__hi7nW",buttonRow:"Settings_buttonRow__7DE_2",saveButton:"Settings_saveButton__hOtLB",disabledNote:"Settings_disabledNote__pj8Vq",settingDescription:"Settings_settingDescription__uTSPW"}},3549:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var a=n(5155),o=n(2115),s=n(4916),r=n.n(s);function i(e){let{logs:t}=e,n=t.reduce((e,t)=>e+t.key_count,0),o=t.reduce((e,t)=>e+t.typing_time,0),s=t.reduce((e,t)=>e+t.content.length,0),i=t.reduce((e,t)=>e+t.content.replace(/\s/g,"").length,0),c=t.reduce((e,t)=>e+(t.content.trim().length>0?t.content.trim().split(/\s+/).length:0),0),l=o>0?Math.round(n/o*60):0,d=s>0?Math.round(i/n*100):0;return(0,a.jsxs)("div",{className:r().statsContainer,children:[(0,a.jsx)("h2",{children:"타이핑 통계"}),(0,a.jsxs)("div",{className:r().statsGrid,children:[(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"총 타자 수"}),(0,a.jsx)("div",{className:r().statValue,children:n.toLocaleString()})]}),(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"총 글자 수"}),(0,a.jsxs)("div",{className:r().statValue,children:[s.toLocaleString()," ",(0,a.jsxs)("span",{children:["(공백 제외: ",i.toLocaleString(),")"]})]})]}),(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"총 단어 수"}),(0,a.jsx)("div",{className:r().statValue,children:c.toLocaleString()})]}),(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"총 시간"}),(0,a.jsx)("div",{className:r().statValue,children:function(e){if(e<60)return"".concat(e,"초");let t=Math.floor(e/60),n=e%60;if(t<60)return"".concat(t,"분 ").concat(n,"초");let a=Math.floor(t/60);return"".concat(a,"시간 ").concat(t%60,"분 ").concat(n,"초")}(o)})]}),(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"평균 속도"}),(0,a.jsxs)("div",{className:r().statValue,children:[l," ",(0,a.jsx)("span",{children:"타/분"})]})]}),(0,a.jsxs)("div",{className:r().statCard,children:[(0,a.jsx)("h3",{children:"정확도"}),(0,a.jsxs)("div",{className:r().statValue,children:[d,"%"]})]})]})]})}var c=n(753),l=n.n(c);let d=e=>{if(e<60)return"".concat(e,"초");let t=Math.floor(e/60),n=e%60;if(t<60)return"".concat(t,"분 ").concat(n,"초");let a=Math.floor(t/60);return"".concat(a,"시간 ").concat(t%60,"분 ").concat(n,"초")},u=(e,t)=>t<=0?"0 타/분":"".concat(Math.round(e/t*60)," 타/분"),h=o.memo(function(e){var t,n,s,r,i;let{stats:c,isTracking:h,onStartTracking:m,onStopTracking:g,onSaveStats:p}=e,[_,b]=(0,o.useState)(""),[w,v]=(0,o.useState)(""),[x,y]=(0,o.useState)("docs"),[j,T]=(0,o.useState)("typing"),f=o.useRef(null),C=(0,o.useCallback)(async()=>{var e;if(null===(e=window.electronAPI)||void 0===e?void 0:e.getCurrentBrowserInfo)try{f.current=await window.electronAPI.getCurrentBrowserInfo()}catch(e){console.error("브라우저 정보 확인 오류:",e)}},[]);(0,o.useEffect)(()=>{if(h){C();let e=setInterval(C,3e4);return()=>clearInterval(e)}},[h,C]);let k=(0,o.useCallback)(e=>{b(e.target.value)},[]),N=(0,o.useCallback)(()=>{p(_),b(""),v("저장됨"),setTimeout(()=>{v("")},2e3)},[_,p]),M=(0,o.useCallback)(()=>{h?g():m()},[h,m,g]),S=(0,o.useCallback)(e=>{y(e)},[]),L=(0,o.useCallback)(e=>{T(e)},[]),I=(0,o.useMemo)(()=>{switch(x){case"docs":return(0,a.jsxs)("div",{className:l().websiteLinks,children:[(0,a.jsx)("a",{href:"https://docs.google.com/document/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"구글 문서 열기"}),(0,a.jsx)("a",{href:"https://docs.google.com/spreadsheets/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"구글 스프레드시트 열기"}),(0,a.jsx)("a",{href:"https://docs.google.com/presentation/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"구글 프레젠테이션 열기"}),(0,a.jsx)("a",{href:"https://www.notion.so/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Notion 열기"})]});case"office":return(0,a.jsxs)("div",{className:l().websiteLinks,children:[(0,a.jsx)("a",{href:"https://www.office.com/launch/word",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Word 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.office.com/launch/excel",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Excel 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.office.com/launch/powerpoint",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"PowerPoint 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.hancom.com/main/main.do",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"한글과컴퓨터 열기"})]});case"coding":return(0,a.jsxs)("div",{className:l().websiteLinks,children:[(0,a.jsx)("a",{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"GitHub 열기"}),(0,a.jsx)("a",{href:"https://gitlab.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"GitLab 열기"}),(0,a.jsx)("a",{href:"https://codesandbox.io/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"CodeSandbox 열기"}),(0,a.jsx)("a",{href:"https://codepen.io/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"CodePen 열기"})]});case"sns":return(0,a.jsxs)("div",{className:l().websiteLinks,children:[(0,a.jsx)("a",{href:"https://slack.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Slack 열기"}),(0,a.jsx)("a",{href:"https://discord.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Discord 열기"}),(0,a.jsx)("a",{href:"https://www.messenger.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Messenger 열기"}),(0,a.jsx)("a",{href:"https://mail.google.com/",target:"_blank",rel:"noopener noreferrer",className:l().websiteLink,children:"Gmail 열기"})]});default:return null}},[x]),B=(0,o.useMemo)(()=>{var e,t,n,o;switch(j){case"typing":return(0,a.jsxs)("div",{className:l().statsGroup,children:[(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"타자 수"}),(0,a.jsx)("div",{className:l().statValue,children:c.keyCount.toLocaleString()})]}),(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"타이핑 시간"}),(0,a.jsx)("div",{className:l().statValue,children:d(c.typingTime)})]}),(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"평균 속도"}),(0,a.jsx)("div",{className:l().statValue,children:u(c.keyCount,c.typingTime)})]})]});case"document":return(0,a.jsxs)("div",{className:l().statsGroup,children:[(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"페이지 수"}),(0,a.jsx)("div",{className:l().statValue,children:(null===(e=c.pages)||void 0===e?void 0:e.toFixed(1))||"0.0"})]}),(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"단어 수"}),(0,a.jsx)("div",{className:l().statValue,children:(null===(t=c.totalWords)||void 0===t?void 0:t.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"글자 수"}),(0,a.jsx)("div",{className:l().statValue,children:(null===(n=c.totalChars)||void 0===n?void 0:n.toLocaleString())||"0"})]})]});case"accuracy":return(0,a.jsxs)("div",{className:l().statsGroup,children:[(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"글자 수 (공백 제외)"}),(0,a.jsx)("div",{className:l().statValue,children:(null===(o=c.totalCharsNoSpace)||void 0===o?void 0:o.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:l().statCard,children:[(0,a.jsx)("div",{className:l().statLabel,children:"정확도"}),(0,a.jsxs)("div",{className:l().statValue,children:[c.accuracy||100,"%"]})]})]});default:return null}},[j,c]);return(0,a.jsxs)("div",{className:l().container,children:[(0,a.jsxs)("div",{className:l().monitorHeader,children:[(0,a.jsx)("h2",{children:"타이핑 모니터링"}),(0,a.jsx)("button",{className:"".concat(l().trackingButton," ").concat(h?l().trackingActive:""),onClick:M,children:h?"모니터링 중지":"모니터링 시작"})]}),(0,a.jsxs)("div",{className:l().statusIndicator,children:[(0,a.jsx)("div",{className:"".concat(l().indicator," ").concat(h?l().active:"")}),(0,a.jsxs)("span",{children:["모니터링 상태: ",(0,a.jsx)("strong",{children:h?"활성화":"비활성화"})]}),w&&(0,a.jsx)("div",{className:l().actionFeedback,children:w})]}),(0,a.jsxs)("div",{className:l().contentWrapper,children:[(0,a.jsxs)("div",{className:l().leftPanel,children:[(0,a.jsxs)("div",{className:l().browserStatus,children:[(0,a.jsx)("h3",{children:"브라우저 상태"}),(0,a.jsxs)("div",{className:l().browserInfo,children:[(0,a.jsxs)("div",{className:l().browserRow,children:[(0,a.jsx)("span",{children:"감지된 브라우저:"}),(0,a.jsx)("span",{className:l().browserValue,children:c.browserName||(null===(t=f.current)||void 0===t?void 0:t.name)||"없음"})]}),(0,a.jsxs)("div",{className:l().browserRow,children:[(0,a.jsx)("span",{children:"구글 문서 감지:"}),(0,a.jsx)("span",{className:l().browserValue,children:(null===(n=f.current)||void 0===n?void 0:n.isGoogleDocs)?(0,a.jsx)("span",{className:l().detectedBadge,children:"감지됨 ✓"}):(0,a.jsx)("span",{className:l().notDetectedBadge,children:"아님 ⨯"})})]}),(0,a.jsxs)("div",{className:l().browserRow,children:[(0,a.jsx)("span",{children:"현재 창:"}),(0,a.jsxs)("span",{className:l().browserValue,title:c.windowTitle||(null===(s=f.current)||void 0===s?void 0:s.title)||"",children:[(c.windowTitle||(null===(r=f.current)||void 0===r?void 0:r.title)||"없음").substring(0,60),(c.windowTitle||(null===(i=f.current)||void 0===i?void 0:i.title)||"").length>60?"...":""]})]})]})]}),(0,a.jsxs)("div",{className:l().websiteTabs,children:[(0,a.jsxs)("div",{className:l().websiteTabHeader,children:[(0,a.jsx)("button",{className:"".concat(l().websiteTabButton," ").concat("docs"===x?l().activeWebsiteTab:""),onClick:()=>S("docs"),children:"구글 문서"}),(0,a.jsx)("button",{className:"".concat(l().websiteTabButton," ").concat("office"===x?l().activeWebsiteTab:""),onClick:()=>S("office"),children:"오피스"}),(0,a.jsx)("button",{className:"".concat(l().websiteTabButton," ").concat("coding"===x?l().activeWebsiteTab:""),onClick:()=>S("coding"),children:"코딩"}),(0,a.jsx)("button",{className:"".concat(l().websiteTabButton," ").concat("sns"===x?l().activeWebsiteTab:""),onClick:()=>S("sns"),children:"SNS/메신저"})]}),(0,a.jsx)("div",{className:l().websiteTabContent,children:I})]})]}),(0,a.jsxs)("div",{className:l().rightPanel,children:[(0,a.jsxs)("div",{className:l().statsTabs,children:[(0,a.jsx)("button",{className:"".concat(l().statsTabButton," ").concat("typing"===j?l().activeStatsTab:""),onClick:()=>L("typing"),children:"타이핑 정보"}),(0,a.jsx)("button",{className:"".concat(l().statsTabButton," ").concat("document"===j?l().activeStatsTab:""),onClick:()=>L("document"),children:"문서 정보"}),(0,a.jsx)("button",{className:"".concat(l().statsTabButton," ").concat("accuracy"===j?l().activeStatsTab:""),onClick:()=>L("accuracy"),children:"정확도 & 속도"})]}),(0,a.jsx)("div",{className:l().statsTabContent,children:B}),(0,a.jsxs)("div",{className:l().saveSection,children:[(0,a.jsx)("h3",{children:"세션 저장"}),(0,a.jsx)("p",{children:"작업한 내용에 대한 설명을 입력하세요"}),(0,a.jsx)("textarea",{className:l().descriptionInput,value:_,onChange:k,placeholder:"작업 내용 (예: 보고서 작성, 논문 작성 등)",rows:4}),(0,a.jsx)("button",{className:l().saveButton,onClick:N,disabled:0===c.keyCount||!_.trim(),children:"통계 저장"})]})]})]})]})});var m=n(8807),g=n.n(m);function p(e){let{logs:t,isLoading:n}=e;return n?(0,a.jsx)("div",{className:g().loading,children:"로딩 중..."}):0===t.length?(0,a.jsx)("div",{className:g().noData,children:"저장된 타이핑 기록이 없습니다."}):(0,a.jsxs)("div",{className:g().historyContainer,children:[(0,a.jsx)("h2",{children:"타이핑 기록"}),(0,a.jsx)("div",{className:g().historyList,children:t.map(e=>(0,a.jsxs)("div",{className:g().historyItem,children:[(0,a.jsx)("div",{className:g().historyTime,children:new Date(e.timestamp).toLocaleString()}),(0,a.jsx)("div",{className:g().historyContent,children:e.content.length>100?e.content.substring(0,100)+"...":e.content}),(0,a.jsxs)("div",{className:g().historyMeta,children:[(0,a.jsxs)("span",{children:["타자 수: ",e.key_count]}),(0,a.jsxs)("span",{children:["시간: ",e.typing_time,"초"]}),(0,a.jsxs)("span",{children:["속도: ",Math.round(e.typing_time>0?e.key_count/e.typing_time*60:0)," 타/분"]})]})]},e.id))})]})}var _=n(2502),b=n(4065),w=n(2147),v=n.n(w);_.t1.register(_.PP,_.kc,_.FN,_.No,_.E8,_.hE,_.m_,_.s$);let x=e=>{let t=new Date;return t.setDate(t.getDate()-30),e.filter(e=>new Date(e.timestamp)>=t).slice(0,100)},y=o.memo(function(e){let{logs:t}=e,[n,s]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=()=>{s(document.documentElement.classList.contains("dark-mode")||document.body.classList.contains("dark-mode"))};e();let t=e=>{s(e.detail.darkMode)};window.addEventListener("darkmode-changed",t);let n=new MutationObserver(e);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),n.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>{n.disconnect(),window.removeEventListener("darkmode-changed",t)}},[]);let r=(0,o.useMemo)(()=>x(t),[t]),i=(0,o.useCallback)(e=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:n?"#E0E0E0":"#333"}},title:{display:!0,text:e,color:n?"#E0E0E0":"#333"},tooltip:{backgroundColor:n?"rgba(30, 30, 30, 0.8)":"rgba(255, 255, 255, 0.8)",titleColor:n?"#E0E0E0":"#333",bodyColor:n?"#B0B0B0":"#666",borderColor:n?"#303030":"#ddd",borderWidth:1}},scales:{x:{ticks:{color:n?"#B0B0B0":"#666"},grid:{color:n?"rgba(60, 60, 60, 0.3)":"rgba(0, 0, 0, 0.1)"}},y:{ticks:{color:n?"#B0B0B0":"#666"},grid:{color:n?"rgba(60, 60, 60, 0.3)":"rgba(0, 0, 0, 0.1)"}}}}),[n]),c=(0,o.useMemo)(()=>{let e=new Map;return r.forEach(t=>{let n=new Date(t.timestamp).toLocaleDateString();e.has(n)||e.set(n,{totalKeyCount:0,totalTime:0,totalChars:0,totalWords:0});let a=e.get(n);a.totalKeyCount+=t.key_count,a.totalTime+=t.typing_time,a.totalChars+=t.content.length;let o=t.content.trim().length>0?t.content.trim().split(/\s+/).length:0;a.totalWords+=o}),{labels:Array.from(e.keys()),keyCountData:Array.from(e.values()).map(e=>e.totalKeyCount),timeData:Array.from(e.values()).map(e=>Math.round(e.totalTime/60)),speedData:Array.from(e.values()).map(e=>e.totalTime>0?Math.round(e.totalKeyCount/e.totalTime*60):0),wordData:Array.from(e.values()).map(e=>e.totalWords),charData:Array.from(e.values()).map(e=>e.totalChars)}},[r]),l=(0,o.useMemo)(()=>({labels:c.labels,datasets:[{label:"평균 타이핑 속도 (타/분)",data:c.speedData,borderColor:n?"rgb(3, 218, 198)":"rgb(75, 192, 192)",backgroundColor:n?"rgba(3, 218, 198, 0.5)":"rgba(75, 192, 192, 0.5)",tension:.3}]}),[c.labels,c.speedData,n]),d=(0,o.useMemo)(()=>({labels:c.labels,datasets:[{label:"총 타자 수",data:c.keyCountData,backgroundColor:n?"rgba(30, 136, 229, 0.7)":"rgba(54, 162, 235, 0.5)"}]}),[c.labels,c.keyCountData,n]),u=(0,o.useMemo)(()=>({labels:c.labels,datasets:[{label:"총 타이핑 시간 (분)",data:c.timeData,backgroundColor:n?"rgba(207, 102, 121, 0.7)":"rgba(255, 99, 132, 0.5)"}]}),[c.labels,c.timeData,n]),h=(0,o.useMemo)(()=>({labels:c.labels,datasets:[{label:"총 단어 수",data:c.wordData,backgroundColor:n?"rgba(124, 77, 255, 0.7)":"rgba(153, 102, 255, 0.5)"},{label:"총 글자 수",data:c.charData,backgroundColor:n?"rgba(251, 140, 0, 0.7)":"rgba(255, 159, 64, 0.5)"}]}),[c.labels,c.wordData,c.charData,n]);return(0,a.jsxs)("div",{className:v().chartContainer,children:[(0,a.jsx)("h2",{children:"타이핑 통계 차트"}),r.length>0?(0,a.jsxs)("div",{className:v().charts,children:[c.labels.length>0&&(0,a.jsxs)("div",{className:v().chartItem,children:[(0,a.jsx)("h3",{children:"일별 평균 타이핑 속도"}),(0,a.jsx)("div",{className:v().chartWrapper,children:(0,a.jsx)(b.N1,{data:l,options:i("일별 평균 속도 (타/분)"),redraw:!1})})]}),(0,a.jsxs)("div",{className:v().chartItem,children:[(0,a.jsx)("h3",{children:"일별 총 타자 수"}),(0,a.jsx)("div",{className:v().chartWrapper,children:(0,a.jsx)(b.yP,{data:d,options:i("일별 총 타자 수")})})]}),(0,a.jsxs)("div",{className:v().chartItem,children:[(0,a.jsx)("h3",{children:"일별 총 타이핑 시간"}),(0,a.jsx)("div",{className:v().chartWrapper,children:(0,a.jsx)(b.yP,{data:u,options:i("일별 총 타이핑 시간 (분)")})})]}),(0,a.jsxs)("div",{className:v().chartItem,children:[(0,a.jsx)("h3",{children:"일별 단어 및 글자 수"}),(0,a.jsx)("div",{className:v().chartWrapper,children:(0,a.jsx)(b.yP,{data:h,options:i("일별 단어 및 글자 수")})})]})]}):(0,a.jsx)("p",{className:v().noData,children:"저장된 타이핑 데이터가 없습니다."})]})});function j(){let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"footer",children:(0,a.jsxs)("div",{className:"copyright",children:["\xa9 ",e," notion"]})})}let T=(0,o.createContext)({theme:"light",toggleTheme:()=>{},setDarkMode:()=>{}}),f=()=>(0,o.useContext)(T);function C(e){let{children:t}=e,[n,s]=(0,o.useState)("light"),r=e=>{s(e?"dark":"light"),e?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode");try{let t=localStorage.getItem("app-settings"),n=t?JSON.parse(t):{};n.darkMode=e,localStorage.setItem("app-settings",JSON.stringify(n))}catch(e){console.error("설정 저장 오류:",e)}window.electronAPI&&window.electronAPI.setDarkMode(e)};return(0,o.useEffect)(()=>{try{let e=localStorage.getItem("app-settings");if(e){let t=JSON.parse(e);r(t.darkMode||!1)}else{let e=window.matchMedia("(prefers-color-scheme: dark)").matches;r(e)}}catch(e){console.error("설정 파싱 오류:",e)}},[]),(0,a.jsx)(T.Provider,{value:{theme:n,toggleTheme:()=>{r("dark"==("light"===n?"dark":"light"))},setDarkMode:r},children:t})}var k=n(104),N=n.n(k);let M=(0,o.memo)(function(){let e=(0,o.useCallback)(()=>{window.electronAPI&&window.electronAPI.windowControl("minimize")},[]),t=(0,o.useCallback)(()=>{window.electronAPI&&window.electronAPI.windowControl("maximize")},[]),n=(0,o.useCallback)(()=>{window.electronAPI&&window.electronAPI.windowControl("close")},[]);return(0,a.jsxs)("div",{className:N().windowControls,children:[(0,a.jsx)("button",{className:"".concat(N().windowButton," ").concat(N().minimizeButton),onClick:e,title:"최소화","aria-label":"최소화",children:(0,a.jsx)("div",{className:N().buttonContent,children:"―"})}),(0,a.jsx)("button",{className:"".concat(N().windowButton," ").concat(N().maximizeButton),onClick:t,title:"최대화","aria-label":"최대화",children:(0,a.jsx)("div",{className:N().buttonContent,children:"□"})}),(0,a.jsx)("button",{className:"".concat(N().windowButton," ").concat(N().closeButton),onClick:n,title:"닫기","aria-label":"닫기",children:(0,a.jsx)("div",{className:N().buttonContent,children:"\xd7"})})]})});var S=n(812),L=n.n(S),I=n(6766);let B=(0,o.memo)(function(e){let{api:t}=e,{theme:n}=f(),[s,r]=(0,o.useState)(!0),[i,c]=(0,o.useState)(!1),l=(0,o.useRef)(0),d=(0,o.useRef)(null),u=(0,o.useRef)(null),h=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!t)return;(async()=>{try{if(t.getWindowMode){let e=await t.getWindowMode();c("fullscreen-auto-hide"===e),"fullscreen-auto-hide"!==e&&r(!0)}}catch(e){console.error("창 모드 확인 오류:",e)}})();let e=e=>{let t="fullscreen-auto-hide"===e.detail.mode;c(t),t||r(!0)};return window.addEventListener("window-mode-changed",e),()=>{window.removeEventListener("window-mode-changed",e)}},[t]),(0,o.useEffect)(()=>{if(!i){r(!0);return}let e=e=>{let{clientY:t}=e;t<100?(r(!0),u.current&&(clearTimeout(u.current),u.current=null)):t>150&&s&&!h.current&&!u.current&&(u.current=setTimeout(()=>{h.current||r(!1),u.current=null},1500)),l.current=t},t=()=>{h.current=!0,u.current&&(clearTimeout(u.current),u.current=null),r(!0)},n=()=>{h.current=!1,i&&!u.current&&(u.current=setTimeout(()=>{r(!1),u.current=null},800))};return window.addEventListener("mousemove",e,{passive:!0,capture:!0}),d.current&&(d.current.addEventListener("mouseenter",t),d.current.addEventListener("mouseleave",n)),()=>{window.removeEventListener("mousemove",e,{capture:!0}),d.current&&(d.current.removeEventListener("mouseenter",t),d.current.removeEventListener("mouseleave",n)),u.current&&clearTimeout(u.current)}},[i,s]),(0,a.jsxs)("header",{ref:d,style:{pointerEvents:"auto"},className:"".concat(L().appHeader," ").concat("dark"===n?L().darkMode:""," ").concat(s?L().visible:L().hidden," ").concat(i?L().autoHide:""),children:[(0,a.jsx)("div",{className:L().headerDetectionArea,style:{pointerEvents:"auto"}}),(0,a.jsx)("div",{className:L().leftSection,children:(0,a.jsx)("div",{className:L().iconOnly,children:(0,a.jsx)(I.default,{src:"/app-icon.svg",alt:"",width:24,height:24,priority:!0})})}),(0,a.jsx)("div",{className:L().rightSection,children:t&&(0,a.jsx)(M,{})})]})});var E=n(2335),P=n.n(E),A=n(773);function D(e){let{onSave:t,initialSettings:n,darkMode:s,onDarkModeChange:r,onWindowModeChange:i}=e,[c,l]=(0,o.useState)(n||{enabledCategories:{docs:!0,office:!0,coding:!0,sns:!0},autoStartMonitoring:!0,darkMode:!1,windowMode:"windowed",minimizeToTray:!0,showTrayNotifications:!0,reduceMemoryInBackground:!0,enableMiniView:!0}),{showToast:d}=(0,A.d)();(0,o.useEffect)(()=>{n&&l(n)},[n]);let u=e=>{l(t=>({...t,enabledCategories:{...t.enabledCategories,[e]:!t.enabledCategories[e]}}))},h=e=>{l(t=>({...t,windowMode:e})),i(e)};return(0,a.jsxs)("div",{className:"".concat(P().settingsContainer," ").concat(s?P().darkMode:""),children:[(0,a.jsx)("h2",{children:"설정"}),(0,a.jsxs)("div",{className:P().settingSection,children:[(0,a.jsx)("h3",{children:"모니터링 대상 카테고리"}),(0,a.jsxs)("div",{className:P().categoryToggles,children:[(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.enabledCategories.docs,onChange:()=>u("docs")}),(0,a.jsx)("span",{className:P().toggleLabel,children:"문서 작업 (Notion, Google Docs 등)"})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.enabledCategories.office,onChange:()=>u("office")}),(0,a.jsx)("span",{className:P().toggleLabel,children:"오피스 웹앱 (Microsoft Office, 한컴오피스 등)"})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.enabledCategories.coding,onChange:()=>u("coding")}),(0,a.jsx)("span",{className:P().toggleLabel,children:"코딩 관련 (GitHub, GitLab 등)"})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.enabledCategories.sns,onChange:()=>u("sns")}),(0,a.jsx)("span",{className:P().toggleLabel,children:"SNS/메신저 (Discord, Slack 등)"})]})})]})]}),(0,a.jsxs)("div",{className:P().settingSection,children:[(0,a.jsx)("h3",{children:"일반 설정"}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.autoStartMonitoring,onChange:()=>{l(e=>({...e,autoStartMonitoring:!e.autoStartMonitoring}))}}),(0,a.jsx)("span",{className:P().toggleLabel,children:"앱 시작 시 자동으로 모니터링 시작"})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.darkMode,onChange:()=>{let e=!c.darkMode;l(t=>({...t,darkMode:e})),r(e)}}),(0,a.jsx)("span",{className:P().toggleLabel,children:"다크 모드"})]})})]}),(0,a.jsxs)("div",{className:P().settingSection,children:[(0,a.jsx)("h3",{children:"화면 모드"}),(0,a.jsxs)("div",{className:P().radioGroup,children:[(0,a.jsxs)("label",{className:P().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",checked:"windowed"===c.windowMode,onChange:()=>h("windowed")}),(0,a.jsx)("span",{className:P().radioText,children:"창 모드"})]}),(0,a.jsxs)("label",{className:P().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",checked:"fullscreen"===c.windowMode,onChange:()=>h("fullscreen")}),(0,a.jsx)("span",{className:P().radioText,children:"전체화면 모드"})]}),(0,a.jsxs)("label",{className:P().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",value:"fullscreen-auto-hide",checked:"fullscreen-auto-hide"===c.windowMode,onChange:()=>h("fullscreen-auto-hide")}),(0,a.jsx)("span",{className:P().radioText,children:"자동 숨김 모드 (마우스 가까이 가면 도구모음 표시)"})]})]})]}),(0,a.jsxs)("div",{className:P().settingSection,children:[(0,a.jsx)("h3",{children:"시스템 트레이 설정"}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.minimizeToTray,onChange:()=>{l(e=>({...e,minimizeToTray:!e.minimizeToTray}))}}),(0,a.jsx)("span",{className:P().toggleLabel,children:"창 닫기 시 트레이로 최소화 (백그라운드 실행)"})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.showTrayNotifications,onChange:()=>{l(e=>({...e,showTrayNotifications:!e.showTrayNotifications}))},disabled:!c.minimizeToTray}),(0,a.jsxs)("span",{className:P().toggleLabel,children:["트레이 알림 표시",!c.minimizeToTray&&(0,a.jsx)("small",{className:P().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.reduceMemoryInBackground,onChange:()=>{l(e=>({...e,reduceMemoryInBackground:!e.reduceMemoryInBackground}))},disabled:!c.minimizeToTray}),(0,a.jsxs)("span",{className:P().toggleLabel,children:["백그라운드에서 메모리 사용 최적화",!c.minimizeToTray&&(0,a.jsx)("small",{className:P().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("div",{className:P().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:c.enableMiniView,onChange:()=>{l(e=>({...e,enableMiniView:!e.enableMiniView}))},disabled:!c.minimizeToTray}),(0,a.jsxs)("span",{className:P().toggleLabel,children:["트레이 아이콘 클릭 시 미니뷰(PiP) 표시",!c.minimizeToTray&&(0,a.jsx)("small",{className:P().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("p",{className:P().settingDescription,children:"트레이로 최소화 기능을 사용하면 창을 닫아도 앱이 백그라운드에서 계속 실행되어 타이핑을 모니터링합니다. 메모리 사용 최적화 옵션은 백그라운드 실행 시 RAM 사용량을 줄여줍니다."}),(0,a.jsx)("p",{className:P().settingDescription,children:"미니뷰를 활성화하면 트레이 아이콘을 클릭할 때 화면 상단에 작은 통계 창이 표시됩니다. 이를 통해 앱을 최소화한 상태에서도 중요한 타이핑 통계를 확인할 수 있습니다."})]}),(0,a.jsx)("div",{className:P().buttonRow,children:(0,a.jsx)("button",{className:P().saveButton,onClick:()=>{t(c),d("설정이 저장되었습니다.","success")},children:"설정 저장"})})]})}var W=n(8334),V=n.n(W);let H=o.memo(function(){let[e,t]=(0,o.useState)([]),[n,s]=(0,o.useState)(!0),[r,c]=(0,o.useState)("monitor"),[l,d]=(0,o.useState)(!1),[u,m]=(0,o.useState)(!1),g=(0,o.useRef)([]),_=(0,o.useRef)([]),b=(0,o.useRef)({keyCount:0,typingTime:0,windowTitle:"",browserName:"",totalChars:0,totalCharsNoSpace:0,totalWords:0,pages:0,accuracy:100}),[w,v]=(0,o.useState)(b.current);(0,o.useEffect)(()=>{let e=setInterval(()=>{v({...b.current})},1e3);return g.current.push(e),()=>{clearInterval(e)}},[]);let[x,T]=(0,o.useState)({enabledCategories:{docs:!0,office:!0,coding:!0,sns:!0},autoStartMonitoring:!0,darkMode:!1,windowMode:"windowed",minimizeToTray:!0,showTrayNotifications:!0,reduceMemoryInBackground:!0,enableMiniView:!0}),[f,C]=(0,o.useState)(!1),[k,N]=(0,o.useState)(null),{showToast:M}=(0,A.d)(),[S,L]=(0,o.useState)("windowed"),I=(0,o.useMemo)(()=>window.electronAPI?window.electronAPI:{onTypingStatsUpdate:()=>()=>{},onStatsSaved:()=>()=>{},startTracking:()=>console.log("개발용 startTracking 호출"),stopTracking:()=>console.log("개발용 stopTracking 호출"),saveStats:()=>console.log("개발용 saveStats 호출"),getCurrentBrowserInfo:()=>Promise.resolve({name:null,isGoogleDocs:!1,title:null}),getDebugInfo:()=>Promise.resolve({isTracking:!1,currentStats:{keyCount:0,typingTime:0,startTime:null,lastActiveTime:null,currentWindow:null,currentBrowser:null,totalChars:0,totalWords:0,totalCharsNoSpace:0,pages:0,accuracy:100},platform:"web",electronVersion:"N/A",nodeVersion:"N/A"}),saveSettings:e=>Promise.resolve({success:!0,settings:e}),loadSettings:()=>Promise.resolve({enabledCategories:{docs:!0,office:!0,coding:!0,sns:!0},autoStartMonitoring:!0,darkMode:!1,windowMode:"windowed",minimizeToTray:!0,showTrayNotifications:!0,reduceMemoryInBackground:!0}),setDarkMode:e=>Promise.resolve({success:!0,enabled:e}),setWindowMode:e=>Promise.resolve({success:!0,mode:e}),getWindowMode:()=>Promise.resolve("windowed"),windowControl:()=>console.log("개발용 windowControl 호출"),checkAutoStart:()=>console.log("개발용 checkAutoStart 호출"),onAutoTrackingStarted:()=>()=>{},updateTraySettings:e=>{var t,n,a;return Promise.resolve({success:!0,settings:{minimizeToTray:null===(t=e.minimizeToTray)||void 0===t||t,showTrayNotifications:null===(n=e.showTrayNotifications)||void 0===n||n,reduceMemoryInBackground:null===(a=e.reduceMemoryInBackground)||void 0===a||a}})},quitApp:()=>console.log("개발용 quitApp 호출"),toggleWindow:()=>console.log("개발용 toggleWindow 호출"),onBackgroundModeChange:()=>()=>{},onTrayCommand:()=>()=>{},onSwitchTab:e=>(console.log("개발용 onSwitchTab 등록"),()=>console.log("개발용 onSwitchTab 해제")),onOpenSaveStatsDialog:e=>(console.log("개발용 onOpenSaveStatsDialog 등록"),()=>console.log("개발용 onOpenSaveStatsDialog 해제")),requestStatsUpdate:()=>console.log("개발용 requestStatsUpdate 호출"),onMiniViewStatsUpdate:e=>(console.log("개발용 onMiniViewStatsUpdate 등록"),()=>console.log("개발용 onMiniViewStatsUpdate 해제")),toggleMiniView:()=>console.log("개발용 toggleMiniView 호출")},[]),E=(0,o.useCallback)(e=>{c(e)},[]),P=(0,o.useCallback)(async()=>{if("history"===r||"stats"===r||"chart"===r)try{s(!0);let e=await fetch("/api/getLogs"),n=await e.json();n.success?(t(n.logs),u&&console.log("로그 데이터 불러옴:",n.logs.length)):console.error("로그 불러오기 실패:",n.error)}catch(e){console.error("로그 API 요청 오류:",e)}finally{s(!1)}},[u,r]),W=(0,o.useCallback)(async e=>{try{u&&console.log("저장할 데이터:",e);let t=await fetch("/api/saveLogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();t.ok?(u&&console.log("저장 성공:",n),await P()):console.error("저장 실패:",n.error)}catch(e){console.error("저장 API 요청 오류:",e)}},[P,u]),H=(0,o.useCallback)(()=>{try{window.electronAPI?(window.electronAPI.startTracking(),d(!0),u&&console.log("모니터링 시작됨")):(console.warn("electronAPI를 찾을 수 없습니다."),d(!0))}catch(e){console.error("startTracking 호출 오류:",e),d(!0)}},[u]),z=(0,o.useCallback)(()=>{try{k?(k.stopTracking(),d(!1),u&&console.log("모니터링 중지됨")):(console.warn("electronAPI가 없습니다"),d(!1))}catch(e){console.error("stopTracking 호출 오류:",e),d(!1)}},[u,k]),R=(0,o.useCallback)(e=>{try{u&&console.log("통계 저장 요청:",e),k&&k.saveStats(e);let t={content:e,keyCount:b.current.keyCount,typingTime:b.current.typingTime,timestamp:new Date().toISOString(),windowTitle:b.current.windowTitle,browserName:b.current.browserName,totalChars:b.current.totalChars,totalWords:b.current.totalWords,pages:b.current.pages,accuracy:b.current.accuracy};W(t)}catch(t){console.error("saveStats 호출 오류:",t),W({content:e,keyCount:b.current.keyCount,typingTime:b.current.typingTime,timestamp:new Date().toISOString(),windowTitle:b.current.windowTitle,browserName:b.current.browserName||"Unknown",totalChars:b.current.totalChars,totalWords:b.current.totalWords,pages:b.current.pages,accuracy:b.current.accuracy})}},[W,u,k]),O=(0,o.useCallback)(()=>{m(e=>!e)},[]),G=(0,o.useCallback)(e=>{try{localStorage.setItem("app-settings",JSON.stringify(e)),console.log("설정이 로컬 스토리지에 저장됨")}catch(e){console.error("설정 저장 중 오류:",e)}},[]),q=(0,o.useCallback)(()=>{try{let p=localStorage.getItem("app-settings");if(p){var e,t,n,a,o,s,r,i,c,l,d,u,h,m,g;let _=JSON.parse(p),b={enabledCategories:{docs:null===(o=null===(e=_.enabledCategories)||void 0===e?void 0:e.docs)||void 0===o||o,office:null===(s=null===(t=_.enabledCategories)||void 0===t?void 0:t.office)||void 0===s||s,coding:null===(r=null===(n=_.enabledCategories)||void 0===n?void 0:n.coding)||void 0===r||r,sns:null===(i=null===(a=_.enabledCategories)||void 0===a?void 0:a.sns)||void 0===i||i},autoStartMonitoring:null===(c=_.autoStartMonitoring)||void 0===c||c,darkMode:null!==(l=_.darkMode)&&void 0!==l&&l,windowMode:null!==(d=_.windowMode)&&void 0!==d?d:"windowed",minimizeToTray:null===(u=_.minimizeToTray)||void 0===u||u,showTrayNotifications:null===(h=_.showTrayNotifications)||void 0===h||h,reduceMemoryInBackground:null===(m=_.reduceMemoryInBackground)||void 0===m||m,enableMiniView:null===(g=_.enableMiniView)||void 0===g||g};return T(b),C(b.darkMode),console.log("설정이 로컬 스토리지에서 로드됨"),b}}catch(e){console.error("설정 로드 중 오류:",e)}return null},[]),F=(0,o.useCallback)(async e=>{T(e),G(e),C(e.darkMode);try{if(!k)return;let t=k.saveSettings(e);t instanceof Promise&&((await t).success?M("설정이 저장되었습니다.","success"):M("설정 저장에 실패했습니다.","error")),k.setDarkMode&&await k.setDarkMode(e.darkMode),k.setWindowMode&&await k.setWindowMode(e.windowMode)}catch(e){console.error("Electron 설정 적용 오류:",e),M("설정 적용 중 오류가 발생했습니다.","error")}},[G,k,M]),J=(0,o.useCallback)(e=>{e?(document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode"),document.querySelectorAll(".tab-content, .chart-container, .history-table").forEach(e=>{e.classList.add("dark-mode")})):(document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode"),document.querySelectorAll(".tab-content, .chart-container, .history-table").forEach(e=>{e.classList.remove("dark-mode")}))},[]);(0,o.useEffect)(()=>{J(f);let e=new CustomEvent("darkmode-changed",{detail:{darkMode:f}});window.dispatchEvent(e)},[f,J]);let U=(0,o.useCallback)(async e=>{try{if(L(e),k&&"function"==typeof k.setWindowMode){let t=new Promise((e,t)=>{setTimeout(()=>t(Error("창 모드 변경 시간 초과")),3e3)}),n=await Promise.race([k.setWindowMode(e),t]);n.success||(console.error("창 모드 변경 실패: ".concat(n.error||"알 수 없는 오류")),M("창 모드 변경에 실패했습니다.","error"))}else console.warn("setWindowMode API를 사용할 수 없습니다. UI만 업데이트됩니다.")}catch(e){console.error("창 모드 변경 중 오류:",e),M("창 모드 변경 중 오류가 발생했습니다.","error")}},[k,M]);(0,o.useEffect)(()=>{P();let e=q();if(null==e?void 0:e.autoStartMonitoring)try{H()}catch(e){console.error("자동 시작 오류:",e)}},[P,q,H]),(0,o.useEffect)(()=>{(async()=>{try{let e=q();if(null==e?void 0:e.autoStartMonitoring){console.log("자동 시작 설정이 활성화되어 있음");try{let e=window;(null==e?void 0:e.electronAPI)&&"function"==typeof e.electronAPI.checkAutoStart?e.electronAPI.checkAutoStart(!0):console.warn("checkAutoStart 함수를 찾을 수 없습니다. 자동으로 모니터링을 시작합니다."),H()}catch(e){console.error("자동 시작 초기화 오류:",e),H()}}}catch(e){console.error("앱 초기화 오류:",e)}})()},[q,H,k]),(0,o.useEffect)(()=>{let e=e=>{L(e.detail.mode)};window.addEventListener("window-mode-status",e);let t=async()=>{if(k&&k.getWindowMode)try{let e=await k.getWindowMode();L(e)}catch(e){console.error("창 모드 확인 오류:",e)}else console.log("getWindowMode API를 사용할 수 없습니다. 기본 창 모드를 사용합니다.")};return k&&t(),()=>{window.removeEventListener("window-mode-status",e)}},[k]),(0,o.useEffect)(()=>{let e=k||I,t=[];try{let n=e.onTypingStatsUpdate(e=>{b.current={...b.current,keyCount:e.keyCount,typingTime:e.typingTime,windowTitle:e.windowTitle||b.current.windowTitle,browserName:e.browserName||b.current.browserName,totalChars:e.totalChars||0,totalCharsNoSpace:e.totalCharsNoSpace||0,totalWords:e.totalWords||0,pages:e.pages||0,accuracy:e.accuracy||100},l||d(!0)});t.push(n);let a=e.onStatsSaved(()=>{P()});t.push(a),_.current=t}catch(e){console.error("Electron API 이벤트 구독 오류:",e)}return()=>{t.forEach(e=>{try{e()}catch(e){console.error("이벤트 리스너 정리 오류:",e)}}),g.current.forEach(clearInterval),g.current=[]}},[k,I,l,P]),(0,o.useEffect)(()=>{let e=k||I,t=e.onSwitchTab(e=>{console.log("트레이 메뉴에서 ".concat(e," 탭으로 이동 요청")),E(e)}),n=e.onOpenSaveStatsDialog(()=>{console.log("트레이 메뉴에서 통계 저장 다이얼로그 열기 요청"),E("monitor")}),a=setInterval(()=>{l&&e.requestStatsUpdate&&e.requestStatsUpdate()},3e4);return g.current.push(a),()=>{t(),n(),clearInterval(a)}},[k,I,E,l]),(0,o.useEffect)(()=>{let e=()=>{G(x)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[x,G]),(0,o.useEffect)(()=>(window.electronAPI&&N(window.electronAPI),()=>{if(_.current.forEach(e=>e()),_.current=[],g.current.forEach(clearInterval),g.current=[],window.gc)try{window.gc()}catch(e){console.log("GC 호출 실패")}}),[]);let K=(0,o.useCallback)(e=>{C(e),J(e),k&&k.setDarkMode(e)},[k,J]),[X,Q]=(0,o.useState)(!0),Y=(0,o.useRef)(null),Z=(0,o.useRef)(null);(0,o.useEffect)(()=>{if("fullscreen-auto-hide"!==S){k&&"function"==typeof k.windowControl&&k.windowControl("showHeader");return}let e=e=>{let{clientY:t}=e;t<100?(Q(!0),k&&"function"==typeof k.windowControl&&k.windowControl("showHeader"),Z.current&&(clearTimeout(Z.current),Z.current=null)):t>150&&X&&!Z.current&&(Z.current=setTimeout(()=>{Q(!1),k&&"function"==typeof k.windowControl&&k.windowControl("hideHeader"),Z.current=null},1500))};return window.addEventListener("mousemove",e,{passive:!0,capture:!0}),()=>{window.removeEventListener("mousemove",e,{capture:!0}),Z.current&&clearTimeout(Z.current)}},[S,X,k]),(0,o.useEffect)(()=>{k&&"function"==typeof k.windowControl&&k.windowControl("setTitle","loop"),"undefined"!=typeof document&&(document.title="loop")},[k]);let $=(0,o.useMemo)(()=>{switch(r){case"monitor":return(0,a.jsx)(h,{stats:w,isTracking:l,onStartTracking:H,onStopTracking:z,onSaveStats:R});case"history":return(0,a.jsx)(p,{logs:e,isLoading:n});case"stats":return(0,a.jsx)(i,{logs:e});case"chart":return(0,a.jsx)(y,{logs:e});case"settings":return(0,a.jsx)(D,{onSave:F,initialSettings:x,darkMode:f,onDarkModeChange:K,onWindowModeChange:U});default:return null}},[r,w,l,H,z,R,e,n,x,f,K,U]);return(0,a.jsxs)("div",{className:"".concat(V().container," ").concat(f?"dark-mode":""," ").concat("fullscreen-auto-hide"===S?V().zenMode:""),style:{position:"relative",zIndex:1},children:[(0,a.jsx)(B,{api:k}),"fullscreen-auto-hide"===S&&(0,a.jsx)("div",{ref:Y,className:V().headerDetectionArea,"aria-hidden":"true",style:{pointerEvents:"auto"}}),(0,a.jsxs)("main",{className:V().mainContent,children:[(0,a.jsxs)("div",{className:V().appTabs,style:{pointerEvents:"auto"},children:[(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat("monitor"===r?V().activeTab:""),onClick:()=>E("monitor"),style:{pointerEvents:"auto"},children:"모니터링"}),(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat("history"===r?V().activeTab:""),onClick:()=>E("history"),style:{pointerEvents:"auto"},children:"히스토리"}),(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat("stats"===r?V().activeTab:""),onClick:()=>E("stats"),style:{pointerEvents:"auto"},children:"통계"}),(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat("chart"===r?V().activeTab:""),onClick:()=>E("chart"),style:{pointerEvents:"auto"},children:"차트"}),(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat("settings"===r?V().activeTab:""),onClick:()=>E("settings"),style:{pointerEvents:"auto"},children:"설정"}),(0,a.jsx)("button",{className:"".concat(V().tabButton," ").concat(V().debugButton," ").concat(u?V().debugActive:""),onClick:O,title:"디버그 모드 토글",style:{pointerEvents:"auto"},children:"\uD83D\uDC1E"})]}),$]}),u&&(0,a.jsxs)("div",{className:V().debugPanelBottom,children:[(0,a.jsx)("h3",{children:"디버그 정보"}),(0,a.jsxs)("div",{className:V().debugInfo,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"isTracking:"})," ",l?"true":"false"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Logs:"})," ",e.length,"개"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Current keyCount:"})," ",b.current.keyCount]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Browser:"})," ",b.current.browserName||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Window:"})," ",b.current.windowTitle||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Window Mode:"})," ",S]})]})]}),(0,a.jsx)(j,{})]})});function z(){return(0,a.jsx)(C,{children:(0,a.jsx)(A.t,{children:(0,a.jsx)(H,{})})})}},4916:e=>{e.exports={statsContainer:"TypingStats_statsContainer__ER9Ok",statsGrid:"TypingStats_statsGrid__cgenG",statCard:"TypingStats_statCard__Vz_Pu",statValue:"TypingStats_statValue__fglm_"}},5821:e=>{e.exports={toast:"Toast_toast__n4V9V",fadeIn:"Toast_fadeIn__8co0A",fadeOut:"Toast_fadeOut__PBTbC",success:"Toast_success__n3sBF",error:"Toast_error__vTefu",info:"Toast_info__iczaj",message:"Toast_message__Ivwz3"}},8334:e=>{e.exports={appContainer:"page_appContainer__p4TtA",mainContent:"page_mainContent__51TpB",appTabs:"page_appTabs__dehwV",tabButton:"page_tabButton__stR9X",activeTab:"page_activeTab__kgdSK",typingContainer:"page_typingContainer__Ltx96",statsContainer:"page_statsContainer__15RXV",historyContainer:"page_historyContainer__PhcIa",monitorContainer:"page_monitorContainer__nzoP_",debugButton:"page_debugButton__OpmNi",debugActive:"page_debugActive__1OXf0",debugPanel:"page_debugPanel__3hMsI",debugPanelBottom:"page_debugPanelBottom__KC93m",debugInfo:"page_debugInfo__i9tMu",zenMode:"page_zenMode__IMTVJ",headerDetectionArea:"page_headerDetectionArea__Mg4up"}},8807:e=>{e.exports={historyContainer:"TypingHistory_historyContainer__m0uqE",historyList:"TypingHistory_historyList__1eEH_",historyItem:"TypingHistory_historyItem__5a96V",historyTime:"TypingHistory_historyTime__hrsig",historyContent:"TypingHistory_historyContent__4Acyh",historyMeta:"TypingHistory_historyMeta__umeXy",loading:"TypingHistory_loading__2GFLm",noData:"TypingHistory_noData__HtLfq"}},9981:(e,t,n)=>{Promise.resolve().then(n.bind(n,3549))}},e=>{var t=t=>e(e.s=t);e.O(0,[464,647,396,441,684,358],()=>t(9981)),_N_E=e.O()}]);