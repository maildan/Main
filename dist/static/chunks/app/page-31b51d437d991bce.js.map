{"version":3,"file":"static/chunks/app/page-31b51d437d991bce.js","mappings":"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","sources":["webpack://_N_E/./src/app/components/WindowControls.module.css","webpack://_N_E/./src/app/components/TypingMonitor.module.css","webpack://_N_E/./src/app/components/Toast.tsx","webpack://_N_E/./src/app/components/ToastContext.tsx","webpack://_N_E/./src/app/components/AppHeader.module.css","webpack://_N_E/./src/app/components/TypingAnalyzer.module.css","webpack://_N_E/./src/app/components/TypingChart.module.css","webpack://_N_E/./src/app/components/Settings.module.css","webpack://_N_E/?f547","webpack://_N_E/./src/app/components/dialogs/ConfirmDialog.module.css","webpack://_N_E/./src/app/components/TypingMonitor.tsx","webpack://_N_E/./src/app/components/TypingChart.tsx","webpack://_N_E/./src/app/components/TabNavigation.tsx","webpack://_N_E/./src/app/components/ThemeProvider.tsx","webpack://_N_E/./src/app/components/WindowControls.tsx","webpack://_N_E/./src/app/components/AppHeader.tsx","webpack://_N_E/./src/app/components/AppFooter.tsx","webpack://_N_E/./src/app/components/MainLayout.tsx","webpack://_N_E/./src/app/components/DebugPanel.tsx","webpack://_N_E/./src/app/components/dialogs/ConfirmDialog.tsx","webpack://_N_E/./src/app/components/dialogs/SaveConfirmDialog.tsx","webpack://_N_E/./src/app/components/Settings.tsx","webpack://_N_E/./src/app/components/RestartLoading.tsx","webpack://_N_E/./src/app/hooks/useElectronApi.ts","webpack://_N_E/./src/app/utils/darkModeUtils.ts","webpack://_N_E/./src/app/hooks/useSettings.ts","webpack://_N_E/./src/app/hooks/useTypingStats.ts","webpack://_N_E/./src/app/hooks/useTabNavigation.ts","webpack://_N_E/./src/app/hooks/useMemoryManagement.ts","webpack://_N_E/./src/app/hooks/useAutoHideHeader.ts","webpack://_N_E/./src/app/utils/memory/image-optimizer.ts","webpack://_N_E/./src/app/components/HomeContent.tsx","webpack://_N_E/./src/app/hooks/useNativeGpu.ts","webpack://_N_E/./src/app/components/TypingAnalyzer.tsx","webpack://_N_E/./src/app/components/TypingAnalyzerWrapper.tsx","webpack://_N_E/./src/app/page.tsx","webpack://_N_E/./src/app/components/RestartLoading.module.css","webpack://_N_E/./src/app/components/Toast.module.css","webpack://_N_E/./src/types/native-module.ts","webpack://_N_E/./src/app/utils/nativeModuleClient.ts","webpack://_N_E/./src/app/page.module.css"],"sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"windowControls\":\"WindowControls_windowControls__SbBFq\",\"windowButton\":\"WindowControls_windowButton__rzJFU\",\"buttonContent\":\"WindowControls_buttonContent__1XpLJ\",\"minimizeButton\":\"WindowControls_minimizeButton__hBC_D\",\"maximizeButton\":\"WindowControls_maximizeButton__19xOw\",\"closeButton\":\"WindowControls_closeButton__GWHV_\",\"minimizeIcon\":\"WindowControls_minimizeIcon__HwMi5\",\"maximizeIcon\":\"WindowControls_maximizeIcon__H4uH1\",\"closeIcon\":\"WindowControls_closeIcon__OfU_7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"monitorContainer\":\"TypingMonitor_monitorContainer__ER1LM\",\"controlPanel\":\"TypingMonitor_controlPanel__mnPAg\",\"startButton\":\"TypingMonitor_startButton__6Kfxe\",\"stopButton\":\"TypingMonitor_stopButton__KAJ8v\",\"saveButton\":\"TypingMonitor_saveButton__WglP8\",\"statsPanel\":\"TypingMonitor_statsPanel__hOEWj\",\"statItem\":\"TypingMonitor_statItem__uJud3\",\"statLabel\":\"TypingMonitor_statLabel___96yv\",\"statValue\":\"TypingMonitor_statValue__Gutae\",\"saveSection\":\"TypingMonitor_saveSection__KoLn9\",\"descriptionInput\":\"TypingMonitor_descriptionInput__B_Lx7\",\"helpSection\":\"TypingMonitor_helpSection__JbpyP\",\"statusIndicator\":\"TypingMonitor_statusIndicator__kULxH\",\"indicator\":\"TypingMonitor_indicator__z3RHP\",\"active\":\"TypingMonitor_active__hioKY\",\"pulse\":\"TypingMonitor_pulse__PJDcF\",\"googleDocsLink\":\"TypingMonitor_googleDocsLink__sa_xR\",\"websiteTabs\":\"TypingMonitor_websiteTabs__RgoMF\",\"websiteTabHeader\":\"TypingMonitor_websiteTabHeader__V_y3l\",\"websiteTabButton\":\"TypingMonitor_websiteTabButton__rXPP4\",\"activeWebsiteTab\":\"TypingMonitor_activeWebsiteTab__niDOn\",\"websiteTabContent\":\"TypingMonitor_websiteTabContent__RBMcj\",\"websiteLinks\":\"TypingMonitor_websiteLinks__3vAID\",\"websiteLink\":\"TypingMonitor_websiteLink__lqd9U\",\"actionFeedback\":\"TypingMonitor_actionFeedback__VPiGl\",\"fadeIn\":\"TypingMonitor_fadeIn__BRcC2\",\"browserStatus\":\"TypingMonitor_browserStatus__b4rGV\",\"browserInfo\":\"TypingMonitor_browserInfo__w3N_l\",\"browserRow\":\"TypingMonitor_browserRow__27uT0\",\"browserValue\":\"TypingMonitor_browserValue__cu5JE\",\"detectedBadge\":\"TypingMonitor_detectedBadge__iDUgv\",\"notDetectedBadge\":\"TypingMonitor_notDetectedBadge__EtIo1\",\"browserList\":\"TypingMonitor_browserList__JrDTA\",\"browserColumn\":\"TypingMonitor_browserColumn__EOGEk\",\"trackingButton\":\"TypingMonitor_trackingButton__szR9V\",\"trackingActive\":\"TypingMonitor_trackingActive__eHDsS\",\"monitorHeader\":\"TypingMonitor_monitorHeader__yUhAy\",\"container\":\"TypingMonitor_container__TzhrN\",\"contentWrapper\":\"TypingMonitor_contentWrapper__PPmCK\",\"leftPanel\":\"TypingMonitor_leftPanel__FJhBH\",\"rightPanel\":\"TypingMonitor_rightPanel__DQxqP\",\"statsTabs\":\"TypingMonitor_statsTabs__BFC0M\",\"statsTabButton\":\"TypingMonitor_statsTabButton__PM_Rt\",\"activeStatsTab\":\"TypingMonitor_activeStatsTab__rEAV4\",\"statsTabContent\":\"TypingMonitor_statsTabContent__RAlml\",\"statsGroup\":\"TypingMonitor_statsGroup__eqddv\",\"statCard\":\"TypingMonitor_statCard__qVky4\"};","import { useEffect, useState } from 'react';\r\nimport styles from './Toast.module.css';\r\n\r\ninterface ToastProps {\r\n  message: string;\r\n  type: 'success' | 'error' | 'info' | 'warning'; // warning 타입 추가\r\n  duration?: number;\r\n  onClose?: () => void;\r\n}\r\n\r\nexport function Toast({ message, type, duration = 3000, onClose }: ToastProps) {\r\n  const [visible, setVisible] = useState(true);\r\n  \r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setVisible(false);\r\n      if (onClose) onClose();\r\n    }, duration);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, [duration, onClose]);\r\n  \r\n  return visible ? (\r\n    <div className={`${styles.toast} ${styles[type]}`}>\r\n      <span className={styles.message}>{message}</span>\r\n    </div>\r\n  ) : null;\r\n}","import React, { createContext, useContext, useState } from 'react';\r\nimport { Toast } from './Toast';\r\n\r\ntype ToastType = 'success' | 'error' | 'info' | 'warning'; // warning 타입 추가\r\n\r\ninterface ToastContextType {\r\n  showToast: (message: string, type: ToastType) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport function ToastProvider({ children }: { children: React.ReactNode }) {\r\n  const [toast, setToast] = useState<{ message: string; type: ToastType } | null>(null);\r\n  \r\n  const showToast = (message: string, type: ToastType) => {\r\n    setToast({ message, type });\r\n    \r\n    // 3초 후 자동으로 토스트 제거\r\n    setTimeout(() => {\r\n      setToast(null);\r\n    }, 3000);\r\n  };\r\n  \r\n  return (\r\n    <ToastContext.Provider value={{ showToast }}>\r\n      {children}\r\n      {toast && (\r\n        <Toast\r\n          message={toast.message}\r\n          type={toast.type}\r\n          onClose={() => setToast(null)}\r\n        />\r\n      )}\r\n    </ToastContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useToast = () => {\r\n  const context = useContext(ToastContext);\r\n  if (context === undefined) {\r\n    // 오류 대신 더미 함수 반환하여 앱이 중단되지 않도록 함\r\n    return {\r\n      showToast: (message: string, type: ToastType) => {\r\n        console.warn('ToastProvider가 설정되지 않았습니다:', message);\r\n      }\r\n    };\r\n  }\r\n  return context;\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appHeader\":\"AppHeader_appHeader__GHmNp\",\"leftSection\":\"AppHeader_leftSection__bx_bz\",\"rightSection\":\"AppHeader_rightSection__2Sou5\",\"iconOnly\":\"AppHeader_iconOnly__AbZ3Q\",\"darkMode\":\"AppHeader_darkMode__vqPCA\",\"visible\":\"AppHeader_visible__uRggq\",\"hidden\":\"AppHeader_hidden__yln_L\",\"autoHide\":\"AppHeader_autoHide__qqjph\",\"headerDetectionArea\":\"AppHeader_headerDetectionArea__vaapr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TypingAnalyzer_container__EiTxp\",\"header\":\"TypingAnalyzer_header__hDX3y\",\"title\":\"TypingAnalyzer_title__b6HkC\",\"gpuToggle\":\"TypingAnalyzer_gpuToggle__05K5J\",\"loading\":\"TypingAnalyzer_loading__Q5qi0\",\"error\":\"TypingAnalyzer_error__LKAhd\",\"results\":\"TypingAnalyzer_results__r6qGE\",\"stat\":\"TypingAnalyzer_stat__beTdm\",\"label\":\"TypingAnalyzer_label__Xjl78\",\"value\":\"TypingAnalyzer_value__ZPUzc\",\"fatigue\":\"TypingAnalyzer_fatigue__z3q__\",\"fatigueMeter\":\"TypingAnalyzer_fatigueMeter__KSS5H\",\"fatigueIndicator\":\"TypingAnalyzer_fatigueIndicator__p0ieh\",\"recommendation\":\"TypingAnalyzer_recommendation__TFBU4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chartContainer\":\"TypingChart_chartContainer__Xxoiu\",\"charts\":\"TypingChart_charts__fz60g\",\"chartItem\":\"TypingChart_chartItem__CNTM_\",\"chartWrapper\":\"TypingChart_chartWrapper__1KDYX\",\"noData\":\"TypingChart_noData__zjjvx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsContainer\":\"Settings_settingsContainer__0SxHP\",\"darkMode\":\"Settings_darkMode__a5VLX\",\"settingSection\":\"Settings_settingSection__XwrF7\",\"categoryToggles\":\"Settings_categoryToggles__HQHhT\",\"toggleItem\":\"Settings_toggleItem___q_0D\",\"toggleLabel\":\"Settings_toggleLabel__8fIJv\",\"radioGroup\":\"Settings_radioGroup__QGEGo\",\"radioLabel\":\"Settings_radioLabel__Iog9l\",\"radioText\":\"Settings_radioText__hi7nW\",\"selectLabel\":\"Settings_selectLabel__p8LXx\",\"selectControl\":\"Settings_selectControl__Wv09K\",\"numberInput\":\"Settings_numberInput__hKIK9\",\"buttonRow\":\"Settings_buttonRow__7DE_2\",\"saveButton\":\"Settings_saveButton__hOtLB\",\"disabledNote\":\"Settings_disabledNote__pj8Vq\",\"settingDescription\":\"Settings_settingDescription__uTSPW\",\"settingSectionTitle\":\"Settings_settingSectionTitle__7AAKi\",\"highlightedSetting\":\"Settings_highlightedSetting__nv197\",\"restartNotice\":\"Settings_restartNotice__7IuFo\",\"restartButton\":\"Settings_restartButton__W35gK\",\"monitoringAutoStart\":\"Settings_monitoringAutoStart__QvixM\",\"buttonGroup\":\"Settings_buttonGroup__INZRh\",\"debugButton\":\"Settings_debugButton__fDkOc\",\"debugInfo\":\"Settings_debugInfo__oW81q\"};","import(/* webpackMode: \"eager\" */ \"/Users/user/loop/loop_3/src/app/page.tsx\");\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"ConfirmDialog_overlay__XcVfx\",\"dialog\":\"ConfirmDialog_dialog__CZkp6\",\"fadeIn\":\"ConfirmDialog_fadeIn____2_q\",\"header\":\"ConfirmDialog_header__TwDKK\",\"info\":\"ConfirmDialog_info__c4R3u\",\"warning\":\"ConfirmDialog_warning__CAxfo\",\"error\":\"ConfirmDialog_error__1lLKt\",\"success\":\"ConfirmDialog_success__4OJVN\",\"closeButton\":\"ConfirmDialog_closeButton__xqxS2\",\"content\":\"ConfirmDialog_content__DjEqW\",\"message\":\"ConfirmDialog_message__e3Avu\",\"actions\":\"ConfirmDialog_actions___hCeq\",\"button\":\"ConfirmDialog_button__4hdj9\",\"cancelButton\":\"ConfirmDialog_cancelButton__jtlqe\",\"confirmButton\":\"ConfirmDialog_confirmButton__qHQyl\",\"warningButton\":\"ConfirmDialog_warningButton__NGvq4\",\"errorButton\":\"ConfirmDialog_errorButton__vhkIj\",\"successButton\":\"ConfirmDialog_successButton__ZgRV9\",\"darkMode\":\"ConfirmDialog_darkMode__GApyi\"};","'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport styles from './TypingMonitor.module.css';\r\n\r\ninterface TypingMonitorProps {\r\n  stats: {\r\n    keyCount: number;\r\n    typingTime: number;\r\n    windowTitle: string;\r\n    browserName?: string;\r\n    totalChars?: number;\r\n    totalCharsNoSpace?: number;\r\n    totalWords?: number;\r\n    pages?: number;\r\n    accuracy?: number;\r\n  };\r\n  isTracking: boolean;\r\n  onStartTracking: () => void;\r\n  onStopTracking: () => void;\r\n  onSaveStats: (content: string) => void;\r\n}\r\n\r\n// 포맷 함수를 컴포넌트 외부로 이동하여 렌더링마다 재생성되지 않도록 함\r\nconst formatTime = (seconds: number): string => {\r\n  if (seconds < 60) return `${seconds}초`;\r\n  \r\n  const minutes = Math.floor(seconds / 60);\r\n  const remainingSeconds = seconds % 60;\r\n  \r\n  if (minutes < 60) {\r\n    return `${minutes}분 ${remainingSeconds}초`;\r\n  }\r\n  \r\n  const hours = Math.floor(minutes / 60);\r\n  const remainingMinutes = minutes % 60;\r\n  \r\n  return `${hours}시간 ${remainingMinutes}분 ${remainingSeconds}초`;\r\n};\r\n\r\n// 평균 속도 계산 함수도 외부로 이동\r\nconst getAverageSpeed = (keyCount: number, time: number): string => {\r\n  if (time <= 0) return '0 타/분';\r\n  return `${Math.round((keyCount / time) * 60)} 타/분`;\r\n};\r\n\r\nexport const TypingMonitor = React.memo(function TypingMonitor({ \r\n  stats, \r\n  isTracking, \r\n  onStartTracking, \r\n  onStopTracking,\r\n  onSaveStats\r\n}: TypingMonitorProps) {\r\n  const [description, setDescription] = useState('');\r\n  const [lastAction, setLastAction] = useState<string>('');\r\n  const [activeWebsiteTab, setActiveWebsiteTab] = useState<string>('docs');\r\n  const [activeStatsTab, setActiveStatsTab] = useState<string>('typing'); \r\n  \r\n  // 브라우저 체크 결과를 ref로 변경하여 리렌더링 방지\r\n  const browserCheckResultRef = React.useRef<{\r\n    name: string | null;\r\n    isGoogleDocs: boolean;\r\n    title: string | null;\r\n  } | null>(null);\r\n\r\n  // 브라우저 정보 확인 함수 메모이제이션\r\n  const checkBrowserInfo = useCallback(async () => {\r\n    if (window.electronAPI?.getCurrentBrowserInfo) {\r\n      try {\r\n        const info = await window.electronAPI.getCurrentBrowserInfo();\r\n        browserCheckResultRef.current = info;\r\n      } catch (error) {\r\n        console.error('브라우저 정보 확인 오류:', error);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // 정기적으로 브라우저 정보 업데이트 (5초 → 30초로 변경하여 부하 대폭 감소)\r\n  useEffect(() => {\r\n    if (isTracking) {\r\n      // 초기 확인\r\n      checkBrowserInfo();\r\n      \r\n      // 더 긴 간격(30초)으로 업데이트하여 리소스 사용 감소\r\n      const interval = setInterval(checkBrowserInfo, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isTracking, checkBrowserInfo]);\r\n\r\n  // 메모이제이션된 핸들러 함수들\r\n  const handleDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setDescription(e.target.value);\r\n  }, []);\r\n\r\n  const handleSave = useCallback(() => {\r\n    onSaveStats(description);\r\n    setDescription('');\r\n    setLastAction('저장됨');\r\n    \r\n    // 2초 후 메시지 제거\r\n    setTimeout(() => {\r\n      setLastAction('');\r\n    }, 2000);\r\n  }, [description, onSaveStats]);\r\n\r\n  const handleToggleTracking = useCallback(() => {\r\n    if (isTracking) {\r\n      onStopTracking();\r\n    } else {\r\n      onStartTracking();\r\n    }\r\n  }, [isTracking, onStartTracking, onStopTracking]);\r\n\r\n  const handleWebsiteTabChange = useCallback((tab: string) => {\r\n    setActiveWebsiteTab(tab);\r\n  }, []);\r\n\r\n  const handleStatsTabChange = useCallback((tab: string) => {\r\n    setActiveStatsTab(tab);\r\n  }, []);\r\n\r\n  // 웹사이트 탭 컨텐츠 메모이제이션\r\n  const websiteTabContent = useMemo(() => {\r\n    switch (activeWebsiteTab) {\r\n      case 'docs':\r\n        return (\r\n          <div className={styles.websiteLinks}>\r\n            <a href=\"https://docs.google.com/document/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              구글 문서 열기\r\n            </a>\r\n            <a href=\"https://docs.google.com/spreadsheets/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              구글 스프레드시트 열기\r\n            </a>\r\n            <a href=\"https://docs.google.com/presentation/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              구글 프레젠테이션 열기\r\n            </a>\r\n            <a href=\"https://www.notion.so/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Notion 열기\r\n            </a>\r\n          </div>\r\n        );\r\n      case 'office':\r\n        return (\r\n          <div className={styles.websiteLinks}>\r\n            <a href=\"https://www.office.com/launch/word\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Word 온라인 열기\r\n            </a>\r\n            <a href=\"https://www.office.com/launch/excel\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Excel 온라인 열기\r\n            </a>\r\n            <a href=\"https://www.office.com/launch/powerpoint\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              PowerPoint 온라인 열기\r\n            </a>\r\n            <a href=\"https://www.hancom.com/main/main.do\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              한글과컴퓨터 열기\r\n            </a>\r\n          </div>\r\n        );\r\n      case 'coding':\r\n        return (\r\n          <div className={styles.websiteLinks}>\r\n            <a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              GitHub 열기\r\n            </a>\r\n            <a href=\"https://gitlab.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              GitLab 열기\r\n            </a>\r\n            <a href=\"https://codesandbox.io/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              CodeSandbox 열기\r\n            </a>\r\n            <a href=\"https://codepen.io/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              CodePen 열기\r\n            </a>\r\n          </div>\r\n        );\r\n      case 'sns':\r\n        return (\r\n          <div className={styles.websiteLinks}>\r\n            <a href=\"https://slack.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Slack 열기\r\n            </a>\r\n            <a href=\"https://discord.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Discord 열기\r\n            </a>\r\n            <a href=\"https://www.messenger.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Messenger 열기\r\n            </a>\r\n            <a href=\"https://mail.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.websiteLink}>\r\n              Gmail 열기\r\n            </a>\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }, [activeWebsiteTab]);\r\n\r\n  // 통계 탭 컨텐츠 메모이제이션\r\n  const statsTabContent = useMemo(() => {\r\n    switch (activeStatsTab) {\r\n      case 'typing':\r\n        return (\r\n          <div className={styles.statsGroup}>\r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>타자 수</div>\r\n              <div className={styles.statValue}>{stats.keyCount.toLocaleString()}</div>\r\n            </div>\r\n            \r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>타이핑 시간</div>\r\n              <div className={styles.statValue}>{formatTime(stats.typingTime)}</div>\r\n            </div>\r\n            \r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>평균 속도</div>\r\n              <div className={styles.statValue}>{getAverageSpeed(stats.keyCount, stats.typingTime)}</div>\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'document':\r\n        return (\r\n          <div className={styles.statsGroup}>\r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>페이지 수</div>\r\n              <div className={styles.statValue}>{stats.pages?.toFixed(1) || '0.0'}</div>\r\n            </div>\r\n            \r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>단어 수</div>\r\n              <div className={styles.statValue}>{stats.totalWords?.toLocaleString() || '0'}</div>\r\n            </div>\r\n            \r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>글자 수</div>\r\n              <div className={styles.statValue}>{stats.totalChars?.toLocaleString() || '0'}</div>\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'accuracy':\r\n        return (\r\n          <div className={styles.statsGroup}>\r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>글자 수 (공백 제외)</div>\r\n              <div className={styles.statValue}>{stats.totalCharsNoSpace?.toLocaleString() || '0'}</div>\r\n            </div>\r\n            \r\n            <div className={styles.statCard}>\r\n              <div className={styles.statLabel}>정확도</div>\r\n              <div className={styles.statValue}>{stats.accuracy || 100}%</div>\r\n            </div>\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }, [activeStatsTab, stats]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.monitorHeader}>\r\n        <h2>타이핑 모니터링</h2>\r\n        <button \r\n          className={`${styles.trackingButton} ${isTracking ? styles.trackingActive : ''}`}\r\n          onClick={handleToggleTracking}\r\n        >\r\n          {isTracking ? '모니터링 중지' : '모니터링 시작'}\r\n        </button>\r\n      </div>\r\n\r\n      <div className={styles.statusIndicator}>\r\n        <div className={`${styles.indicator} ${isTracking ? styles.active : ''}`}></div>\r\n        <span>모니터링 상태: <strong>{isTracking ? '활성화' : '비활성화'}</strong></span>\r\n        \r\n        {lastAction && (\r\n          <div className={styles.actionFeedback}>{lastAction}</div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className={styles.contentWrapper}>\r\n        <div className={styles.leftPanel}>\r\n          <div className={styles.browserStatus}>\r\n            <h3>브라우저 상태</h3>\r\n            <div className={styles.browserInfo}>\r\n              <div className={styles.browserRow}>\r\n                <span>감지된 브라우저:</span>\r\n                <span className={styles.browserValue}>\r\n                  {stats.browserName || browserCheckResultRef.current?.name || '없음'}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className={styles.browserRow}>\r\n                <span>구글 문서 감지:</span>\r\n                <span className={styles.browserValue}>\r\n                  {browserCheckResultRef.current?.isGoogleDocs ? (\r\n                    <span className={styles.detectedBadge}>감지됨 ✓</span>\r\n                  ) : (\r\n                    <span className={styles.notDetectedBadge}>아님 ⨯</span>\r\n                  )}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className={styles.browserRow}>\r\n                <span>현재 창:</span>\r\n                <span className={styles.browserValue} title={stats.windowTitle || browserCheckResultRef.current?.title || ''}>\r\n                  {(stats.windowTitle || browserCheckResultRef.current?.title || '없음').substring(0, 60)}\r\n                  {(stats.windowTitle || browserCheckResultRef.current?.title || '').length > 60 ? '...' : ''}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className={styles.websiteTabs}>\r\n            <div className={styles.websiteTabHeader}>\r\n              <button \r\n                className={`${styles.websiteTabButton} ${activeWebsiteTab === 'docs' ? styles.activeWebsiteTab : ''}`}\r\n                onClick={() => handleWebsiteTabChange('docs')}\r\n              >\r\n                구글 문서\r\n              </button>\r\n              <button \r\n                className={`${styles.websiteTabButton} ${activeWebsiteTab === 'office' ? styles.activeWebsiteTab : ''}`}\r\n                onClick={() => handleWebsiteTabChange('office')}\r\n              >\r\n                오피스\r\n              </button>\r\n              <button \r\n                className={`${styles.websiteTabButton} ${activeWebsiteTab === 'coding' ? styles.activeWebsiteTab : ''}`}\r\n                onClick={() => handleWebsiteTabChange('coding')}\r\n              >\r\n                코딩\r\n              </button>\r\n              <button \r\n                className={`${styles.websiteTabButton} ${activeWebsiteTab === 'sns' ? styles.activeWebsiteTab : ''}`}\r\n                onClick={() => handleWebsiteTabChange('sns')}\r\n              >\r\n                SNS/메신저\r\n              </button>\r\n            </div>\r\n            \r\n            <div className={styles.websiteTabContent}>\r\n              {websiteTabContent}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={styles.rightPanel}>\r\n          {/* 통계 패널을 탭 형식으로 변경 */}\r\n          <div className={styles.statsTabs}>\r\n            <button\r\n              className={`${styles.statsTabButton} ${activeStatsTab === 'typing' ? styles.activeStatsTab : ''}`}\r\n              onClick={() => handleStatsTabChange('typing')}\r\n            >\r\n              타이핑 정보\r\n            </button>\r\n            <button\r\n              className={`${styles.statsTabButton} ${activeStatsTab === 'document' ? styles.activeStatsTab : ''}`}\r\n              onClick={() => handleStatsTabChange('document')}\r\n            >\r\n              문서 정보\r\n            </button>\r\n            <button\r\n              className={`${styles.statsTabButton} ${activeStatsTab === 'accuracy' ? styles.activeStatsTab : ''}`}\r\n              onClick={() => handleStatsTabChange('accuracy')}\r\n            >\r\n              정확도 & 속도\r\n            </button>\r\n          </div>\r\n          \r\n          <div className={styles.statsTabContent}>\r\n            {statsTabContent}\r\n          </div>\r\n          \r\n          <div className={styles.saveSection}>\r\n            <h3>세션 저장</h3>\r\n            <p>작업한 내용에 대한 설명을 입력하세요</p>\r\n            <textarea\r\n              className={styles.descriptionInput}\r\n              value={description}\r\n              onChange={handleDescriptionChange}\r\n              placeholder=\"작업 내용 (예: 보고서 작성, 논문 작성 등)\"\r\n              rows={4}\r\n            />\r\n            <button \r\n              className={styles.saveButton} \r\n              onClick={handleSave}\r\n              disabled={stats.keyCount === 0 || !description.trim()}\r\n            >\r\n              통계 저장\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});","'use client';\r\n\r\nimport React, { useEffect, useState, useCallback, useMemo, useRef } from 'react';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport { Line, Bar } from 'react-chartjs-2';\r\nimport styles from './TypingChart.module.css';\r\n\r\n// Chart.js 컴포넌트 등록\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\ninterface LogType {\r\n  id: number;\r\n  content: string;\r\n  key_count: number;\r\n  typing_time: number;\r\n  timestamp: string;\r\n  created_at: string;\r\n}\r\n\r\ninterface TypingChartProps {\r\n  logs: LogType[];\r\n}\r\n\r\n// 로그 데이터 필터링 함수 - 컴포넌트 외부로 이동\r\nconst filterLogsForChart = (logs: LogType[]) => {\r\n  // 최근 7일 데이터만 표시 (30일에서 7일로 단축)\r\n  const sevenDaysAgo = new Date();\r\n  sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);\r\n  \r\n  return logs\r\n    .filter(log => new Date(log.timestamp) >= sevenDaysAgo)\r\n    .slice(0, 50); // 최대 50개 항목으로 제한 (100개에서 50개로 축소)\r\n};\r\n\r\nexport const TypingChart = React.memo(function TypingChart({ logs }: TypingChartProps) {\r\n  // 다크 모드 상태 추적\r\n  const [isDarkMode, setIsDarkMode] = useState(false);\r\n  \r\n  // 차트 인스턴스 참조 저장\r\n  const chartRefs = useRef<any[]>([]);\r\n  \r\n  // 컴포넌트 마운트/언마운트 감지\r\n  const isMountedRef = useRef(true);\r\n  \r\n  // 다크 모드 감지 함수 개선\r\n  useEffect(() => {\r\n    const checkDarkMode = () => {\r\n      const isDark = document.documentElement.classList.contains('dark-mode') || \r\n                    document.body.classList.contains('dark-mode');\r\n      setIsDarkMode(isDark);\r\n    };\r\n    \r\n    // 초기 확인\r\n    checkDarkMode();\r\n    \r\n    // 커스텀 이벤트 리스너 추가\r\n    const handleDarkModeChange = (event: CustomEvent<{darkMode: boolean}>) => {\r\n      setIsDarkMode(event.detail.darkMode);\r\n    };\r\n    \r\n    window.addEventListener('darkmode-changed', handleDarkModeChange as EventListener);\r\n    \r\n    // DOM 변화 관찰\r\n    const observer = new MutationObserver(checkDarkMode);\r\n    observer.observe(document.documentElement, { \r\n      attributes: true, \r\n      attributeFilter: ['class'] \r\n    });\r\n    observer.observe(document.body, { \r\n      attributes: true, \r\n      attributeFilter: ['class'] \r\n    });\r\n    \r\n    // 컴포넌트 마운트 상태 설정\r\n    isMountedRef.current = true;\r\n    \r\n    return () => {\r\n      // 컴포넌트 언마운트 시 모든 리소스 해제\r\n      isMountedRef.current = false;\r\n      observer.disconnect();\r\n      window.removeEventListener('darkmode-changed', handleDarkModeChange as EventListener);\r\n      \r\n      // 차트 인스턴스 정리\r\n      chartRefs.current.forEach(chart => {\r\n        if (chart && chart.destroy) {\r\n          chart.destroy();\r\n        }\r\n      });\r\n      \r\n      // 메모리 정리 요청\r\n      if (window.gc) {\r\n        try {\r\n          window.gc();\r\n        } catch (e) {\r\n          console.log('GC 호출 실패');\r\n        }\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // 필터링된 로그 데이터 메모이제이션 (최소 데이터만 사용)\r\n  const filteredLogs = useMemo(() => {\r\n    try {\r\n      // 데이터 검증 추가\r\n      if (!Array.isArray(logs)) {\r\n        console.warn('유효하지 않은 로그 데이터:', logs);\r\n        return [];\r\n      }\r\n      return filterLogsForChart(logs);\r\n    } catch (error) {\r\n      console.error('로그 필터링 중 오류:', error);\r\n      return [];\r\n    }\r\n  }, [logs]);\r\n\r\n  // 차트 옵션 - 다크 모드에 따라 변경되는 옵션들\r\n  const getChartOptions = useCallback((title: string) => {\r\n    return {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      // 메모리 사용량 감소를 위한 설정 추가\r\n      animation: {\r\n        duration: 0 // 애니메이션 비활성화\r\n      },\r\n      // 데이터 포인트 수 제한\r\n      elements: {\r\n        point: {\r\n          radius: 2, // 더 작은 포인트 크기\r\n          hoverRadius: 4,\r\n        },\r\n        line: {\r\n          tension: 0, // 직선으로 연결 (곡선 없음)\r\n        }\r\n      },\r\n      // 렌더링 성능 개선\r\n      devicePixelRatio: 1,\r\n      plugins: {\r\n        legend: { \r\n          position: 'top' as const,\r\n          labels: {\r\n            color: isDarkMode ? '#E0E0E0' : '#333',\r\n            // 폰트 크기 축소\r\n            font: {\r\n              size: 11,\r\n            }\r\n          }\r\n        },\r\n        title: { \r\n          display: true, \r\n          text: title,\r\n          color: isDarkMode ? '#E0E0E0' : '#333',\r\n          // 수정: 'normal'을 리터럴로 변경\r\n          font: {\r\n            size: 12,\r\n            weight: 'normal' as const, // 타입 문제 해결\r\n          }\r\n        },\r\n        tooltip: {\r\n          enabled: true, // 필요한 경우에만 활성화\r\n          backgroundColor: isDarkMode ? 'rgba(30, 30, 30, 0.8)' : 'rgba(255, 255, 255, 0.8)',\r\n          titleColor: isDarkMode ? '#E0E0E0' : '#333',\r\n          bodyColor: isDarkMode ? '#B0B0B0' : '#666',\r\n          borderColor: isDarkMode ? '#303030' : '#ddd',\r\n          borderWidth: 1,\r\n          // 툴팁 콜백 간소화\r\n          callbacks: {\r\n            label: function(context: any) {\r\n              return context.raw;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      scales: {\r\n        x: {\r\n          ticks: { \r\n            color: isDarkMode ? '#B0B0B0' : '#666',\r\n            // 표시할 틱 수 제한\r\n            maxTicksLimit: 7,\r\n            font: {\r\n              size: 10,\r\n            }\r\n          },\r\n          grid: { \r\n            color: isDarkMode ? 'rgba(60, 60, 60, 0.3)' : 'rgba(0, 0, 0, 0.1)',\r\n            // 그리드 간소화\r\n            display: false\r\n          }\r\n        },\r\n        y: {\r\n          ticks: { \r\n            color: isDarkMode ? '#B0B0B0' : '#666',\r\n            font: {\r\n              size: 10,\r\n            }\r\n          },\r\n          grid: { \r\n            color: isDarkMode ? 'rgba(60, 60, 60, 0.3)' : 'rgba(0, 0, 0, 0.1)',\r\n            // 그리드 선 수 제한\r\n            tickLength: 5\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }, [isDarkMode]);\r\n\r\n  // 날짜별 통계 데이터 가공 - 메모이제이션\r\n  const chartData = useMemo(() => {\r\n    try {\r\n      // 데이터가 없으면 기본값 반환\r\n      if (!Array.isArray(filteredLogs) || filteredLogs.length === 0) {\r\n        return {\r\n          labels: [],\r\n          keyCountData: [],\r\n          timeData: [],\r\n          speedData: [],\r\n          wordData: [],\r\n          charData: []\r\n        };\r\n      }\r\n      \r\n      const dataMap = new Map();\r\n\r\n      // 데이터 검증 추가\r\n      for (let i = 0; i < filteredLogs.length; i++) {\r\n        const log = filteredLogs[i];\r\n        if (!log || typeof log !== 'object') continue;\r\n        \r\n        // timestamp가 없거나 유효하지 않은 경우 건너뛰기\r\n        if (!log.timestamp || !Date.parse(log.timestamp)) continue;\r\n        \r\n        const date = new Date(log.timestamp).toLocaleDateString();\r\n        \r\n        if (!dataMap.has(date)) {\r\n          dataMap.set(date, {\r\n            totalKeyCount: 0,\r\n            totalTime: 0,\r\n            totalChars: 0,\r\n            totalWords: 0,\r\n          });\r\n        }\r\n\r\n        const data = dataMap.get(date);\r\n        data.totalKeyCount += log.key_count || 0;\r\n        data.totalTime += log.typing_time || 0;\r\n        \r\n        // 콘텐츠 길이 기반 계산 (간소화)\r\n        const contentLength = log.content?.length || 0;\r\n        data.totalChars += contentLength;\r\n        data.totalWords += Math.ceil(contentLength / 5);\r\n      }\r\n\r\n      // 배열로 변환 (Object.entries 사용)\r\n      const sortedDates = Array.from(dataMap.keys()).sort((a, b) => \r\n        new Date(a).getTime() - new Date(b).getTime()\r\n      );\r\n      \r\n      return {\r\n        // 날짜 레이블 간략화 (월/일만 표시)\r\n        labels: sortedDates.map(date => {\r\n          const parts = date.split('/');\r\n          return parts.length >= 2 ? `${parts[0]}/${parts[1]}` : date;\r\n        }),\r\n        keyCountData: sortedDates.map(date => dataMap.get(date).totalKeyCount),\r\n        // 분 단위로 변환하고 정수로 반올림\r\n        timeData: sortedDates.map(date => Math.round(dataMap.get(date).totalTime / 60)),\r\n        // 속도 계산도 간소화\r\n        speedData: sortedDates.map(date => {\r\n          const d = dataMap.get(date);\r\n          return d.totalTime > 0 ? Math.round((d.totalKeyCount / d.totalTime) * 60) : 0;\r\n        }),\r\n        wordData: sortedDates.map(date => dataMap.get(date).totalWords),\r\n        charData: sortedDates.map(date => dataMap.get(date).totalChars),\r\n      };\r\n    } catch (error) {\r\n      console.error('차트 데이터 생성 중 오류:', error);\r\n      // 오류 발생 시 빈 데이터 반환\r\n      return {\r\n        labels: [],\r\n        keyCountData: [],\r\n        timeData: [],\r\n        speedData: [],\r\n        wordData: [],\r\n        charData: []\r\n      };\r\n    }\r\n  }, [filteredLogs]);\r\n\r\n  // 차트 데이터 생성 함수 - 메모리 사용 최적화\r\n  const createChartData = useCallback((\r\n    labels: string[], \r\n    data: number[], \r\n    label: string, \r\n    color: string, \r\n    bgColor: string\r\n  ) => {\r\n    return {\r\n      labels,\r\n      datasets: [\r\n        {\r\n          label,\r\n          data,\r\n          borderColor: color,\r\n          backgroundColor: bgColor,\r\n          // 불필요한 옵션 제거\r\n          pointBackgroundColor: color,\r\n          borderWidth: 1,\r\n          fill: false,\r\n        },\r\n      ],\r\n    };\r\n  }, []);\r\n\r\n  // 메모이제이션된 차트 데이터 (함수로 생성)\r\n  const speedChartData = useMemo(() => \r\n    createChartData(\r\n      chartData.labels,\r\n      chartData.speedData,\r\n      '평균 타이핑 속도 (타/분)',\r\n      isDarkMode ? 'rgb(3, 218, 198)' : 'rgb(75, 192, 192)',\r\n      isDarkMode ? 'rgba(3, 218, 198, 0.5)' : 'rgba(75, 192, 192, 0.5)'\r\n    ),\r\n  [chartData.labels, chartData.speedData, isDarkMode, createChartData]);\r\n\r\n  // 더 효율적인 렌더링을 위한 지연 로딩 상태\r\n  const [shouldRenderCharts, setShouldRenderCharts] = useState(false);\r\n\r\n  // 지연 로딩 설정\r\n  useEffect(() => {\r\n    if (!shouldRenderCharts && filteredLogs.length > 0) {\r\n      // 약간의 지연 후 차트 렌더링 시작\r\n      const timer = setTimeout(() => {\r\n        if (isMountedRef.current) {\r\n          setShouldRenderCharts(true);\r\n        }\r\n      }, 100);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [filteredLogs.length, shouldRenderCharts]);\r\n\r\n  // 차트 참조 설정 콜백\r\n  const setChartRef = useCallback((instance: any) => {\r\n    if (instance) {\r\n      chartRefs.current.push(instance);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.chartContainer}>\r\n      <h2>타이핑 통계 차트</h2>\r\n      \r\n      {filteredLogs.length > 0 ? (\r\n        <div className={styles.charts}>\r\n          {/* 차트 렌더링에 지연 로딩 및 조건부 렌더링 적용 */}\r\n          {shouldRenderCharts && chartData.labels.length > 0 && (\r\n            <div className={styles.chartItem}>\r\n              <h3>일별 평균 타이핑 속도</h3>\r\n              <div className={styles.chartWrapper}>\r\n                <Line \r\n                  data={speedChartData} \r\n                  options={getChartOptions('일별 평균 속도 (타/분)')}\r\n                  redraw={false}\r\n                  ref={setChartRef}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* 다른 차트들은 사용자가 탭을 전환할 때만 렌더링하도록 지연 로딩 처리 */}\r\n          {shouldRenderCharts && (\r\n            <>\r\n              <div className={styles.chartItem}>\r\n                <h3>일별 총 타자 수</h3>\r\n                <div className={styles.chartWrapper}>\r\n                  <Bar \r\n                    data={{\r\n                      labels: chartData.labels,\r\n                      datasets: [{\r\n                        label: '총 타자 수',\r\n                        data: chartData.keyCountData,\r\n                        backgroundColor: isDarkMode ? 'rgba(30, 136, 229, 0.7)' : 'rgba(54, 162, 235, 0.5)',\r\n                      }]\r\n                    }}\r\n                    options={getChartOptions('일별 총 타자 수')}\r\n                    redraw={false}\r\n                    ref={setChartRef}\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className={styles.chartItem}>\r\n                <h3>일별 총 타이핑 시간</h3>\r\n                <div className={styles.chartWrapper}>\r\n                  <Bar \r\n                    data={{\r\n                      labels: chartData.labels,\r\n                      datasets: [{\r\n                        label: '총 타이핑 시간 (분)',\r\n                        data: chartData.timeData,\r\n                        backgroundColor: isDarkMode ? 'rgba(207, 102, 121, 0.7)' : 'rgba(255, 99, 132, 0.5)',\r\n                      }]\r\n                    }}\r\n                    options={getChartOptions('일별 총 타이핑 시간 (분)')}\r\n                    redraw={false}\r\n                    ref={setChartRef}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <p className={styles.noData}>저장된 타이핑 데이터가 없습니다.</p>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n","'use client';\r\n\r\nimport React, { memo } from 'react';\r\nimport styles from '../page.module.css';\r\n\r\ninterface TabNavigationProps {\r\n  activeTab: string;\r\n  onTabChange: (tab: string) => void;\r\n  onDebugToggle: () => void;\r\n  debugMode: boolean;\r\n}\r\n\r\nexport const TabNavigation = memo(function TabNavigation({\r\n  activeTab,\r\n  onTabChange,\r\n  onDebugToggle,\r\n  debugMode\r\n}: TabNavigationProps) {\r\n  return (\r\n    <div className={styles.appTabs} style={{ pointerEvents: 'auto' }}>\r\n      <button \r\n        className={`${styles.tabButton} ${activeTab === 'monitor' ? styles.activeTab : ''}`}\r\n        onClick={() => onTabChange('monitor')}\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        모니터링\r\n      </button>\r\n      \r\n      <button \r\n        className={`${styles.tabButton} ${activeTab === 'history' ? styles.activeTab : ''}`}\r\n        onClick={() => onTabChange('history')}\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        히스토리\r\n      </button>\r\n      \r\n      <button \r\n        className={`${styles.tabButton} ${activeTab === 'stats' ? styles.activeTab : ''}`}\r\n        onClick={() => onTabChange('stats')}\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        통계\r\n      </button>\r\n      \r\n      <button \r\n        className={`${styles.tabButton} ${activeTab === 'chart' ? styles.activeTab : ''}`}\r\n        onClick={() => onTabChange('chart')}\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        차트\r\n      </button>\r\n      \r\n      <button \r\n        className={`${styles.tabButton} ${activeTab === 'settings' ? styles.activeTab : ''}`}\r\n        onClick={() => onTabChange('settings')}\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        설정\r\n      </button>\r\n      \r\n      {/* 디버그 모드 토글 버튼 */}\r\n      <button \r\n        className={`${styles.tabButton} ${styles.debugButton} ${debugMode ? styles.debugActive : ''}`}\r\n        onClick={onDebugToggle}\r\n        title=\"디버그 모드 토글\"\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        🐞\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default TabNavigation;\r\n","'use client';\r\n\r\nimport React, { createContext, useState, useContext, ReactNode, useEffect } from 'react';\r\n\r\n// 테마 컨텍스트 정의\r\ninterface ThemeContextType {\r\n  theme: 'light' | 'dark';\r\n  toggleTheme: () => void;\r\n  setDarkMode: (enabled: boolean) => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType>({\r\n  theme: 'light',\r\n  toggleTheme: () => {},\r\n  setDarkMode: () => {},\r\n});\r\n\r\n// useTheme 훅 생성\r\nexport const useTheme = () => useContext(ThemeContext);\r\n\r\ninterface ThemeProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport function ThemeProvider({ children }: ThemeProviderProps) {\r\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\r\n  \r\n  // 다크 모드 설정 함수\r\n  const setDarkMode = (enabled: boolean) => {\r\n    setTheme(enabled ? 'dark' : 'light');\r\n    \r\n    // HTML 태그에 dark-mode 클래스 적용\r\n    if (enabled) {\r\n      document.documentElement.classList.add('dark-mode');\r\n    } else {\r\n      document.documentElement.classList.remove('dark-mode');\r\n    }\r\n    \r\n    // 로컬 스토리지에 설정 저장\r\n    try {\r\n      const savedSettings = localStorage.getItem('app-settings');\r\n      const settings = savedSettings ? JSON.parse(savedSettings) : {};\r\n      settings.darkMode = enabled;\r\n      localStorage.setItem('app-settings', JSON.stringify(settings));\r\n    } catch (e) {\r\n      console.error('설정 저장 오류:', e);\r\n    }\r\n    \r\n    // Electron API가 있으면 설정 저장\r\n    if (window.electronAPI) {\r\n      window.electronAPI.setDarkMode(enabled);\r\n    }\r\n  };\r\n  \r\n  // 테마 토글 함수\r\n  const toggleTheme = () => {\r\n    const newTheme = theme === 'light' ? 'dark' : 'light';\r\n    setDarkMode(newTheme === 'dark');\r\n  };\r\n  \r\n  useEffect(() => {\r\n    // 로컬 스토리지에서 다크 모드 설정 불러오기\r\n    try {\r\n      const savedSettings = localStorage.getItem('app-settings');\r\n      if (savedSettings) {\r\n        const settings = JSON.parse(savedSettings);\r\n        setDarkMode(settings.darkMode || false);\r\n      } else {\r\n        // 시스템 다크 모드 감지\r\n        const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n        setDarkMode(prefersDarkMode);\r\n      }\r\n    } catch (e) {\r\n      console.error('설정 파싱 오류:', e);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, toggleTheme, setDarkMode }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}","'use client';\r\n\r\nimport React from 'react';\r\nimport styles from './WindowControls.module.css';\r\n\r\ninterface WindowControlsProps {\r\n  api: any; // api prop 타입 정의 추가\r\n}\r\n\r\nexport function WindowControls({ api }: WindowControlsProps) {\r\n  const handleMinimize = () => {\r\n    if (api && typeof api.windowControl === 'function') {\r\n      api.windowControl('minimize');\r\n    }\r\n  };\r\n\r\n  const handleMaximize = () => {\r\n    if (api && typeof api.windowControl === 'function') {\r\n      api.windowControl('maximize');\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (api && typeof api.windowControl === 'function') {\r\n      api.windowControl('close');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.windowControls}>\r\n      <button \r\n        className={`${styles.windowButton} ${styles.minimizeButton}`} \r\n        onClick={handleMinimize}\r\n        aria-label=\"최소화\"\r\n      >\r\n        <div className={styles.buttonContent}>\r\n          <MinimizeIcon />\r\n        </div>\r\n      </button>\r\n      <button \r\n        className={`${styles.windowButton} ${styles.maximizeButton}`} \r\n        onClick={handleMaximize}\r\n        aria-label=\"최대화\"\r\n      >\r\n        <div className={styles.buttonContent}>\r\n          <MaximizeIcon />\r\n        </div>\r\n      </button>\r\n      <button \r\n        className={`${styles.windowButton} ${styles.closeButton}`} \r\n        onClick={handleClose}\r\n        aria-label=\"닫기\"\r\n      >\r\n        <div className={styles.buttonContent}>\r\n          <CloseIcon />\r\n        </div>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n// 아이콘 컴포넌트들\r\nfunction MinimizeIcon() {\r\n  return <span className={styles.minimizeIcon}>&#8211;</span>;\r\n}\r\n\r\nfunction MaximizeIcon() {\r\n  return <span className={styles.maximizeIcon}>&#x25A1;</span>;\r\n}\r\n\r\nfunction CloseIcon() {\r\n  return <span className={styles.closeIcon}>&#x2715;</span>;\r\n}\r\n","'use client';\r\n\r\nimport { memo, useState, useEffect, useRef } from 'react';\r\nimport { useTheme } from './ThemeProvider';\r\nimport { WindowControls } from './WindowControls';\r\nimport styles from './AppHeader.module.css';\r\nimport Image from 'next/image';\r\n\r\ninterface AppHeaderProps {\r\n  api: any;\r\n  isVisible?: boolean;\r\n  onVisibilityChange?: (visible: boolean) => void;\r\n  autoHide?: boolean;\r\n}\r\n\r\nexport const AppHeader = memo(function AppHeader({\r\n  api,\r\n  isVisible = true,\r\n  onVisibilityChange,\r\n  autoHide = false\r\n}: AppHeaderProps) {\r\n  const { theme } = useTheme();\r\n  const [visibility, setVisibility] = useState(isVisible);\r\n  const lastMouseY = useRef(0);\r\n  const headerRef = useRef<HTMLDivElement>(null);\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const mouseInsideHeader = useRef(false);\r\n\r\n  useEffect(() => {\r\n    setVisibility(isVisible);\r\n  }, [isVisible]);\r\n\r\n  useEffect(() => {\r\n    if (!autoHide) return;\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const currentY = e.clientY;\r\n      if (currentY < 20 && !visibility) {\r\n        setVisibility(true);\r\n        onVisibilityChange && onVisibilityChange(true);\r\n      } else if (currentY > 80 && !mouseInsideHeader.current && visibility) {\r\n        if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n        timeoutRef.current = setTimeout(() => {\r\n          setVisibility(false);\r\n          onVisibilityChange && onVisibilityChange(false);\r\n          timeoutRef.current = null;\r\n        }, 1000);\r\n      }\r\n      lastMouseY.current = currentY;\r\n    };\r\n\r\n    const handleHeaderMouseEnter = () => {\r\n      mouseInsideHeader.current = true;\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n        timeoutRef.current = null;\r\n      }\r\n    };\r\n    const handleHeaderMouseLeave = () => {\r\n      mouseInsideHeader.current = false;\r\n    };\r\n\r\n    document.addEventListener('mousemove', handleMouseMove);\r\n    const headerElement = headerRef.current;\r\n    if (headerElement) {\r\n      headerElement.addEventListener('mouseenter', handleHeaderMouseEnter);\r\n      headerElement.addEventListener('mouseleave', handleHeaderMouseLeave);\r\n    }\r\n    return () => {\r\n      document.removeEventListener('mousemove', handleMouseMove);\r\n      if (headerElement) {\r\n        headerElement.removeEventListener('mouseenter', handleHeaderMouseEnter);\r\n        headerElement.removeEventListener('mouseleave', handleHeaderMouseLeave);\r\n      }\r\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\r\n    };\r\n  }, [autoHide, visibility, onVisibilityChange]);\r\n\r\n  useEffect(() => {\r\n    if (!autoHide) return;\r\n    const handleClick = () => {\r\n      if (!visibility) {\r\n        setVisibility(true);\r\n        onVisibilityChange && onVisibilityChange(true);\r\n      }\r\n    };\r\n    document.addEventListener('click', handleClick);\r\n    return () => {\r\n      document.removeEventListener('click', handleClick);\r\n    };\r\n  }, [autoHide, visibility, onVisibilityChange]);\r\n\r\n  return (\r\n    <div\r\n      ref={headerRef}\r\n      className={`${styles.header} ${!visibility ? styles.hidden : ''} ${theme === 'dark' ? styles.darkMode : ''}`}\r\n      aria-hidden={!visibility}\r\n    >\r\n      <div className={styles.titleBar}>\r\n        <div className={styles.appIcon}>\r\n          <Image\r\n            src=\"/app_icon.webp\"\r\n            alt=\"App Icon\"\r\n            width={24}\r\n            height={24}\r\n            onError={(e) => {\r\n              (e.target as HTMLImageElement).style.display = 'none';\r\n            }}\r\n          />\r\n        </div>\r\n        <div className={styles.appTitle}>Loop</div>\r\n        <WindowControls api={api} />\r\n      </div>\r\n    </div>\r\n  );\r\n});","import React from 'react';\r\n\r\nexport function AppFooter() {\r\n  const year = new Date().getFullYear();\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <div className=\"copyright\">\r\n        © {year} loop. All rights reserved.\r\n      </div>\r\n    </footer>\r\n  );\r\n}","'use client';\r\n\r\nimport React, { memo, useRef, ReactNode } from 'react';\r\nimport { AppHeader } from './AppHeader';\r\nimport { AppFooter } from './AppFooter';\r\nimport styles from '../page.module.css';\r\n\r\n// Define the ElectronAPI interface\r\ninterface ElectronAPI {\r\n  // Add properties that your electron API needs\r\n  // For example: minimize: () => void;\r\n}\r\n\r\ninterface MainLayoutProps {\r\n  children: ReactNode;\r\n  darkMode?: boolean;\r\n  windowMode?: string;\r\n  electronAPI?: ElectronAPI | null;\r\n  isHeaderVisible?: boolean;\r\n}\r\n\r\nexport const MainLayout = memo(function MainLayout({\r\n  children,\r\n  darkMode = false,\r\n  windowMode = 'normal',\r\n  electronAPI = null,\r\n  isHeaderVisible = true\r\n}: MainLayoutProps) {\r\n  const headerDetectionRef = useRef<HTMLDivElement>(null);\r\n\r\n  return (\r\n    <div\r\n      className={`${styles.container} ${darkMode ? 'dark-mode' : ''} ${windowMode === 'fullscreen-auto-hide' ? styles.zenMode : ''}`}\r\n      style={{ position: 'relative', zIndex: 1 }}\r\n    >\r\n      {/* AppHeader 컴포넌트 추가 */}\r\n      {isHeaderVisible && <AppHeader api={electronAPI} />}\r\n\r\n      {/* 네비게이션 링크 추가 */}\r\n      {isHeaderVisible && (\r\n        <nav className={styles.navLinks}>\r\n          <ul>\r\n            <li>\r\n              <a href=\"/\" className={styles.navLink}>홈</a>\r\n            </li>\r\n            <li>\r\n              <a href=\"/pages/analysis\" className={styles.navLink}>로그 분석</a>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      )}\r\n\r\n      {/* 자동 숨김 모드일 때 감지 영역 추가 */}\r\n      {windowMode === 'fullscreen-auto-hide' && (\r\n        <div\r\n          ref={headerDetectionRef}\r\n          className={styles.headerDetectionArea}\r\n          aria-hidden=\"true\"\r\n          style={{ pointerEvents: 'auto' }}\r\n        />\r\n      )}\r\n\r\n      <main className={styles.mainContent}>\r\n        {children}\r\n      </main>\r\n\r\n      <AppFooter />\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default MainLayout;\r\n","import React, { memo } from 'react';\r\nimport styles from '../page.module.css';\r\n\r\ninterface DebugPanelProps {\r\n  isVisible: boolean;\r\n  stats: {\r\n    keyCount: number;\r\n    windowTitle: string;\r\n    browserName: string;\r\n  };\r\n  logsCount: number;\r\n  isTracking: boolean;\r\n  windowMode: string;\r\n}\r\n\r\nexport const DebugPanel = memo(function DebugPanel({\r\n  isVisible,\r\n  stats,\r\n  logsCount,\r\n  isTracking,\r\n  windowMode\r\n}: DebugPanelProps) {\r\n  if (!isVisible) return null;\r\n  \r\n  return (\r\n    <div className={styles.debugPanelBottom}>\r\n      <h3>디버그 정보</h3>\r\n      <div className={styles.debugInfo}>\r\n        <div><strong>isTracking:</strong> {isTracking ? 'true' : 'false'}</div>\r\n        <div><strong>Logs:</strong> {logsCount}개</div>\r\n        <div><strong>Current keyCount:</strong> {stats.keyCount}</div>\r\n        <div><strong>Browser:</strong> {stats.browserName || 'N/A'}</div>\r\n        <div><strong>Window:</strong> {stats.windowTitle || 'N/A'}</div>\r\n        <div><strong>Window Mode:</strong> {windowMode}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default DebugPanel;\r\n","'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport styles from './ConfirmDialog.module.css';\r\n\r\ninterface ConfirmDialogProps {\r\n  title: string;\r\n  message: string;\r\n  isOpen: boolean;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  type?: 'info' | 'warning' | 'error' | 'success';\r\n  isDarkMode?: boolean;\r\n}\r\n\r\nexport const ConfirmDialog: React.FC<ConfirmDialogProps> = ({\r\n  title,\r\n  message,\r\n  isOpen,\r\n  onConfirm,\r\n  onCancel,\r\n  confirmText = '확인',\r\n  cancelText = '취소',\r\n  type = 'info',\r\n  isDarkMode = false\r\n}) => {\r\n  // ESC 키 누를 때 닫기\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        onCancel();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [isOpen, onCancel]);\r\n  \r\n  // Enter 키로 확인 처리\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === 'Enter' && isOpen) {\r\n        onConfirm();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [isOpen, onConfirm]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className={`${styles.overlay} ${isDarkMode ? styles.darkMode : ''}`}>\r\n      <div className={styles.dialog}>\r\n        <div className={`${styles.header} ${styles[type]}`}>\r\n          <h2>{title}</h2>\r\n          <button \r\n            className={styles.closeButton} \r\n            onClick={onCancel}\r\n            aria-label=\"닫기\"\r\n          >\r\n            ×\r\n          </button>\r\n        </div>\r\n        <div className={styles.content}>\r\n          <p className={styles.message}>{message}</p>\r\n        </div>\r\n        <div className={styles.actions}>\r\n          <button\r\n            className={`${styles.button} ${styles.cancelButton}`}\r\n            onClick={onCancel}\r\n          >\r\n            {cancelText}\r\n          </button>\r\n          <button\r\n            className={`${styles.button} ${styles.confirmButton} ${styles[type + 'Button']}`}\r\n            onClick={onConfirm}\r\n            autoFocus\r\n          >\r\n            {confirmText}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\ninterface SaveConfirmDialogProps {\r\n  isOpen: boolean;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n  settingsType?: string;\r\n  isDarkMode?: boolean;\r\n}\r\n\r\n/**\r\n * 설정 저장 확인 대화상자\r\n */\r\nconst SaveConfirmDialog: React.FC<SaveConfirmDialogProps> = ({\r\n  isOpen,\r\n  onConfirm,\r\n  onCancel,\r\n  settingsType = '설정',\r\n  isDarkMode = false\r\n}) => {\r\n  const title = `${settingsType} 저장`;\r\n  const message = `변경된 ${settingsType}을(를) 저장하시겠습니까?`;\r\n\r\n  return (\r\n    <ConfirmDialog\r\n      title={title}\r\n      message={message}\r\n      isOpen={isOpen}\r\n      onConfirm={onConfirm}\r\n      onCancel={onCancel}\r\n      confirmText=\"저장\"\r\n      cancelText=\"취소\"\r\n      type=\"info\"\r\n      isDarkMode={isDarkMode}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SaveConfirmDialog;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport styles from './Settings.module.css';\r\nimport { useToast } from './ToastContext';\r\nimport SaveConfirmDialog from './dialogs/SaveConfirmDialog';\r\n\r\ninterface EnabledCategories {\r\n  docs: boolean;\r\n  office: boolean;\r\n  coding: boolean;\r\n  sns: boolean;\r\n}\r\n\r\ntype WindowModeType = 'windowed' | 'fullscreen' | 'fullscreen-auto-hide';\r\n\r\nexport interface SettingsState {\r\n  enabledCategories: EnabledCategories;\r\n  autoStartMonitoring: boolean;\r\n  darkMode: boolean;\r\n  windowMode: WindowModeType;\r\n  // 트레이 관련 설정 추가\r\n  minimizeToTray: boolean;\r\n  showTrayNotifications: boolean;\r\n  reduceMemoryInBackground: boolean;\r\n  // 미니뷰 설정 추가\r\n  enableMiniView: boolean;\r\n  // GPU 가속 관련 설정 추가\r\n  useHardwareAcceleration: boolean;\r\n  processingMode: 'auto' | 'normal' | 'cpu-intensive' | 'gpu-intensive';\r\n  maxMemoryThreshold: number;\r\n  // 유휴 상태 관련 설정 추가\r\n  resumeAfterIdle: boolean;\r\n}\r\n\r\ninterface SettingsProps {\r\n  onSave: (settings: SettingsState) => void;\r\n  initialSettings: SettingsState;\r\n  darkMode: boolean;\r\n  onDarkModeChange: (enabled: boolean) => void;\r\n  onWindowModeChange: (mode: WindowModeType) => void;\r\n}\r\n\r\nexport function Settings({ \r\n  onSave, \r\n  initialSettings, \r\n  darkMode, \r\n  onDarkModeChange, \r\n  onWindowModeChange \r\n}: SettingsProps) {\r\n  const [settings, setSettings] = useState<SettingsState>({\r\n    enabledCategories: {\r\n      docs: true,\r\n      office: true,\r\n      coding: true,\r\n      sns: true\r\n    },\r\n    autoStartMonitoring: true,\r\n    darkMode: false,\r\n    windowMode: 'windowed',\r\n    minimizeToTray: true,\r\n    showTrayNotifications: true,\r\n    reduceMemoryInBackground: true,\r\n    enableMiniView: true, // 미니뷰 기본값 true\r\n    // 수정: 타입 오류 해결을 위해 옵셔널 체이닝과 nullish 병합 연산자 수정\r\n    useHardwareAcceleration: initialSettings && 'useHardwareAcceleration' in initialSettings \r\n      ? initialSettings.useHardwareAcceleration \r\n      : false,\r\n    processingMode: initialSettings && 'processingMode' in initialSettings \r\n      ? initialSettings.processingMode \r\n      : 'auto',\r\n    maxMemoryThreshold: initialSettings && 'maxMemoryThreshold' in initialSettings \r\n      ? initialSettings.maxMemoryThreshold \r\n      : 100,\r\n    // resumeAfterIdle 속성 추가\r\n    resumeAfterIdle: initialSettings && 'resumeAfterIdle' in initialSettings\r\n      ? initialSettings.resumeAfterIdle\r\n      : true\r\n  });\r\n  const [needsRestart, setNeedsRestart] = useState(false);\r\n  const [showSaveConfirm, setShowSaveConfirm] = useState(false);\r\n  const { showToast } = useToast();\r\n\r\n  // 재시작 API 디버깅 상태 추가\r\n  const [apiDebugInfo, setApiDebugInfo] = useState<string>('');\r\n  const [showDebugInfo, setShowDebugInfo] = useState<boolean>(false);\r\n\r\n  // 초기 설정 변경 시 state 업데이트\r\n  useEffect(() => {\r\n    if (initialSettings) {\r\n      setSettings(initialSettings);\r\n    }\r\n  }, [initialSettings]);\r\n\r\n  // 다크 모드 처리를 위한 효과 추가\r\n  useEffect(() => {\r\n    // 다크 모드 클래스가 서버 렌더링과 클라이언트 간에 일치하도록 함\r\n    if (typeof window !== 'undefined') {\r\n      const isDarkMode = settings.darkMode;\r\n      if (isDarkMode) {\r\n        document.documentElement.classList.add('dark-mode');\r\n      } else {\r\n        document.documentElement.classList.remove('dark-mode');\r\n      }\r\n    }\r\n  }, [settings.darkMode]);\r\n\r\n  // Handler functions\r\n  const handleCategoryToggle = (category: keyof typeof settings.enabledCategories) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      enabledCategories: {\r\n        ...prev.enabledCategories,\r\n        [category]: !prev.enabledCategories[category]\r\n      }\r\n    }));\r\n  };\r\n\r\n  const handleAutoStartToggle = () => {\r\n    setSettings(prev => ({\r\n      ...prev, \r\n      autoStartMonitoring: !prev.autoStartMonitoring\r\n    }));\r\n  };\r\n\r\n  const handleDarkModeToggle = () => {\r\n    const newDarkMode = !settings.darkMode;\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      darkMode: newDarkMode\r\n    }));\r\n    onDarkModeChange(newDarkMode);\r\n  };\r\n\r\n  const handleWindowModeChange = (mode: WindowModeType) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      windowMode: mode\r\n    }));\r\n    onWindowModeChange(mode);\r\n  };\r\n\r\n  // 트레이 관련 핸들러 추가\r\n  const handleMinimizeToTrayToggle = () => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      minimizeToTray: !prev.minimizeToTray\r\n    }));\r\n  };\r\n  \r\n  const handleShowTrayNotificationsToggle = () => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      showTrayNotifications: !prev.showTrayNotifications\r\n    }));\r\n  };\r\n  \r\n  const handleReduceMemoryToggle = () => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      reduceMemoryInBackground: !prev.reduceMemoryInBackground\r\n    }));\r\n  };\r\n\r\n  // 미니뷰 토글 핸들러 추가\r\n  const handleMiniViewToggle = () => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      enableMiniView: !prev.enableMiniView\r\n    }));\r\n  };\r\n\r\n  const handleSettingChange = (key: keyof SettingsState, value: any) => {\r\n    setSettings(prev => ({\r\n      ...prev,\r\n      [key]: value\r\n    }));\r\n  };\r\n\r\n  // GPU 가속 설정 변경 감지 함수 추가\r\n  const handleHardwareAccelerationToggle = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const newValue = e.target.checked;\r\n    // 이전 값과 다른 경우에만 재시작 필요 플래그 설정\r\n    if (newValue !== initialSettings.useHardwareAcceleration) {\r\n      setNeedsRestart(true);\r\n    }\r\n    handleSettingChange('useHardwareAcceleration', newValue);\r\n  };\r\n\r\n  const handleSaveSettings = () => {\r\n    // 변경 사항이 있을 때만 저장 확인 대화상자 표시\r\n    const hasChanges = JSON.stringify(settings) !== JSON.stringify(initialSettings);\r\n    \r\n    if (hasChanges) {\r\n      setShowSaveConfirm(true);\r\n    } else {\r\n      showToast('변경된 설정이 없습니다.', 'info');\r\n    }\r\n  };\r\n  \r\n  const confirmSaveSettings = () => {\r\n    setShowSaveConfirm(false);\r\n    \r\n    // 설정 저장 실행\r\n    onSave(settings);\r\n    \r\n    if (needsRestart) {\r\n      // 재시작이 필요한 경우 특별 메시지 표시\r\n      showToast('GPU 가속 설정이 변경되었습니다. 변경 사항을 적용하려면 앱을 재시작하세요.', 'info');\r\n      \r\n      // 재시작 확인 대화상자 표시\r\n      if (window.electronAPI) {\r\n        if (typeof window.electronAPI.showRestartPrompt === 'function') {\r\n          window.electronAPI.showRestartPrompt();\r\n        } else {\r\n          // 대체 방법: 재시작 여부 확인 후 재시작 요청\r\n          if (window.confirm('GPU 가속 설정이 변경되었습니다. 지금 앱을 재시작하시겠습니까?')) {\r\n            if (typeof window.electronAPI.restartApp === 'function') {\r\n              window.electronAPI.restartApp();\r\n            } else {\r\n              console.error('restartApp 함수를 찾을 수 없습니다.');\r\n              showToast('앱을 수동으로 재시작해 주세요.', 'warning');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      showToast('설정이 저장되었습니다.', 'success');\r\n    }\r\n  };\r\n  \r\n  const cancelSaveSettings = () => {\r\n    setShowSaveConfirm(false);\r\n  };\r\n\r\n  // 재시작 버튼 클릭 핸들러 수정 - 실무적인 방식으로 개선\r\n  const handleRestartClick = useCallback(() => {\r\n    try {\r\n      // API 객체가 정의되어 있는지 먼저 확인\r\n      if (!window.electronAPI) {\r\n        showToast('Electron API를 찾을 수 없습니다. preload 스크립트가 올바르게 로드되었는지 확인하세요.', 'error');\r\n        return;\r\n      }\r\n\r\n      // API 정보 수집 (디버깅용)\r\n      const apiInfo = Object.keys(window.electronAPI)\r\n        .map(key => `${key}: ${typeof (window.electronAPI as any)[key]}`)\r\n        .join('\\n');\r\n      \r\n      console.log('사용 가능한 API 목록:', apiInfo);\r\n      setApiDebugInfo(apiInfo);\r\n      \r\n      // 앱 재시작 요청 전송 시도\r\n      if (typeof window.electronAPI.restartApp === 'function') {\r\n        window.electronAPI.restartApp();\r\n        return;\r\n      } \r\n      \r\n      // 첫 번째 방식이 실패한 경우 재시작 안내 창 사용 시도\r\n      if (typeof window.electronAPI.showRestartPrompt === 'function') {\r\n        window.electronAPI.showRestartPrompt();\r\n        return;\r\n      }\r\n      \r\n      // 두 방법 모두 실패했을 경우 일반 IPC 직접 호출 시도\r\n      if (window.electron && typeof window.electron.restartApp === 'function') {\r\n        window.electron.restartApp();\r\n        return;\r\n      }\r\n      \r\n      // 모든 방법이 실패한 경우 오류 메시지 표시\r\n      showToast('재시작 기능을 사용할 수 없습니다. 앱을 수동으로 재시작하세요.', 'warning');\r\n      setShowDebugInfo(true);\r\n      \r\n    } catch (error) {\r\n      console.error('앱 재시작 시도 중 오류:', error);\r\n      showToast(`재시작 중 오류: ${(error as Error).message}`, 'error');\r\n      setApiDebugInfo(String(error));\r\n      setShowDebugInfo(true);\r\n    }\r\n  }, [showToast]);\r\n\r\n  // API 디버그 정보 표시 함수 추가\r\n  const toggleDebugInfo = () => {\r\n    // API 정보 새로고침\r\n    if (window.electronAPI) {\r\n      const apiInfo = Object.keys(window.electronAPI)\r\n        .map(key => {\r\n          const type = typeof (window.electronAPI as any)[key];\r\n          return `${key}: ${type}`;\r\n        })\r\n        .join('\\n');\r\n        \r\n      setApiDebugInfo(apiInfo);\r\n    } else {\r\n      setApiDebugInfo('electronAPI가 정의되지 않았습니다');\r\n    }\r\n    \r\n    setShowDebugInfo(!showDebugInfo);\r\n  };\r\n\r\n  return (\r\n    <div className={`${styles.settingsContainer} ${darkMode ? styles.darkMode : ''}`}>\r\n      <h2>설정</h2>\r\n      \r\n      {/* 자동 모니터링 설정 섹션 (새로 추가) */}\r\n      <div className={`${styles.settingSection} ${styles.highlightedSetting}`}>\r\n        <h3>모니터링 자동 시작</h3>\r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.autoStartMonitoring} \r\n              onChange={handleAutoStartToggle}\r\n            />\r\n            <span className={styles.toggleLabel}>앱 시작 시 자동으로 모니터링 시작</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.resumeAfterIdle || false} \r\n              onChange={(e) => handleSettingChange('resumeAfterIdle', e.target.checked)}\r\n            />\r\n            <span className={styles.toggleLabel}>일정 시간 사용하지 않다가 돌아왔을 때 자동 재시작</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className={styles.settingDescription}>\r\n          자동 모니터링 설정을 통해 앱 시작 시 또는 일정 시간 사용하지 않다가 돌아왔을 때 \r\n          자동으로 타이핑 모니터링을 시작할 수 있습니다.\r\n        </div>\r\n      </div>\r\n      \r\n      <div className={`${styles.settingSection}`}>\r\n        <h3>일반 설정</h3>\r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.darkMode} \r\n              onChange={handleDarkModeToggle}\r\n            />\r\n            <span className={styles.toggleLabel}>다크 모드</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.settingSection}>\r\n        <h3>화면 모드</h3>\r\n        <div className={styles.radioGroup}>\r\n          <label className={styles.radioLabel}>\r\n            <input \r\n              type=\"radio\" \r\n              name=\"windowMode\" \r\n              checked={settings.windowMode === 'windowed'} \r\n              onChange={() => handleWindowModeChange('windowed')}\r\n            />\r\n            <span className={styles.radioText}>창 모드</span>\r\n          </label>\r\n          \r\n          <label className={styles.radioLabel}>\r\n            <input \r\n              type=\"radio\" \r\n              name=\"windowMode\" \r\n              checked={settings.windowMode === 'fullscreen'} \r\n              onChange={() => handleWindowModeChange('fullscreen')}\r\n            />\r\n            <span className={styles.radioText}>전체화면 모드</span>\r\n          </label>\r\n\r\n          <label className={styles.radioLabel}>\r\n            <input\r\n              type=\"radio\"\r\n              name=\"windowMode\"\r\n              value=\"fullscreen-auto-hide\"\r\n              checked={settings.windowMode === 'fullscreen-auto-hide'}\r\n              onChange={() => handleWindowModeChange('fullscreen-auto-hide')}\r\n            />\r\n            <span className={styles.radioText}>자동 숨김 모드</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <p className={styles.settingDescription}>\r\n          자동 숨김 모드에서는 마우스를 화면 상단에 가져가면 도구모음이 자동으로 표시됩니다.\r\n        </p>\r\n      </div>\r\n      \r\n      <div className={styles.settingSection}>\r\n        <h3>모니터링 대상 카테고리</h3>\r\n        <div className={styles.categoryToggles}>\r\n          <div className={styles.toggleItem}>\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.enabledCategories.docs} \r\n                onChange={() => handleCategoryToggle('docs')}\r\n              />\r\n              <span className={styles.toggleLabel}>문서 작업 (Notion, Google Docs 등)</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className={styles.toggleItem}>\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.enabledCategories.office} \r\n                onChange={() => handleCategoryToggle('office')}\r\n              />\r\n              <span className={styles.toggleLabel}>오피스 웹앱 (Microsoft Office, 한컴오피스 등)</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className={styles.toggleItem}>\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.enabledCategories.coding} \r\n                onChange={() => handleCategoryToggle('coding')}\r\n              />\r\n              <span className={styles.toggleLabel}>코딩 관련 (GitHub, GitLab 등)</span>\r\n            </label>\r\n          </div>\r\n\r\n          <div className={styles.toggleItem}>\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                checked={settings.enabledCategories.sns} \r\n                onChange={() => handleCategoryToggle('sns')}\r\n              />\r\n              <span className={styles.toggleLabel}>SNS/메신저 (Discord, Slack 등)</span>\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 시스템 트레이 설정 섹션 */}\r\n      <div className={styles.settingSection}>\r\n        <h3>시스템 트레이 설정</h3>\r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.minimizeToTray} \r\n              onChange={handleMinimizeToTrayToggle}\r\n            />\r\n            <span className={styles.toggleLabel}>창 닫기 시 트레이로 최소화 (백그라운드 실행)</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.showTrayNotifications} \r\n              onChange={handleShowTrayNotificationsToggle}\r\n              disabled={!settings.minimizeToTray}\r\n            />\r\n            <span className={styles.toggleLabel}>\r\n              트레이 알림 표시\r\n              {!settings.minimizeToTray && (\r\n                <small className={styles.disabledNote}> (트레이로 최소화 옵션이 활성화되어야 함)</small>\r\n              )}\r\n            </span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.reduceMemoryInBackground} \r\n              onChange={handleReduceMemoryToggle}\r\n              disabled={!settings.minimizeToTray}\r\n            />\r\n            <span className={styles.toggleLabel}>\r\n              백그라운드에서 메모리 사용 최적화\r\n              {!settings.minimizeToTray && (\r\n                <small className={styles.disabledNote}> (트레이로 최소화 옵션이 활성화되어야 함)</small>\r\n              )}\r\n            </span>\r\n          </label>\r\n        </div>\r\n        \r\n        {/* 미니뷰 설정 추가 */}\r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.enableMiniView} \r\n              onChange={handleMiniViewToggle}\r\n              disabled={!settings.minimizeToTray}\r\n            />\r\n            <span className={styles.toggleLabel}>\r\n              트레이 아이콘 클릭 시 미니뷰(PiP) 표시\r\n              {!settings.minimizeToTray && (\r\n                <small className={styles.disabledNote}> (트레이로 최소화 옵션이 활성화되어야 함)</small>\r\n              )}\r\n            </span>\r\n          </label>\r\n        </div>\r\n        \r\n        <p className={styles.settingDescription}>\r\n          트레이로 최소화 기능을 사용하면 창을 닫아도 앱이 백그라운드에서 계속 실행되어 타이핑을 모니터링합니다.\r\n          메모리 사용 최적화 옵션은 백그라운드 실행 시 RAM 사용량을 줄여줍니다.\r\n        </p>\r\n        \r\n        <p className={styles.settingDescription}>\r\n          미니뷰를 활성화하면 트레이 아이콘을 클릭할 때 화면 상단에 작은 통계 창이 표시됩니다.\r\n          이를 통해 앱을 최소화한 상태에서도 중요한 타이핑 통계를 확인할 수 있습니다.\r\n        </p>\r\n      </div>\r\n\r\n      {/* 성능 섹션 */}\r\n      <div className={styles.settingSection}>\r\n        <h3>성능 설정</h3>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              checked={settings.useHardwareAcceleration} \r\n              onChange={handleHardwareAccelerationToggle}\r\n            />\r\n            <span className={styles.toggleLabel}>\r\n              GPU 하드웨어 가속 사용 (재시작 필요)\r\n            </span>\r\n          </label>\r\n          <p className={styles.settingDescription}>\r\n            GPU 하드웨어 가속을 활성화하면 그래픽 렌더링과 일부 계산이 더 빨라질 수 있지만,\r\n            일부 시스템에서는 불안정할 수 있습니다. 변경 후 앱 재시작이 필요합니다.\r\n          </p>\r\n          {needsRestart && (\r\n            <div className={styles.restartNotice}>\r\n              <p>GPU 가속 설정이 변경되었습니다. 변경 사항을 적용하려면 앱을 재시작해야 합니다.</p>\r\n              <div className={styles.buttonGroup}>\r\n                <button \r\n                  className={styles.restartButton}\r\n                  onClick={handleRestartClick}\r\n                >\r\n                  지금 재시작\r\n                </button>\r\n                <button \r\n                  className={styles.debugButton}\r\n                  onClick={toggleDebugInfo}\r\n                >\r\n                  API 디버그 정보\r\n                </button>\r\n              </div>\r\n              \r\n              {/* 디버그 정보 표시 영역 */}\r\n              {showDebugInfo && (\r\n                <div className={styles.debugInfo}>\r\n                  <h4>API 디버그 정보</h4>\r\n                  <pre>{apiDebugInfo || '정보 없음'}</pre>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label className={styles.selectLabel}>처리 모드:</label>\r\n          <select \r\n            className={styles.selectControl}\r\n            value={settings.processingMode || 'auto'} \r\n            onChange={(e) => handleSettingChange('processingMode', e.target.value)}\r\n          >\r\n            <option value=\"auto\">자동 (리소스에 따라 결정)</option>\r\n            <option value=\"normal\">일반 모드</option>\r\n            <option value=\"cpu-intensive\">CPU 집약적 모드 (메모리 최적화)</option>\r\n            <option value=\"gpu-intensive\">GPU 가속 모드 (실험적)</option>\r\n          </select>\r\n        </div>\r\n        <p className={styles.settingDescription}>\r\n          처리 모드에 따라 타이핑 통계 계산 방식이 달라집니다. 자동 모드는 시스템 리소스에 따라\r\n          최적의 모드를 선택합니다. CPU 집약적 모드는 메모리 사용을 줄이고, GPU 가속 모드는\r\n          GPU를 활용하여 계산 속도를 높입니다.\r\n        </p>\r\n        \r\n        <div className={styles.toggleItem}>\r\n          <label className={styles.selectLabel}>메모리 임계치 (MB):</label>\r\n          <input \r\n            type=\"number\" \r\n            className={styles.numberInput}\r\n            value={settings.maxMemoryThreshold || 100} \r\n            onChange={(e) => handleSettingChange('maxMemoryThreshold', parseInt(e.target.value))}\r\n            min={50}\r\n            max={500}\r\n          />\r\n        </div>\r\n        <p className={styles.settingDescription}>\r\n          메모리 사용량이 이 임계치를 초과하면 메모리 최적화 모드로 전환됩니다.\r\n          값이 높을수록 더 많은 메모리를 사용하지만 성능이 향상될 수 있습니다.\r\n        </p>\r\n      </div>\r\n\r\n      <div className={styles.buttonRow}>\r\n        <button \r\n          className={styles.saveButton}\r\n          onClick={handleSaveSettings}\r\n        >\r\n          설정 저장\r\n        </button>\r\n      </div>\r\n      \r\n      {/* 설정 저장 확인 대화상자 */}\r\n      <SaveConfirmDialog \r\n        isOpen={showSaveConfirm}\r\n        onConfirm={confirmSaveSettings}\r\n        onCancel={cancelSaveSettings}\r\n        isDarkMode={darkMode}\r\n      />\r\n    </div>\r\n  );\r\n}","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport styles from './RestartLoading.module.css';\r\n\r\ninterface RestartLoadingProps {\r\n  message?: string;\r\n  isVisible: boolean;\r\n  onClose?: () => void;\r\n}\r\n\r\nexport default function RestartLoading({ \r\n  message = '앱을 재시작하는 중입니다...',\r\n  isVisible,\r\n  onClose\r\n}: RestartLoadingProps) {\r\n  const [dots, setDots] = useState('');\r\n  const [progress, setProgress] = useState(0);\r\n\r\n  // 로딩 애니메이션 효과\r\n  useEffect(() => {\r\n    if (!isVisible) return;\r\n    \r\n    // 진행 점 애니메이션\r\n    const dotsInterval = setInterval(() => {\r\n      setDots(prev => {\r\n        if (prev.length >= 3) return '';\r\n        return prev + '.';\r\n      });\r\n    }, 500);\r\n    \r\n    // 진행 표시줄 애니메이션\r\n    const progressInterval = setInterval(() => {\r\n      setProgress(prev => {\r\n        if (prev >= 100) return 100;\r\n        return prev + 5;\r\n      });\r\n    }, 100);\r\n    \r\n    return () => {\r\n      clearInterval(dotsInterval);\r\n      clearInterval(progressInterval);\r\n    };\r\n  }, [isVisible]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div className={styles.overlay}>\r\n      <div className={styles.loadingContainer}>\r\n        <div className={styles.spinner}></div>\r\n        <h3 className={styles.title}>{message}{dots}</h3>\r\n        \r\n        <div className={styles.progressContainer}>\r\n          <div \r\n            className={styles.progressBar}\r\n            style={{ width: `${progress}%` }}\r\n          ></div>\r\n        </div>\r\n        \r\n        <p className={styles.note}>앱이 곧 다시 시작됩니다.</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { ElectronAPI } from '../types/electron';\r\n\r\n// 더미 일렉트론 API 생성 함수\r\nconst createDummyElectronAPI = (): ElectronAPI => ({\r\n  windowControl: (action) => console.log(`개발용 windowControl 호출: ${action}`),\r\n  onTypingStatsUpdate: (_callback) => {\r\n    console.log('개발용 onTypingStatsUpdate 리스너 등록');\r\n    return () => console.log('개발용 onTypingStatsUpdate 리스너 제거');\r\n  },\r\n  onStatsSaved: (_callback) => {\r\n    console.log('개발용 onStatsSaved 리스너 등록');\r\n    return () => console.log('개발용 onStatsSaved 리스너 제거');\r\n  },\r\n  startTracking: () => console.log('개발용 startTracking 호출'),\r\n  stopTracking: () => console.log('개발용 stopTracking 호출'),\r\n  saveStats: (data?) => {\r\n    console.log('개발용 saveStats 호출:', data);\r\n    return Promise.resolve(true);\r\n  },\r\n  loadSettings: () => {\r\n    console.log('개발용 loadSettings 호출');\r\n    return { darkMode: false, windowMode: 'normal' };\r\n  },\r\n  saveSettings: (settings) => {\r\n    console.log('개발용 saveSettings 호출:', settings);\r\n    return true;\r\n  },\r\n  getCurrentBrowserInfo: () => Promise.resolve({ name: null, isGoogleDocs: false, title: null }),\r\n  getDebugInfo: () => Promise.resolve({\r\n    isTracking: false,\r\n    currentStats: {\r\n      keyCount: 0,\r\n      typingTime: 0,\r\n      startTime: null,\r\n      lastActiveTime: null,\r\n      currentWindow: null,\r\n      currentBrowser: null,\r\n      totalChars: 0,\r\n      totalWords: 0,\r\n      totalCharsNoSpace: 0,\r\n      pages: 0,\r\n      accuracy: 100\r\n    },\r\n    platform: 'web',\r\n    electronVersion: 'N/A',\r\n    nodeVersion: 'N/A'\r\n  }),\r\n  setDarkMode: () => Promise.resolve({ success: true }),\r\n  setWindowMode: () => Promise.resolve({ success: true }),\r\n  getWindowMode: () => Promise.resolve('windowed' as WindowModeType),\r\n  checkAutoStart: () => {},\r\n  onAutoTrackingStarted: () => () => {},\r\n  onSwitchTab: () => () => {},\r\n  onOpenSaveStatsDialog: () => () => {},\r\n  requestStatsUpdate: () => {},\r\n  onMiniViewStatsUpdate: () => () => {},\r\n  toggleMiniView: () => {},\r\n  updateTraySettings: () => Promise.resolve({ success: true }),\r\n  quitApp: () => console.log('개발용 quitApp 호출'),\r\n  toggleWindow: () => console.log('개발용 toggleWindow 호출'),\r\n  onBackgroundModeChange: () => () => {},\r\n  onTrayCommand: () => () => {},\r\n  restartApp: () => console.log('개발용 restartApp 호출'),\r\n  showRestartPrompt: () => console.log('개발용 showRestartPrompt 호출'),\r\n  closeWindow: () => console.log('개발용 closeWindow 호출'),\r\n  getDarkMode: () => Promise.resolve(false)\r\n});\r\n\r\nexport function useElectronApi() {\r\n  const [api, setApi] = useState<ElectronAPI | null>(null);\r\n\r\n  useEffect(() => {\r\n    // 브라우저 환경 확인\r\n    if (typeof window !== 'undefined') {\r\n      // window 객체에 electronAPI가 있는지 확인\r\n      const electronAPI = (window as any).electronAPI as ElectronAPI | undefined;\r\n      \r\n      if (electronAPI) {\r\n        // Electron 환경에서 실행 중\r\n        setApi(electronAPI);\r\n      } else {\r\n        // 브라우저 환경에서 실행 중이므로 더미 API 생성\r\n        setApi(createDummyElectronAPI());\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  return { \r\n    electronAPI: api,\r\n    api, // 호환성을 위해 alias로도 제공\r\n    isElectron: typeof (window as any).electronAPI !== 'undefined'\r\n  };\r\n}\r\n","/**\r\n * 다크 모드 클래스를 전역 요소에 적용하는 함수\r\n */\r\nexport function applyDarkModeToAllElements(isDark: boolean) {\r\n  if (isDark) {\r\n    document.body.classList.add('dark-mode');\r\n    document.documentElement.classList.add('dark-mode');\r\n    \r\n    // 주요 컨테이너에도 클래스 추가\r\n    document.querySelectorAll('.tab-content, .chart-container, .history-table').forEach(el => {\r\n      el.classList.add('dark-mode');\r\n    });\r\n  } else {\r\n    document.body.classList.remove('dark-mode');\r\n    document.documentElement.classList.remove('dark-mode');\r\n    \r\n    // 주요 컨테이너에서도 클래스 제거\r\n    document.querySelectorAll('.tab-content, .chart-container, .history-table').forEach(el => {\r\n      el.classList.remove('dark-mode');\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * 현재 시스템이 다크 모드인지 확인하는 함수\r\n */\r\nexport function isSystemInDarkMode(): boolean {\r\n  if (typeof window === 'undefined') return false;\r\n  return window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n}\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { useToast } from '../components/ToastContext';\r\nimport { applyDarkModeToAllElements } from '../utils/darkModeUtils';\r\nimport type { ElectronAPI } from '../types/electron';\r\nimport type { WindowModeType } from '../global';\r\n\r\n// SettingsState 타입 인터페이스를 export하여 다른 파일에서 import할 수 있게 함\r\nexport interface SettingsState {\r\n  enabledCategories: {\r\n    docs: boolean;\r\n    office: boolean;\r\n    coding: boolean;\r\n    sns: boolean;\r\n  };\r\n  autoStartMonitoring: boolean;\r\n  resumeAfterIdle: boolean;\r\n  darkMode: boolean;\r\n  windowMode: WindowModeType;\r\n  minimizeToTray: boolean;\r\n  showTrayNotifications: boolean;\r\n  reduceMemoryInBackground: boolean;\r\n  enableMiniView: boolean;\r\n  useHardwareAcceleration: boolean;\r\n  processingMode: 'auto' | 'normal' | 'cpu-intensive' | 'gpu-intensive';\r\n  maxMemoryThreshold: number;\r\n}\r\n\r\n// 기본 설정 값 - GPU 및 처리 모드 추가\r\nconst defaultSettings: SettingsState = {\r\n  enabledCategories: {\r\n    docs: true,\r\n    office: true,\r\n    coding: true,\r\n    sns: true\r\n  },\r\n  autoStartMonitoring: true,\r\n  resumeAfterIdle: true, // 필수 속성으로 추가\r\n  darkMode: false,\r\n  windowMode: 'windowed',\r\n  minimizeToTray: true,\r\n  showTrayNotifications: true,\r\n  reduceMemoryInBackground: true,\r\n  enableMiniView: true,\r\n  useHardwareAcceleration: false, // GPU 하드웨어 가속 기본값 추가\r\n  processingMode: 'auto', // 처리 모드 기본값 추가\r\n  maxMemoryThreshold: 100 // 메모리 임계치 기본값\r\n};\r\n\r\nexport function useSettings(electronAPI: ElectronAPI | null) {\r\n  const [settings, setSettings] = useState<SettingsState>(defaultSettings);\r\n  const [darkMode, setDarkMode] = useState(false);\r\n  const [windowMode, setWindowMode] = useState<WindowModeType>('windowed');\r\n  const { showToast } = useToast();\r\n\r\n  // 로컬 스토리지에 설정 저장\r\n  const saveSettingsToLocalStorage = useCallback((settingsToSave: SettingsState) => {\r\n    try {\r\n      localStorage.setItem('app-settings', JSON.stringify(settingsToSave));\r\n    } catch (error) {\r\n      console.error('설정 저장 중 오류:', error);\r\n    }\r\n  }, []);\r\n\r\n  // 로컬 스토리지에서 설정 로드\r\n  const loadSettingsFromLocalStorage = useCallback(() => {\r\n    try {\r\n      const savedSettings = localStorage.getItem('app-settings');\r\n      if (savedSettings) {\r\n        const parsedSettings = JSON.parse(savedSettings) as Partial<SettingsState>;\r\n        \r\n        // 누락된 필드가 있을 경우 기본값 추가\r\n        const completeSettings: SettingsState = {\r\n          enabledCategories: {\r\n            docs: parsedSettings.enabledCategories?.docs ?? true,\r\n            office: parsedSettings.enabledCategories?.office ?? true,\r\n            coding: parsedSettings.enabledCategories?.coding ?? true,\r\n            sns: parsedSettings.enabledCategories?.sns ?? true\r\n          },\r\n          autoStartMonitoring: parsedSettings.autoStartMonitoring ?? true,\r\n          resumeAfterIdle: parsedSettings.resumeAfterIdle ?? true, // 필수 속성으로 추가\r\n          darkMode: parsedSettings.darkMode ?? false,\r\n          windowMode: parsedSettings.windowMode ?? 'windowed',\r\n          minimizeToTray: parsedSettings.minimizeToTray ?? true,\r\n          showTrayNotifications: parsedSettings.showTrayNotifications ?? true,\r\n          reduceMemoryInBackground: parsedSettings.reduceMemoryInBackground ?? true,\r\n          enableMiniView: parsedSettings.enableMiniView ?? true,\r\n          useHardwareAcceleration: parsedSettings.useHardwareAcceleration ?? false, // GPU 가속 설정 추가\r\n          processingMode: parsedSettings.processingMode ?? 'auto', // 처리 모드 설정 추가\r\n          maxMemoryThreshold: parsedSettings.maxMemoryThreshold ?? 100 // 메모리 임계치 추가\r\n        };\r\n        \r\n        setSettings(completeSettings);\r\n        setDarkMode(completeSettings.darkMode);\r\n        return completeSettings;\r\n      }\r\n    } catch (error) {\r\n      console.error('설정 로드 중 오류:', error);\r\n    }\r\n    return null;\r\n  }, []);\r\n\r\n  // 설정 저장 핸들러\r\n  const handleSaveSettings = useCallback(async (newSettings: SettingsState) => {\r\n    setSettings(newSettings);\r\n    saveSettingsToLocalStorage(newSettings);\r\n    setDarkMode(newSettings.darkMode);\r\n    \r\n    // Electron API로 설정 저장\r\n    try {\r\n      if (!electronAPI) return;\r\n      \r\n      // 옵셔널 체이닝 사용하여 saveSettings 메서드 존재 여부 확인\r\n      const savePromise = electronAPI?.saveSettings?.(newSettings);\r\n      if (savePromise instanceof Promise) {\r\n        const result = await savePromise;\r\n        \r\n        // result가 객체인 경우와 boolean인 경우 모두 처리\r\n        if (typeof result === 'object' && result !== null && 'success' in result) {\r\n          // 객체이고 success 속성이 있는 경우\r\n          const resultWithSuccess = result as { success: boolean };\r\n          if (resultWithSuccess.success) {\r\n            showToast('설정이 저장되었습니다.', 'success');\r\n          } else {\r\n            showToast('설정 저장에 실패했습니다.', 'error');\r\n          }\r\n        } else {\r\n          // 단순 boolean인 경우 (또는 다른 타입)\r\n          if (result === true || (typeof result === 'boolean' && result)) {\r\n            showToast('설정이 저장되었습니다.', 'success');\r\n          } else {\r\n            showToast('설정 저장에 실패했습니다.', 'error');\r\n          }\r\n        }\r\n      }\r\n      \r\n      // 다크 모드 적용\r\n      if (electronAPI?.setDarkMode) {\r\n        await electronAPI.setDarkMode(newSettings.darkMode);\r\n      }\r\n      \r\n      // 창 모드 적용\r\n      if (electronAPI?.setWindowMode) {\r\n        await electronAPI.setWindowMode(newSettings.windowMode);\r\n      }\r\n    } catch (error) {\r\n      console.error('Electron 설정 적용 오류:', error);\r\n      showToast('설정 적용 중 오류가 발생했습니다.', 'error');\r\n    }\r\n  }, [saveSettingsToLocalStorage, electronAPI, showToast]);\r\n\r\n  // 다크 모드 변경 핸들러\r\n  const handleDarkModeChange = useCallback((enabled: boolean) => {\r\n    setDarkMode(enabled);\r\n    \r\n    // 전역 요소에 다크 모드 적용\r\n    applyDarkModeToAllElements(enabled);\r\n    \r\n    if (electronAPI) {\r\n      electronAPI.setDarkMode(enabled);\r\n    }\r\n  }, [electronAPI]);\r\n\r\n  // 창 모드 변경 핸들러\r\n  const handleWindowModeChange = useCallback(async (mode: WindowModeType) => {\r\n    try {\r\n      setWindowMode(mode); // UI 즉시 업데이트\r\n      \r\n      if (electronAPI && typeof electronAPI.setWindowMode === 'function') {\r\n        const timeoutPromise = new Promise((_, reject) => {\r\n          setTimeout(() => reject(new Error('창 모드 변경 시간 초과')), 3000);\r\n        });\r\n        \r\n        const result = await Promise.race([\r\n          electronAPI.setWindowMode(mode),\r\n          timeoutPromise\r\n        ]) as {success: boolean, error?: string};\r\n        \r\n        if (!result.success) {\r\n          console.error(`창 모드 변경 실패: ${result.error || '알 수 없는 오류'}`);\r\n          showToast('창 모드 변경에 실패했습니다.', 'error');\r\n        }\r\n      } else {\r\n        console.warn('setWindowMode API를 사용할 수 없습니다. UI만 업데이트됩니다.');\r\n      }\r\n    } catch (error) {\r\n      console.error('창 모드 변경 중 오류:', error);\r\n      showToast('창 모드 변경 중 오류가 발생했습니다.', 'error');\r\n    }\r\n  }, [electronAPI, showToast]);\r\n\r\n  // 초기 설정 로드 및 다크모드 적용\r\n  useEffect(() => {\r\n    loadSettingsFromLocalStorage();\r\n  }, [loadSettingsFromLocalStorage]);\r\n\r\n  // 다크 모드 변경 시 전역 클래스 적용\r\n  useEffect(() => {\r\n    applyDarkModeToAllElements(darkMode);\r\n    \r\n    // 다크 모드 변경 이벤트 발생\r\n    const darkModeEvent = new CustomEvent('darkmode-changed', { detail: { darkMode } });\r\n    window.dispatchEvent(darkModeEvent);\r\n  }, [darkMode]);\r\n\r\n  // 앱이 종료되거나 페이지가 새로고침될 때 설정 저장\r\n  useEffect(() => {\r\n    const handleBeforeUnload = () => {\r\n      saveSettingsToLocalStorage(settings);\r\n    };\r\n    \r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    \r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [settings, saveSettingsToLocalStorage]);\r\n\r\n  return {\r\n    settings,\r\n    darkMode,\r\n    windowMode,\r\n    handleSaveSettings,\r\n    handleDarkModeChange,\r\n    handleWindowModeChange,\r\n    loadSettingsFromLocalStorage\r\n  };\r\n}\r\n","import { useState, useRef, useCallback, useEffect } from 'react';\r\nimport { useToast } from '../components/ToastContext';\r\nimport { ElectronAPI } from '../types/electron';\r\n\r\nconst MAX_LOGS_TO_LOAD = 100; // 최대 로그 수 제한\r\n\r\n// 타입 정의 추가\r\ninterface LogEntry {\r\n  id: number;\r\n  content: string;\r\n  key_count: number;\r\n  typing_time: number;\r\n  timestamp: string;\r\n  created_at: string;\r\n  is_saved?: boolean;\r\n  window_title?: string;\r\n  browser_name?: string;\r\n  total_chars?: number;\r\n  total_chars_no_space?: number;\r\n  total_words?: number;\r\n  pages?: number;\r\n  accuracy?: number;\r\n}\r\n\r\n// 통계 업데이트 인터페이스 정의 추가\r\ninterface TypingStatsUpdate {\r\n  keyCount: number;\r\n  typingTime: number;\r\n  windowTitle?: string;\r\n  browserName?: string;\r\n  totalChars?: number;\r\n  totalCharsNoSpace?: number;\r\n  totalWords?: number;\r\n  pages?: number;\r\n  accuracy?: number;\r\n}\r\n\r\n// 저장 데이터 인터페이스 정의 추가\r\ninterface RecordData {\r\n  content: string;\r\n  keyCount: number;\r\n  typingTime: string;\r\n  timestamp: string;\r\n  windowTitle?: string;\r\n  browserName?: string;\r\n  totalChars?: number;\r\n  totalWords?: number;\r\n  pages?: number;\r\n  accuracy?: number;\r\n}\r\n\r\nexport interface TypingStatsState {\r\n  keyCount: number;\r\n  typingTime: number;\r\n  windowTitle: string;\r\n  browserName: string;\r\n  totalChars: number;\r\n  totalCharsNoSpace: number;\r\n  totalWords: number;\r\n  pages: number;\r\n  accuracy: number;\r\n}\r\n\r\nexport function useTypingStats(electronAPI: ElectronAPI | null) {\r\n  // API에서 가져온 로그 데이터\r\n  const [logs, setLogs] = useState<LogEntry[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // 메모리 관리를 위한 ref 사용\r\n  const eventsCleanupRef = useRef<(() => void)[]>([]);\r\n  const intervalsRef = useRef<NodeJS.Timeout[]>([]);\r\n  \r\n  // 현재 통계 상태 - useRef로 관리하여 불필요한 렌더링 방지\r\n  const currentStatsRef = useRef<TypingStatsState>({\r\n    keyCount: 0,\r\n    typingTime: 0,\r\n    windowTitle: '',\r\n    browserName: '',\r\n    totalChars: 0,\r\n    totalCharsNoSpace: 0,\r\n    totalWords: 0,\r\n    pages: 0,\r\n    accuracy: 100\r\n  });\r\n  \r\n  // 화면에 표시할 통계만 useState로 관리\r\n  const [displayStats, setDisplayStats] = useState({...currentStatsRef.current});\r\n  const { showToast } = useToast();\r\n  \r\n  // 주기적으로 표시 통계 업데이트 (불필요한 렌더링 방지)\r\n  useEffect(() => {\r\n    const updateInterval = setInterval(() => {\r\n      // 변경사항이 있는 경우에만 상태 업데이트\r\n      if (JSON.stringify(currentStatsRef.current) !== JSON.stringify(displayStats)) {\r\n        setDisplayStats({...currentStatsRef.current});\r\n      }\r\n    }, 2000); // 2초마다 업데이트\r\n    \r\n    intervalsRef.current.push(updateInterval);\r\n    \r\n    return () => clearInterval(updateInterval);\r\n  }, [displayStats]);\r\n\r\n  // 통계 시작 핸들러\r\n  const handleStartTracking = useCallback(() => {\r\n    try {\r\n      if (electronAPI) {\r\n        electronAPI.startTracking?.();\r\n        setIsTracking(true);\r\n      } else {\r\n        console.warn('electronAPI가 없습니다.');\r\n        setIsTracking(true); // API가 없어도 UI는 tracking 상태 표시\r\n      }\r\n    } catch (error) {\r\n      console.error('startTracking 호출 오류:', error);\r\n      setIsTracking(true);\r\n    }\r\n  }, [electronAPI]);\r\n\r\n  // 통계 중지 핸들러\r\n  const handleStopTracking = useCallback(() => {\r\n    try {\r\n      if (electronAPI) {\r\n        electronAPI.stopTracking?.();\r\n        setIsTracking(false);\r\n      } else {\r\n        console.warn('electronAPI가 없습니다.');\r\n        setIsTracking(false);\r\n      }\r\n    } catch (error) {\r\n      console.error('stopTracking 호출 오류:', error);\r\n      setIsTracking(false);\r\n    }\r\n  }, [electronAPI]);\r\n\r\n  // 로그 데이터 로드 함수\r\n  const fetchLogs = useCallback(async (limit = MAX_LOGS_TO_LOAD) => {\r\n    if (isLoading) return; // 이미 로딩 중이면 중복 호출 방지\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      const endpoint = `/api/getLogs?limit=${limit}`;\r\n      const response = await fetch(endpoint);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`API 요청 실패: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      const contentType = response.headers.get('content-type');\r\n      if (!contentType || !contentType.includes('application/json')) {\r\n        throw new Error('서버에서 잘못된 응답 형식 반환');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        // 필요한 필드만 추출하여 메모리 최적화\r\n        const optimizedLogs = data.logs.map((log: any) => ({\r\n          id: log.id,\r\n          content: log.content,\r\n          key_count: log.key_count,\r\n          typing_time: log.typing_time,\r\n          timestamp: log.timestamp,\r\n          created_at: log.created_at,\r\n          window_title: log.window_title,\r\n          browser_name: log.browser_name,\r\n          total_chars: log.total_chars,\r\n          total_words: log.total_words,\r\n          pages: log.pages,\r\n          accuracy: log.accuracy\r\n        }));\r\n        \r\n        // 상태 업데이트 조건부로 수행\r\n        if (JSON.stringify(logs) !== JSON.stringify(optimizedLogs)) {\r\n          setLogs(optimizedLogs);\r\n        }\r\n      } else {\r\n        console.error('로그 불러오기 실패:', data.error);\r\n        setLogs([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('로그 API 요청 오류:', error);\r\n      setLogs([]);\r\n      setError('로그를 불러오는 중 문제가 발생했습니다.');\r\n      showToast?.('데이터 로드 중 오류가 발생했습니다', 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [logs, showToast, isLoading]);\r\n\r\n  // 데이터베이스 저장 함수\r\n  const saveToDatabase = useCallback(async (record: RecordData) => {\r\n    try {\r\n      const response = await fetch('/api/saveLogs', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(record)\r\n      });\r\n\r\n      const result = await response.json();\r\n      \r\n      if (response.ok) {\r\n        await fetchLogs(); // 로그 다시 불러오기\r\n      } else {\r\n        console.error('저장 실패:', result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('저장 API 요청 오류:', error);\r\n    }\r\n  }, [fetchLogs]);\r\n\r\n  // 통계 저장 핸들러\r\n  const handleSaveStats = useCallback((content: string) => {\r\n    try {\r\n      if (electronAPI) {\r\n        electronAPI.saveStats?.(content);\r\n      }\r\n      \r\n      // DB에도 저장\r\n      const recordData: RecordData = {\r\n        content,\r\n        keyCount: currentStatsRef.current.keyCount,\r\n        typingTime: currentStatsRef.current.typingTime.toString(), // number를 string으로 변환\r\n        timestamp: new Date().toISOString(),\r\n        windowTitle: currentStatsRef.current.windowTitle,\r\n        browserName: currentStatsRef.current.browserName,\r\n        totalChars: currentStatsRef.current.totalChars,\r\n        totalWords: currentStatsRef.current.totalWords,\r\n        pages: currentStatsRef.current.pages,\r\n        accuracy: currentStatsRef.current.accuracy\r\n      };\r\n      \r\n      saveToDatabase(recordData);\r\n    } catch (error) {\r\n      console.error('saveStats 호출 오류:', error);\r\n      // API 호출 실패해도 데이터베이스에는 저장 시도\r\n      const recordData: RecordData = {\r\n        content,\r\n        keyCount: currentStatsRef.current.keyCount,\r\n        typingTime: currentStatsRef.current.typingTime.toString(), // number를 string으로 변환\r\n        timestamp: new Date().toISOString(),\r\n        windowTitle: currentStatsRef.current.windowTitle,\r\n        browserName: currentStatsRef.current.browserName || 'Unknown'\r\n      };\r\n      \r\n      saveToDatabase(recordData);\r\n    }\r\n  }, [electronAPI, saveToDatabase]);\r\n\r\n  // 초기화 함수\r\n  const initializeEventListeners = useCallback(() => {\r\n    if (!electronAPI) return;\r\n    \r\n    // 이벤트 리스너 설정 및 정리 함수 모음\r\n    const cleanupFunctions: (() => void)[] = [];\r\n    \r\n    // 타이핑 통계 업데이트 이벤트 리스너\r\n    if (electronAPI.onTypingStatsUpdate) {\r\n      const cleanup = electronAPI.onTypingStatsUpdate((data: TypingStatsUpdate) => {\r\n        // 통계 상태 업데이트 로직\r\n        currentStatsRef.current = {\r\n          ...currentStatsRef.current,\r\n          ...data\r\n        };\r\n      });\r\n      \r\n      cleanupFunctions.push(cleanup);\r\n    }\r\n    \r\n    // 저장된 통계 이벤트 리스너\r\n    if (electronAPI.onStatsSaved) {\r\n      const cleanup = electronAPI.onStatsSaved(() => {\r\n        // 저장 완료 후 로직\r\n        fetchLogs();\r\n      });\r\n      \r\n      cleanupFunctions.push(cleanup);\r\n    }\r\n    \r\n    // 정리 함수를 ref에 저장\r\n    eventsCleanupRef.current = cleanupFunctions;\r\n  }, [electronAPI, fetchLogs]);\r\n\r\n  // 컴포넌트 마운트 시 이벤트 리스너 설정\r\n  useEffect(() => {\r\n    initializeEventListeners();\r\n    \r\n    // 컴포넌트 언마운트 시 이벤트 리스너 정리\r\n    return () => {\r\n      eventsCleanupRef.current.forEach(cleanup => {\r\n        try {\r\n          cleanup();\r\n        } catch (error) {\r\n          console.error('이벤트 리스너 정리 오류:', error);\r\n        }\r\n      });\r\n    };\r\n  }, [initializeEventListeners]);\r\n\r\n  // 메모리 관리를 위한 정리 함수\r\n  useEffect(() => {\r\n    return () => {\r\n      // 등록된 모든 이벤트 리스너 제거\r\n      eventsCleanupRef.current.forEach(cleanup => cleanup());\r\n      eventsCleanupRef.current = [];\r\n      \r\n      // 등록된 모든 인터벌 제거\r\n      intervalsRef.current.forEach(clearInterval);\r\n      intervalsRef.current = [];\r\n      \r\n      // 대용량 객체 참조 끊기\r\n      setLogs([]);\r\n      currentStatsRef.current = {\r\n        keyCount: 0,\r\n        typingTime: 0,\r\n        windowTitle: '',\r\n        browserName: '',\r\n        totalChars: 0,\r\n        totalCharsNoSpace: 0,\r\n        totalWords: 0,\r\n        pages: 0,\r\n        accuracy: 100\r\n      };\r\n      \r\n      // 메모리 해제 요청\r\n      if (window.gc) {\r\n        try {\r\n          window.gc();\r\n        } catch (e) {\r\n          console.log('GC 호출 실패');\r\n        }\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // 초기 로딩시 로그 데이터 가져오기\r\n  useEffect(() => {\r\n    fetchLogs();\r\n  }, [fetchLogs]);\r\n\r\n  return {\r\n    logs,\r\n    isLoading, \r\n    isTracking,\r\n    displayStats,\r\n    handleStartTracking,\r\n    handleStopTracking,\r\n    handleSaveStats,\r\n    fetchLogs,\r\n    currentStatsRef,\r\n    error\r\n  };\r\n}\r\n","import { useState, useCallback, useEffect } from 'react';\r\nimport { ElectronAPI } from '../types/electron';\r\n\r\n// API 인터페이스 정의 수정 - ElectronAPI와 호환되도록 변경\r\ninterface TabNavigationAPI extends Partial<ElectronAPI> {\r\n  // ElectronAPI의 모든 속성을 선택적으로 상속\r\n}\r\n\r\ninterface UseTabNavigationProps {\r\n  initialTab: string;\r\n  electronAPI?: TabNavigationAPI | null; // 옵셔널로 변경\r\n}\r\n\r\nexport function useTabNavigation({ initialTab, electronAPI }: UseTabNavigationProps) {\r\n  const [activeTab, setActiveTab] = useState(initialTab);\r\n  const [debugMode, setDebugMode] = useState(false);\r\n\r\n  // 탭 변경 핸들러\r\n  const handleTabChange = useCallback((tab: string) => {\r\n    setActiveTab(tab);\r\n  }, []);\r\n\r\n  // 디버그 모드 토글\r\n  const toggleDebugMode = useCallback(() => {\r\n    setDebugMode(prev => !prev);\r\n  }, []);\r\n\r\n  // 컴포넌트 마운트 시 실행할 코드\r\n  useEffect(() => {\r\n    // 여기에 필요한 초기화 로직 추가\r\n  }, []);\r\n\r\n  return {\r\n    activeTab,\r\n    debugMode,\r\n    handleTabChange,\r\n    toggleDebugMode\r\n  };\r\n}\r\n","import { useEffect, useRef, useCallback } from 'react';\r\n\r\n// Define MemoryInfo interface locally\r\ninterface MemoryInfo {\r\n  usedJSHeapSize: number;\r\n  totalJSHeapSize: number;\r\n  jsHeapSizeLimit: number;\r\n}\r\n\r\nexport interface MemoryManagementOptions {\r\n  debugMode?: boolean;\r\n  checkInterval?: number;\r\n  memoryThreshold?: number;\r\n  activeTab?: string;\r\n  onClearLogs?: () => void;\r\n}\r\n\r\n/**\r\n * 메모리 관리를 위한 커스텀 훅\r\n * 주기적으로 메모리 상태를 확인하고 필요시 정리 작업을 수행합니다.\r\n */\r\nexport function useMemoryManagement({ \r\n  debugMode = false,\r\n  checkInterval = 30000, // 기본 30초\r\n  memoryThreshold = 100, // 기본 100MB\r\n  activeTab = 'monitor',\r\n  onClearLogs = () => {}\r\n}: MemoryManagementOptions = {}) {\r\n  const intervalsRef = useRef<NodeJS.Timeout[]>([]);\r\n  const memoryWarningShownRef = useRef<boolean>(false);\r\n  const lastCleanupTimeRef = useRef<number>(0);\r\n  const CLEANUP_COOLDOWN = 60000; // 정리 작업 간 최소 시간 간격 (1분)\r\n  \r\n  // 메모리 사용량 확인 및 정리 함수\r\n  const checkMemoryUsage = useCallback(() => {\r\n    // 브라우저에서 실행 중인지 확인\r\n    if (typeof window === 'undefined') return;\r\n\r\n    // 성능 API를 통한 메모리 정보 수집\r\n    if (window.performance && (window.performance as any).memory) {\r\n      const memoryInfo = (window.performance as any).memory;\r\n      const usedHeapSize = memoryInfo.usedJSHeapSize / (1024 * 1024);\r\n      const totalHeapSize = memoryInfo.totalJSHeapSize / (1024 * 1024);\r\n      const percentUsed = (usedHeapSize / totalHeapSize) * 100;\r\n      \r\n      if (debugMode) {\r\n        console.log(`메모리 사용량: ${Math.round(usedHeapSize)}MB (${Math.round(percentUsed)}%)`);\r\n      }\r\n      \r\n      // 임계치 이상이면 불필요한 데이터 해제 (쿨다운 시간 체크)\r\n      const now = Date.now();\r\n      if (usedHeapSize > memoryThreshold && (now - lastCleanupTimeRef.current > CLEANUP_COOLDOWN)) {\r\n        lastCleanupTimeRef.current = now;\r\n        \r\n        // 경고 로그 (한 번만 표시)\r\n        if (!memoryWarningShownRef.current && debugMode) {\r\n          console.warn(`메모리 사용량 경고: ${Math.round(usedHeapSize)}MB (임계치: ${memoryThreshold}MB)`);\r\n          memoryWarningShownRef.current = true;\r\n        }\r\n        \r\n        // 필요하지 않은 큰 객체 참조 해제\r\n        if (activeTab !== 'history' && activeTab !== 'stats' && activeTab !== 'chart') {\r\n          // 로그 데이터가 필요 없는 탭에서는 메모리에서 해제\r\n          onClearLogs();\r\n          \r\n          // 자동 최적화 수행\r\n          if (typeof window.__memoryOptimizer?.optimizeMemory === 'function') {\r\n            window.__memoryOptimizer.optimizeMemory(usedHeapSize > memoryThreshold * 1.5);\r\n            if (debugMode) {\r\n              console.log('메모리 자동 최적화 수행됨');\r\n            }\r\n          }\r\n          \r\n          // GC 힌트 제공\r\n          if (window.gc) {\r\n            window.gc();\r\n            if (debugMode) {\r\n              console.log('GC 호출됨');\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n      // 메모리 사용량이 임계치 아래로 내려가면 경고 상태 초기화\r\n      if (usedHeapSize < memoryThreshold * 0.8) {\r\n        memoryWarningShownRef.current = false;\r\n      }\r\n    }\r\n  }, [activeTab, debugMode, memoryThreshold, onClearLogs]);\r\n  \r\n  // 컴포넌트 마운트 시 타이머 설정\r\n  useEffect(() => {\r\n    // 초기 메모리 체크\r\n    checkMemoryUsage();\r\n    \r\n    // 주기적으로 메모리 사용량 체크\r\n    const memoryCheckInterval = setInterval(checkMemoryUsage, checkInterval);\r\n    intervalsRef.current.push(memoryCheckInterval);\r\n    \r\n    // 페이지 가시성 변경 이벤트 핸들러\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'visible') {\r\n        // 탭이 다시 보이게 되면 메모리 체크 실행\r\n        checkMemoryUsage();\r\n      }\r\n    };\r\n    \r\n    // 이벤트 리스너 등록\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    \r\n    // 페이지 언마운트 시 정리\r\n    return () => {\r\n      clearInterval(memoryCheckInterval);\r\n      \r\n      // 등록된 모든 인터벌 제거\r\n      intervalsRef.current.forEach(clearInterval);\r\n      intervalsRef.current = [];\r\n      \r\n      // 이벤트 리스너 제거\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      \r\n      // 메모리 해제 요청\r\n      if (window.gc) {\r\n        try {\r\n          window.gc();\r\n        } catch (e) {\r\n          console.warn('GC 호출 실패');\r\n        }\r\n      }\r\n    };\r\n  }, [checkMemoryUsage, checkInterval]);\r\n  \r\n  // 수동으로 메모리 정리 실행 함수\r\n  const cleanupMemory = useCallback(() => {\r\n    // 브라우저 환경 확인\r\n    if (typeof window === 'undefined') return false;\r\n    \r\n    // 최적화 유틸리티 사용 시도\r\n    if (typeof window.__memoryOptimizer?.optimizeMemory === 'function') {\r\n      window.__memoryOptimizer.optimizeMemory(true);\r\n      if (debugMode) {\r\n        console.log('수동 메모리 최적화 실행됨');\r\n      }\r\n      return true;\r\n    }\r\n    \r\n    // 브라우저에 GC 권장\r\n    if (window.gc) {\r\n      try {\r\n        window.gc();\r\n        if (debugMode) {\r\n          console.log('GC 호출 성공');\r\n        }\r\n        return true;\r\n      } catch (e) {\r\n        console.warn('GC 호출 실패');\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  }, [debugMode]);\r\n\r\n  // 인터벌 관리를 위한 추가 함수\r\n  const addInterval = useCallback((interval: NodeJS.Timeout) => {\r\n    intervalsRef.current.push(interval);\r\n  }, []);\r\n  \r\n  const clearIntervals = useCallback(() => {\r\n    intervalsRef.current.forEach(clearInterval);\r\n    intervalsRef.current = [];\r\n  }, []);\r\n\r\n  return {\r\n    cleanupMemory,\r\n    addInterval,\r\n    clearIntervals,\r\n    checkMemoryUsage\r\n  };\r\n}\r\n","import { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { ElectronAPI } from '../types/electron';\r\n\r\nexport interface AutoHideHeaderOptions {\r\n  windowMode: string; \r\n  electronAPI: ElectronAPI | null;\r\n}\r\n\r\nexport function useAutoHideHeader({ windowMode, electronAPI }: AutoHideHeaderOptions) {\r\n  const [isHeaderVisible, setIsHeaderVisible] = useState(true);\r\n  const autoHideTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  \r\n  // 자동 숨김 기능 처리 (윈도우 기본 헤더용)\r\n  useEffect(() => {\r\n    const isAutoHideMode = windowMode === 'fullscreen-auto-hide';\r\n    \r\n    if (!isAutoHideMode) {\r\n      // 자동 숨김이 아닌 경우 항상 표시\r\n      if (electronAPI?.windowControl) {\r\n        electronAPI.windowControl('showHeader');\r\n      }\r\n      return;\r\n    }\r\n    \r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const { clientY } = e;\r\n      \r\n      // 마우스가 화면 상단 100px 이내에 있을 때 헤더 표시\r\n      if (clientY < 100) {\r\n        setIsHeaderVisible(true);\r\n        if (electronAPI?.windowControl) {\r\n          electronAPI.windowControl('showHeader');\r\n        }\r\n        \r\n        if (autoHideTimeoutRef.current) {\r\n          clearTimeout(autoHideTimeoutRef.current);\r\n          autoHideTimeoutRef.current = null;\r\n        }\r\n      } else if (clientY > 150 && isHeaderVisible) {\r\n        // 마우스가 아래로 이동했을 때 타이머 설정\r\n        if (!autoHideTimeoutRef.current) {\r\n          autoHideTimeoutRef.current = setTimeout(() => {\r\n            setIsHeaderVisible(false);\r\n            if (electronAPI?.windowControl) {\r\n              electronAPI.windowControl('hideHeader');\r\n            }\r\n            autoHideTimeoutRef.current = null;\r\n          }, 1500);\r\n        }\r\n      }\r\n    };\r\n    \r\n    // 캡처 옵션과 우선순위 높임\r\n    window.addEventListener('mousemove', handleMouseMove, { \r\n      passive: true, \r\n      capture: true \r\n    });\r\n    \r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove, { capture: true });\r\n      if (autoHideTimeoutRef.current) {\r\n        clearTimeout(autoHideTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [windowMode, isHeaderVisible, electronAPI]);\r\n  \r\n  // 헤더 표시/숨김 설정을 위한 함수\r\n  const setHeaderVisibility = useCallback((isVisible: boolean) => {\r\n    setIsHeaderVisible(isVisible);\r\n    if (electronAPI?.windowControl) {\r\n      electronAPI.windowControl(isVisible ? 'showHeader' : 'hideHeader');\r\n    }\r\n  }, [electronAPI]);\r\n\r\n  return {\r\n    isHeaderVisible,\r\n    setHeaderVisibility\r\n  };\r\n}\r\n","/**\r\n * 이미지 최적화 관련 유틸리티\r\n * 이미지 캐시 정리 및 최적화 기능 제공\r\n */\r\nimport { isElementInViewport } from './dom-optimizer';\r\n\r\n/**\r\n * 이미지 캐시 정리\r\n * 렌더러에 로드된 이미지 캐시를 효율적으로 관리\r\n */\r\nexport function clearImageCache(): void {\r\n  try {\r\n    // 화면에 보이지 않는 이미지 선택\r\n    const images = document.querySelectorAll('img:not([data-keep-cache=\"true\"])');\r\n    images.forEach(img => {\r\n      if (!isElementInViewport(img)) {\r\n        // HTMLImageElement로 타입 캐스팅하여 src 속성에 접근\r\n        const imgElement = img as HTMLImageElement;\r\n        const originalSrc = imgElement.src;\r\n        if (originalSrc) {\r\n          imgElement.setAttribute('data-original-src', originalSrc);\r\n          imgElement.src = '';\r\n          \r\n          // 필요할 때 복원하기 위한 이벤트 리스너\r\n          imgElement.addEventListener('error', () => {\r\n            const savedSrc = imgElement.getAttribute('data-original-src');\r\n            if (savedSrc) imgElement.src = savedSrc;\r\n          }, { once: true });\r\n        }\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.warn('이미지 캐시 정리 중 오류:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * 이미지 리소스를 최적화하여 메모리 사용량을 줄입니다.\r\n * @returns Promise<boolean>\r\n */\r\nexport async function optimizeImageResources(): Promise<boolean> {\r\n  try {\r\n    // 1. 화면에 보이지 않는 이미지 검색\r\n    const images = document.querySelectorAll('img:not([data-optimized])');\r\n    let optimizedCount = 0;\r\n    \r\n    for (const img of Array.from(images)) {\r\n      const imgElement = img as HTMLImageElement;\r\n      const rect = imgElement.getBoundingClientRect();\r\n      \r\n      // 화면에 보이지 않는 이미지이고 소스가 있는 경우\r\n      if ((rect.top < -window.innerHeight || rect.bottom > window.innerHeight * 2 ||\r\n           rect.left < -window.innerWidth || rect.right > window.innerWidth * 2) && \r\n          imgElement.src && !imgElement.src.startsWith('data:')) {\r\n        \r\n        // 원본 소스 저장\r\n        const originalSrc = imgElement.src;\r\n        imgElement.setAttribute('data-original-src', originalSrc);\r\n        \r\n        // 빈 이미지 또는 초소형 플레이스홀더로 대체\r\n        imgElement.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\r\n        \r\n        // 이미지가 다시 보이게 되면 복원하기 위한 Intersection Observer 설정\r\n        const observer = new IntersectionObserver((entries) => {\r\n          entries.forEach(entry => {\r\n            if (entry.isIntersecting) {\r\n              const targetImg = entry.target as HTMLImageElement;\r\n              const originalSrc = targetImg.getAttribute('data-original-src');\r\n              \r\n              if (originalSrc) {\r\n                targetImg.src = originalSrc;\r\n                targetImg.removeAttribute('data-original-src');\r\n                targetImg.setAttribute('data-optimized', 'restored');\r\n              }\r\n              \r\n              observer.disconnect();\r\n            }\r\n          });\r\n        }, { rootMargin: '200px' }); // 뷰포트 주변 200px 영역까지 고려\r\n        \r\n        observer.observe(imgElement);\r\n        imgElement.setAttribute('data-optimized', 'true');\r\n        optimizedCount++;\r\n      }\r\n    }\r\n    \r\n    if (optimizedCount > 0) {\r\n      console.log(`이미지 리소스 최적화 완료: ${optimizedCount}개 이미지 처리됨`);\r\n    }\r\n    \r\n    // 2. 초대형 캔버스 및 SVG 요소 처리\r\n    const heavyElements = document.querySelectorAll('canvas[width][height], svg[width][height]');\r\n    heavyElements.forEach(element => {\r\n      const width = parseInt(element.getAttribute('width') || '0');\r\n      const height = parseInt(element.getAttribute('height') || '0');\r\n      \r\n      // 너무 큰 캔버스/SVG가 메모리를 많이 차지할 수 있음\r\n      if (width * height > 1000000) { // 1M 픽셀 이상\r\n        if (!element.hasAttribute('data-optimized')) {\r\n          // 화면에 보이지 않을 때만 처리\r\n          const rect = element.getBoundingClientRect();\r\n          if (rect.top < -window.innerHeight || rect.bottom > window.innerHeight * 2) {\r\n            element.setAttribute('data-optimized', 'hidden');\r\n            // HTMLElement로 타입 캐스팅하여 style 속성에 접근\r\n            const htmlElement = element as HTMLElement;\r\n            htmlElement.setAttribute('data-original-display', htmlElement.style.display);\r\n            htmlElement.style.display = 'none';\r\n          }\r\n        }\r\n      }\r\n    });\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('이미지 리소스 최적화 오류:', error);\r\n    return false;\r\n  }\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useCallback, useEffect } from 'react';\r\nimport { TypingMonitor } from './TypingMonitor';\r\nimport { TypingChart } from './TypingChart';\r\nimport { TabNavigation } from './TabNavigation';\r\nimport { MainLayout } from './MainLayout';\r\nimport { DebugPanel } from './DebugPanel';\r\nimport { Settings } from './Settings'; \r\nimport RestartLoading from './RestartLoading';\r\nimport { useElectronApi } from '../hooks/useElectronApi';\r\nimport { useSettings } from '../hooks/useSettings';\r\nimport { useTypingStats } from '../hooks/useTypingStats';\r\nimport { useTabNavigation } from '../hooks/useTabNavigation';\r\nimport { useMemoryManagement } from '../hooks/useMemoryManagement';\r\nimport { useAutoHideHeader } from '../hooks/useAutoHideHeader';\r\nimport { optimizeImageResources } from '../utils/memory/image-optimizer';\r\n\r\n// LogEntry 타입 정의 추가\r\ninterface LogEntry {\r\n  id: number;\r\n  content: string;\r\n  key_count: number;\r\n  typing_time: number;\r\n  timestamp: string;\r\n  created_at: string;\r\n  is_saved?: boolean;\r\n  window_title?: string;\r\n  browser_name?: string;\r\n  total_chars?: number;\r\n  total_chars_no_space?: number;\r\n  total_words?: number;\r\n  pages?: number;\r\n  accuracy?: number;\r\n}\r\n\r\n// RestartLoadingData 인터페이스 추가\r\ninterface RestartLoadingData {\r\n  message?: string;\r\n  timeout?: number;\r\n}\r\n\r\nexport const HomeContent = React.memo(function HomeContent() {\r\n  // Electron API 초기화\r\n  const { electronAPI, api } = useElectronApi();\r\n  \r\n  // 설정 상태 관리\r\n  const { \r\n    settings, \r\n    darkMode, \r\n    windowMode,\r\n    handleSaveSettings, \r\n    handleDarkModeChange, \r\n    handleWindowModeChange \r\n  } = useSettings(electronAPI);\r\n  \r\n  // 사용하지 않는 함수에 _ 추가\r\n  const _loadSettings = async () => {\r\n    try {\r\n      if (electronAPI && electronAPI.loadSettings) {\r\n        const settings = await electronAPI.loadSettings();\r\n        \r\n        const completeSettings = {\r\n          enabledCategories: settings.enabledCategories || {\r\n            docs: true,\r\n            office: true,\r\n            coding: true,\r\n            sns: true\r\n          },\r\n          autoStartMonitoring: settings.autoStartMonitoring ?? true,\r\n          resumeAfterIdle: settings.resumeAfterIdle ?? true,\r\n          darkMode: settings.darkMode ?? false,\r\n          windowMode: settings.windowMode ?? 'windowed',\r\n          minimizeToTray: settings.minimizeToTray ?? true,\r\n          showTrayNotifications: settings.showTrayNotifications ?? true,\r\n          reduceMemoryInBackground: settings.reduceMemoryInBackground ?? true,\r\n          enableMiniView: settings.enableMiniView ?? true,\r\n          useHardwareAcceleration: settings.useHardwareAcceleration ?? false,\r\n          processingMode: settings.processingMode ?? 'auto',\r\n          maxMemoryThreshold: settings.maxMemoryThreshold ?? 100\r\n        };\r\n        \r\n        handleSaveSettings(completeSettings);\r\n        handleDarkModeChange(settings.darkMode);\r\n      }\r\n    } catch (error) {\r\n      console.error('설정 로드 중 오류:', error);\r\n    }\r\n  };\r\n\r\n  // 탭 관리\r\n  const { \r\n    activeTab, \r\n    debugMode, \r\n    handleTabChange, \r\n    toggleDebugMode \r\n  } = useTabNavigation({ \r\n    initialTab: 'monitor',\r\n    electronAPI: api\r\n  });\r\n  \r\n  // 자동 숨김 헤더 관리\r\n  const { isHeaderVisible } = useAutoHideHeader({\r\n    windowMode, \r\n    electronAPI\r\n  });\r\n  \r\n  // 타이핑 통계 관리 - 사용하지 않는 변수에 대한 구조 분해 할당 수정\r\n  const { \r\n    logs: typingLogs, \r\n    isLoading: _isLoading,  // _isLoading 속성이 아닌 isLoading에서 이름 변경\r\n    isTracking,\r\n    displayStats,\r\n    handleStartTracking,\r\n    handleStopTracking,\r\n    handleSaveStats,\r\n    currentStatsRef,\r\n    fetchLogs: _fetchLogs  // _fetchLogs 속성이 아닌 fetchLogs에서 이름 변경\r\n  } = useTypingStats(electronAPI);\r\n  \r\n  // 현재 표시할 로그 관리\r\n  const [currentLogs, setCurrentLogs] = useState<LogEntry[]>([]);\r\n  \r\n  // 메모리 관리 훅 사용 개선\r\n  const memoryManager = useMemoryManagement({\r\n    debugMode,\r\n    activeTab,\r\n    memoryThreshold: 100, \r\n    checkInterval: 30000, \r\n    onClearLogs: () => {\r\n      if (activeTab !== 'history' && activeTab !== 'stats' && activeTab !== 'chart') {\r\n        setCurrentLogs([]);\r\n        \r\n        try {\r\n          optimizeImageResources().catch((err: Error) => {\r\n            console.error('이미지 리소스 최적화 중 오류:', err);\r\n          });\r\n        } catch (err) {\r\n          console.error('이미지 최적화 실행 오류:', err);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  // 컴포넌트 첫 로드 시 메모리 최적화 실행\r\n  useEffect(() => {\r\n    try {\r\n      if (window.__memoryOptimizer?.requestGC) {\r\n        window.__memoryOptimizer.requestGC(false).catch(err => {\r\n          console.error('메모리 최적화 오류:', err);\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.error('GC 요청 오류:', err);\r\n    }\r\n    \r\n    const imageOptimizationInterval = setInterval(() => {\r\n      optimizeImageResources().catch((err: Error) => {\r\n        console.error('이미지 리소스 최적화 주기 작업 중 오류:', err);\r\n      });\r\n    }, 300000);\r\n    \r\n    memoryManager.addInterval(imageOptimizationInterval);\r\n    \r\n    return () => {\r\n      memoryManager.clearIntervals();\r\n    };\r\n  }, [memoryManager]);\r\n\r\n  React.useEffect(() => {\r\n    if (typingLogs && typingLogs.length > 0) {\r\n      setCurrentLogs(typingLogs);\r\n    }\r\n  }, [typingLogs]);\r\n\r\n  const [isRestarting, setIsRestarting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!electronAPI) return;\r\n    \r\n    const unsubscribe = electronAPI.onShowRestartLoading?.((data: RestartLoadingData) => {\r\n      setIsRestarting(true);\r\n      \r\n      if (data.timeout) {\r\n        setTimeout(() => {\r\n          setIsRestarting(false);\r\n        }, data.timeout);\r\n      }\r\n    }) || (() => {});\r\n    \r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [electronAPI]);\r\n\r\n  const renderContent = useCallback(() => {\r\n    switch (activeTab) {\r\n      case 'monitor':\r\n        return (\r\n          <TypingMonitor\r\n            stats={displayStats}\r\n            isTracking={isTracking}\r\n            onStartTracking={handleStartTracking}\r\n            onStopTracking={handleStopTracking}\r\n            onSaveStats={handleSaveStats}\r\n          />\r\n        );\r\n      case 'stats':\r\n        return (\r\n          <React.Suspense fallback={<div>Loading chart...</div>}>\r\n            <TypingChart \r\n              logs={typingLogs}\r\n            />\r\n          </React.Suspense>\r\n        );\r\n      case 'settings':\r\n        return (\r\n          <div className=\"settings-tab-wrapper\" style={{\r\n            maxWidth: '800px',\r\n            margin: '0 auto',\r\n            width: '100%'\r\n          }}>\r\n            <Settings\r\n              onSave={handleSaveSettings}\r\n              initialSettings={settings}\r\n              darkMode={darkMode}\r\n              onDarkModeChange={handleDarkModeChange}\r\n              onWindowModeChange={handleWindowModeChange}\r\n            />\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  }, [\r\n    activeTab, \r\n    displayStats, \r\n    isTracking, \r\n    handleStartTracking, \r\n    handleStopTracking, \r\n    handleSaveStats,\r\n    typingLogs,\r\n    settings, \r\n    darkMode, \r\n    handleDarkModeChange, \r\n    handleWindowModeChange,\r\n    handleSaveSettings\r\n  ]);\r\n\r\n  return (\r\n    <MainLayout \r\n      darkMode={darkMode}\r\n      windowMode={windowMode} \r\n      electronAPI={electronAPI}\r\n      isHeaderVisible={isHeaderVisible}\r\n    >\r\n      <RestartLoading \r\n        isVisible={isRestarting}\r\n        message=\"앱을 재시작하는 중입니다\"\r\n      />\r\n      \r\n      <TabNavigation\r\n        activeTab={activeTab}\r\n        onTabChange={handleTabChange}\r\n        onDebugToggle={toggleDebugMode}\r\n        debugMode={debugMode}\r\n      />\r\n      \r\n      {renderContent()}\r\n      \r\n      <DebugPanel\r\n        isVisible={debugMode}\r\n        stats={currentStatsRef.current}\r\n        logsCount={currentLogs.length}\r\n        isTracking={isTracking}\r\n        windowMode={windowMode}\r\n      />\r\n    </MainLayout>\r\n  );\r\n});\r\n\r\nexport default HomeContent;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  getGpuInfo, \r\n  setGpuAcceleration,\r\n  performGpuComputation,\r\n  GpuTaskType,\r\n  GpuInfo\r\n} from '../utils/nativeModuleClient';\r\nimport type { GpuComputationResult } from '@/types/native-module';\r\n\r\n/**\r\n * 네이티브 GPU 가속 훅\r\n * 네이티브 모듈을 사용한 GPU 가속 기능을 제공합니다.\r\n */\r\nexport function useNativeGpu() {\r\n  const [gpuInfo, setGpuInfo] = useState<GpuInfo | null>(null);\r\n  const [available, setAvailable] = useState<boolean>(false);\r\n  const [enabled, setEnabled] = useState<boolean>(false);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [lastComputationResult, setLastComputationResult] = useState<GpuComputationResult | null>(null);\r\n\r\n  // GPU 정보 가져오기\r\n  const fetchGpuInfo = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const response = await getGpuInfo();\r\n      \r\n      if (response) {\r\n        setGpuInfo(response);\r\n        setAvailable(response.available);\r\n        setEnabled(response.accelerationEnabled || false);\r\n      } else {\r\n        setError('GPU 정보를 가져오는데 실패했습니다.');\r\n        setAvailable(false);\r\n        setEnabled(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('GPU 정보 가져오기 오류:', err);\r\n      setError(err instanceof Error ? err.message : '알 수 없는 오류');\r\n      setAvailable(false);\r\n      setEnabled(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // GPU 가속 활성화/비활성화\r\n  const toggleGpuAcceleration = useCallback(async (enable: boolean) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const success = await setGpuAcceleration(enable);\r\n      \r\n      if (success) {\r\n        setEnabled(enable);\r\n        await fetchGpuInfo();\r\n        return true;\r\n      } else {\r\n        setError('GPU 가속 설정 변경 실패');\r\n        return false;\r\n      }\r\n    } catch (err) {\r\n      console.error('GPU 가속 변경 오류:', err);\r\n      setError(err instanceof Error ? err.message : '알 수 없는 오류');\r\n      return false;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [fetchGpuInfo]);\r\n\r\n  // GPU 계산 수행 (제네릭 타입 제거)\r\n  const computeWithGpu = useCallback(async (taskType: GpuTaskType, data: Record<string, any>) => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const result = await performGpuComputation(taskType, data);\r\n      \r\n      if (result) {\r\n        setLastComputationResult({\r\n          computation_type: taskType,\r\n          duration_ms: result.duration_ms || 0,\r\n          result: result.result,\r\n          timestamp: Date.now()\r\n        } as GpuComputationResult);\r\n        return result.result;\r\n      } else {\r\n        setError('GPU 계산 실패');\r\n        return null;\r\n      }\r\n    } catch (err) {\r\n      console.error('GPU 계산 오류:', err);\r\n      setError(err instanceof Error ? err.message : '알 수 없는 오류');\r\n      return null;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  // 초기 로드 시 GPU 정보 가져오기\r\n  useEffect(() => {\r\n    fetchGpuInfo();\r\n  }, [fetchGpuInfo]);\r\n\r\n  return {\r\n    gpuInfo,\r\n    available,\r\n    enabled,\r\n    loading,\r\n    error,\r\n    lastComputationResult,\r\n    fetchGpuInfo,\r\n    toggleGpuAcceleration,\r\n    computeWithGpu,\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useNativeGpu } from '../hooks/useNativeGpu';\r\nimport styles from './TypingAnalyzer.module.css';\r\n\r\ninterface TypingData {\r\n  keyCount: number;\r\n  typingTime: number;  // 밀리초\r\n  accuracy?: number;\r\n}\r\n\r\ninterface TypingAnalysisResult {\r\n  wpm: number;\r\n  accuracy: number;\r\n  performance_index: number;\r\n  consistency_score: number;\r\n  fatigue_analysis: {\r\n    score: number;\r\n    time_factor: number;\r\n    intensity_factor: number;\r\n    recommendation: string;\r\n  };\r\n}\r\n\r\nexport function TypingAnalyzer({ stats, _isTracking }: { \r\n  stats?: TypingData; \r\n  _isTracking?: boolean \r\n}) {\r\n  const defaultStats = {\r\n    keyCount: 0,\r\n    typingTime: 0,\r\n    accuracy: 0\r\n  };\r\n\r\n  const safeStats = stats || defaultStats;\r\n\r\n  const { available, enabled, loading, error, computeWithGpu, toggleGpuAcceleration } = useNativeGpu();\r\n  const [result, setResult] = useState<TypingAnalysisResult | null>(null);\r\n  const [useGpuAcceleration, setUseGpuAcceleration] = useState<boolean>(false);\r\n\r\n  // 타이핑 통계 분석 수행\r\n  const analyzeTyping = useCallback(async () => {\r\n    if (!safeStats.keyCount || !safeStats.typingTime) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (useGpuAcceleration && enabled) {\r\n        // GPU 가속 분석\r\n        const computeResult = await computeWithGpu<TypingAnalysisResult>(safeStats, 'typing');\r\n        \r\n        if (computeResult && computeResult.result_summary) {\r\n          setResult(computeResult.result_summary);\r\n        }\r\n      } else {\r\n        // 자바스크립트로 분석 (폴백)\r\n        const jsResult = analyzeTypingWithJS(safeStats);\r\n        setResult(jsResult);\r\n      }\r\n    } catch (err) {\r\n      console.error('타이핑 분석 오류:', err);\r\n      \r\n      // 오류 시 자바스크립트 폴백 사용\r\n      const jsResult = analyzeTypingWithJS(safeStats);\r\n      setResult(jsResult);\r\n    }\r\n  }, [safeStats, useGpuAcceleration, enabled, computeWithGpu]);\r\n\r\n  // GPU 가속 활성화/비활성화 처리\r\n  const handleToggleGpu = useCallback(async () => {\r\n    const newState = !useGpuAcceleration;\r\n    setUseGpuAcceleration(newState);\r\n    \r\n    if (newState && available && !enabled) {\r\n      await toggleGpuAcceleration(true);\r\n    }\r\n  }, [useGpuAcceleration, available, enabled, toggleGpuAcceleration]);\r\n\r\n  // 데이터 변경 시 재분석\r\n  useEffect(() => {\r\n    if (safeStats.keyCount > 0 && safeStats.typingTime > 0) {\r\n      analyzeTyping();\r\n    }\r\n  }, [safeStats, analyzeTyping]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <h2 className={styles.title}>타이핑 분석</h2>\r\n        {available && (\r\n          <div className={styles.gpuToggle}>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={useGpuAcceleration}\r\n                onChange={handleToggleGpu}\r\n                disabled={loading}\r\n              />\r\n              GPU 가속 사용\r\n            </label>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {loading && <div className={styles.loading}>분석 중...</div>}\r\n      \r\n      {error && <div className={styles.error}>{error}</div>}\r\n      \r\n      {result && !loading && (\r\n        <div className={styles.results}>\r\n          <div className={styles.stat}>\r\n            <span className={styles.label}>속도</span>\r\n            <span className={styles.value}>{result.wpm} WPM</span>\r\n          </div>\r\n          \r\n          <div className={styles.stat}>\r\n            <span className={styles.label}>정확도</span>\r\n            <span className={styles.value}>{result.accuracy.toFixed(1)}%</span>\r\n          </div>\r\n          \r\n          <div className={styles.stat}>\r\n            <span className={styles.label}>성능 지수</span>\r\n            <span className={styles.value}>{result.performance_index.toFixed(1)}</span>\r\n          </div>\r\n          \r\n          <div className={styles.stat}>\r\n            <span className={styles.label}>일관성</span>\r\n            <span className={styles.value}>{result.consistency_score.toFixed(1)}</span>\r\n          </div>\r\n          \r\n          <div className={styles.fatigue}>\r\n            <h3>피로도 분석</h3>\r\n            <div className={styles.fatigueMeter}>\r\n              <div \r\n                className={styles.fatigueIndicator} \r\n                style={{ width: `${result.fatigue_analysis.score}%` }}\r\n              />\r\n            </div>\r\n            <p className={styles.recommendation}>\r\n              {result.fatigue_analysis.recommendation}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// 자바스크립트로 타이핑 통계 분석 (폴백)\r\nfunction analyzeTypingWithJS(data: TypingData): TypingAnalysisResult {\r\n  const { keyCount, typingTime, accuracy = 100 } = data;\r\n  \r\n  // WPM 계산 (1단어 = 5타)\r\n  const minutes = typingTime / 60000;\r\n  const wpm = minutes > 0 ? (keyCount / 5) / minutes : 0;\r\n  \r\n  // 일관성 점수 (간단한 추정)\r\n  const consistency = 65 + (Math.min(keyCount, 500) / 20);\r\n  \r\n  // 피로도 계산\r\n  const fatigue = {\r\n    score: Math.min(100, (minutes * 10) + (wpm / 10)),\r\n    time_factor: minutes,\r\n    intensity_factor: wpm / 100,\r\n    recommendation: minutes > 30 \r\n      ? '휴식이 필요합니다' \r\n      : minutes > 15 \r\n        ? '짧은 휴식을 고려하세요' \r\n        : '좋은 상태입니다'\r\n  };\r\n  \r\n  return {\r\n    wpm,\r\n    accuracy,\r\n    performance_index: (wpm * accuracy / 100),\r\n    consistency_score: consistency,\r\n    fatigue_analysis: fatigue\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { TypingAnalyzer } from './TypingAnalyzer';\r\n\r\n// 타입 정의 추가\r\ninterface TypingStats {\r\n  keyCount: number;\r\n  typingTime: number;\r\n  totalChars: number;\r\n  totalWords: number;\r\n  accuracy: number;\r\n}\r\n\r\n// 일렉트론 API 타입 정의\r\ndeclare global {\r\n  interface Window {\r\n    electronAPI?: {\r\n      onStatsUpdate?: (callback: (newStats: TypingStats) => void) => () => void;\r\n      requestCurrentStats?: () => void;\r\n      getTrackingStatus?: () => Promise<boolean>;\r\n      toggleTracking?: () => Promise<boolean>;\r\n    };\r\n  }\r\n}\r\n\r\nexport default function TypingAnalyzerWrapper() {\r\n  // 기본값을 가진 상태 초기화\r\n  const [stats, setStats] = useState<TypingStats>({\r\n    keyCount: 0,\r\n    typingTime: 0,\r\n    totalChars: 0,\r\n    totalWords: 0,\r\n    accuracy: 0\r\n  });\r\n  const [isTracking, setIsTracking] = useState(false);\r\n  // _isElectron으로 변경하여 ESLint 경고 제거\r\n  const [_isElectron, setIsElectron] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    // 일렉트론 API 존재 확인\r\n    const api = window.electronAPI;\r\n    const hasApi = !!api;\r\n    setIsElectron(hasApi);\r\n    \r\n    // 모의 데이터 생성 (일렉트론 API가 없을 때 사용)\r\n    if (!hasApi) {\r\n      // 브라우저 환경에서는 모의 데이터 사용\r\n      const mockStats: TypingStats = {\r\n        keyCount: 1250,\r\n        typingTime: 1800,\r\n        totalChars: 1050,\r\n        totalWords: 210,\r\n        accuracy: 98.5\r\n      };\r\n      \r\n      setStats(mockStats);\r\n      setIsTracking(true);\r\n      return;\r\n    }\r\n    \r\n    // 일렉트론 API가 있고 필요한 메서드가 있는 경우만 처리\r\n    try {\r\n      let cleanup: (() => void) | undefined;\r\n      \r\n      // onStatsUpdate 메서드가 있는지 확인\r\n      if (api.onStatsUpdate && typeof api.onStatsUpdate === 'function') {\r\n        cleanup = api.onStatsUpdate((newStats: TypingStats) => {\r\n          if (newStats) {\r\n            setStats(newStats);\r\n          }\r\n        });\r\n      }\r\n      \r\n      // requestCurrentStats 메서드가 있는지 확인\r\n      if (api.requestCurrentStats && typeof api.requestCurrentStats === 'function') {\r\n        api.requestCurrentStats();\r\n      }\r\n      \r\n      // getTrackingStatus 메서드가 있는지 확인\r\n      if (api.getTrackingStatus && typeof api.getTrackingStatus === 'function') {\r\n        api.getTrackingStatus()\r\n          .then((status: boolean) => {\r\n            setIsTracking(status);\r\n          })\r\n          .catch((err: any) => {\r\n            console.warn('추적 상태를 가져오는데 실패했습니다:', err);\r\n            setIsTracking(false);\r\n          });\r\n      }\r\n      \r\n      return () => {\r\n        if (cleanup && typeof cleanup === 'function') {\r\n          cleanup();\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('일렉트론 API 사용 중 오류 발생:', error);\r\n      \r\n      // 오류 발생 시 모의 데이터 사용\r\n      const fallbackStats: TypingStats = {\r\n        keyCount: 500,\r\n        typingTime: 600,\r\n        totalChars: 450,\r\n        totalWords: 90,\r\n        accuracy: 95.0\r\n      };\r\n      \r\n      setStats(fallbackStats);\r\n      setIsTracking(false);\r\n    }\r\n  }, []);\r\n  \r\n  // TypingAnalyzer 컴포넌트에 _isTracking 속성 사용 (대신 isTracking을 사용)\r\n  return <TypingAnalyzer stats={stats} _isTracking={isTracking} />;\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport dynamic from 'next/dynamic';\r\nimport HomeContent from './components/HomeContent';\r\nimport styles from './page.module.css';\r\nimport TypingAnalyzerWrapper from './components/TypingAnalyzerWrapper';\r\n\r\n// 네이티브 모듈 테스트 컴포넌트 동적 임포트\r\nconst NativeModuleTest = dynamic(\r\n  () => import('./components/NativeModuleTest'),\r\n  { ssr: false }\r\n);\r\n\r\n// 'use client' 컴포넌트에서는 metadata를 export할 수 없으므로 제거\r\n// metadata는 layout.tsx로 이동\r\n\r\nexport default function Home() {\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // 컴포넌트 마운트 상태 추적\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  if (!mounted) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <main className={styles.main}>\r\n      <div className={styles.container}>\r\n        <h1 className={styles.title}>Loop</h1>\r\n        <p className={styles.description}>\r\n          Next.js와 Rust 네이티브 모듈 통합 테스트\r\n        </p>\r\n\r\n        {/* 네이티브 모듈 테스트 컴포넌트 */}\r\n        <NativeModuleTest />\r\n\r\n        {/* 기존 내용 유지 */}\r\n        <HomeContent />\r\n        <TypingAnalyzerWrapper />\r\n      </div>\r\n    </main>\r\n  );\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"RestartLoading_overlay__xTGoM\",\"loadingContainer\":\"RestartLoading_loadingContainer__fs5qH\",\"spinner\":\"RestartLoading_spinner__pt5Mz\",\"spin\":\"RestartLoading_spin__IcW5Z\",\"title\":\"RestartLoading_title__0PqQH\",\"progressContainer\":\"RestartLoading_progressContainer__fWgDe\",\"progressBar\":\"RestartLoading_progressBar__MFOGS\",\"note\":\"RestartLoading_note__iqeE6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toast\":\"Toast_toast__n4V9V\",\"fadeIn\":\"Toast_fadeIn__8co0A\",\"fadeOut\":\"Toast_fadeOut__PBTbC\",\"success\":\"Toast_success__n3sBF\",\"error\":\"Toast_error__vTefu\",\"info\":\"Toast_info__iczaj\",\"warning\":\"Toast_warning__u1w7_\",\"message\":\"Toast_message__Ivwz3\"};","/**\r\n * 네이티브 모듈 타입 정의\r\n */\r\n\r\n// 네이티브 모듈 최적화 레벨\r\nexport enum OptimizationLevel {\r\n  Normal = 0,\r\n  Low = 1,\r\n  Medium = 2,\r\n  High = 3,\r\n  Critical = 4\r\n}\r\n\r\n// GPU 장치 정보 인터페이스\r\nexport interface GpuDeviceInfo {\r\n  name: string;\r\n  vendor: string;\r\n  driver_info: string;\r\n  device_type: string;\r\n  backend: string;\r\n  timestamp: number;\r\n}\r\n\r\n// GPU 정보 인터페이스\r\nexport interface GpuInfo {\r\n  name: string;\r\n  vendor: string;\r\n  driver_info: string;\r\n  device_type: string;\r\n  backend: string;\r\n  available: boolean;\r\n  timestamp: number;\r\n}\r\n\r\n// GPU 작업 결과 인터페이스\r\nexport interface GpuTaskResult {\r\n  task_id: string;\r\n  task_type: string;\r\n  duration_ms: number;\r\n  result: any;\r\n  timestamp: number;\r\n}\r\n\r\n// 작업 결과 인터페이스\r\nexport interface TaskResult {\r\n  task_id: string;\r\n  task_type: string;\r\n  duration_ms: number;\r\n  result: any;\r\n  timestamp: number;\r\n}\r\n\r\n// GPU 계산 결과 인터페이스\r\nexport interface GpuComputationResult {\r\n  computation_type: string;\r\n  duration_ms: number;\r\n  result: any;\r\n  timestamp: number;\r\n}\r\n\r\n// 네이티브 GPU 타입 (Rust enum과 일치)\r\nexport enum GPUType {\r\n  Unknown = 0,\r\n  Integrated = 1,\r\n  Discrete = 2,\r\n  Software = 3\r\n}\r\n\r\n// 네이티브 GPU 정보 인터페이스 (Rust struct와 일치)\r\nexport interface GPUInfo {\r\n  name: string;\r\n  vendor: string;\r\n  device_type: GPUType;\r\n  available: boolean;\r\n  acceleration_enabled: boolean;\r\n  renderer?: string;\r\n  driver_info?: string;\r\n  backend?: string;\r\n  timestamp: number;\r\n}\r\n\r\n// 워커 풀 상태 인터페이스\r\nexport interface WorkerPoolStats {\r\n  thread_count: number;\r\n  active_tasks: number;\r\n  completed_tasks: number;\r\n  active_workers: number;\r\n  idle_workers: number;\r\n  pending_tasks: number;\r\n  failed_tasks: number;\r\n  total_tasks: number;\r\n  uptime_ms: number;\r\n  timestamp: number;\r\n}\r\n\r\n// 성능 지표 인터페이스\r\nexport interface PerformanceMetrics {\r\n  calls: number;\r\n  errors: number;\r\n  avgExecutionTime: number;\r\n  lastGcTime: number;\r\n  totalExecutionTime: number;\r\n  timestamp: number;\r\n}\r\n\r\n// 네이티브 모듈 상태 인터페이스\r\nexport interface NativeModuleStatus {\r\n  available: boolean;\r\n  fallbackMode: boolean;\r\n  version: string | null;\r\n  info: any;\r\n  timestamp: number;\r\n  error?: string;\r\n}\r\n\r\n// GPU 작업 유형 열거형\r\nexport enum GpuTaskType {\r\n  MatrixMultiplication = 'matrix',\r\n  TextAnalysis = 'text',\r\n  ImageProcessing = 'image',\r\n  DataAggregation = 'data',\r\n  PatternDetection = 'pattern',\r\n  TypingStatistics = 'typing',\r\n  Custom = 'custom'\r\n}\r\n\r\n// GPU 가속 상태 인터페이스\r\nexport interface GpuAccelerationStatus {\r\n  available: boolean;\r\n  enabled: boolean;\r\n  info?: GpuInfo;\r\n}\r\n\r\n// 메모리 정보 인터페이스\r\nexport interface MemoryInfo {\r\n  totalMemory: number;\r\n  freeMemory: number;\r\n  usedMemory: number;\r\n  memoryUsagePercent: number;\r\n  usageLevel: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\r\n}\r\n\r\n// 최적화 결과 인터페이스\r\nexport interface OptimizationResult {\r\n  success: boolean;\r\n  memoryBefore?: number;\r\n  memoryAfter?: number;\r\n  memoryFreed?: number;\r\n  duration?: number;\r\n  error?: string;\r\n}\r\n\r\n// 가비지 컬렉션 결과 인터페이스\r\nexport interface GCResult {\r\n  success: boolean;\r\n  freed_memory: number;\r\n  freed_mb?: number;\r\n  timestamp: number;\r\n  error?: string;\r\n}\r\n\r\n/**\r\n * 네이티브 모듈 인터페이스\r\n */\r\nexport interface NativeMemoryModule {\r\n  /**\r\n   * 메모리 상태 얻기\r\n   */\r\n  getMemoryStatus(): Promise<MemoryInfo>;\r\n  \r\n  /**\r\n   * 메모리 최적화 실행\r\n   * @param level 최적화 강도 (1-10)\r\n   */\r\n  optimizeMemory(level?: number): Promise<OptimizationResult>;\r\n  \r\n  /**\r\n   * 가비지 컬렉션 실행\r\n   */\r\n  forceGarbageCollection(): Promise<OptimizationResult>;\r\n  \r\n  /**\r\n   * 사용 가능한 실행 환경 확인\r\n   */\r\n  isNativeImplementationAvailable(): Promise<boolean>;\r\n}\r\n\r\nexport interface NativeGPUModule {\r\n  /**\r\n   * GPU 가속 설정\r\n   * @param enabled 활성화 여부\r\n   */\r\n  setGpuAcceleration(enabled: boolean): Promise<boolean>;\r\n  \r\n  /**\r\n   * GPU 정보 얻기\r\n   */\r\n  getGpuInfo(): Promise<{\r\n    available: boolean;\r\n    vendor?: string;\r\n    renderer?: string;\r\n    version?: string;\r\n    memorySize?: number;\r\n    isHardwareAccelerated: boolean;\r\n  }>;\r\n  \r\n  /**\r\n   * 하드웨어 가속 활성화 여부 확인\r\n   */\r\n  isHardwareAccelerationEnabled(): Promise<boolean>;\r\n}\r\n\r\nexport interface NativeUtils {\r\n  /**\r\n   * 시스템 환경 확인\r\n   */\r\n  getEnvironmentInfo(): Promise<{\r\n    platform: string;\r\n    architecture: string;\r\n    cpuCores: number;\r\n    totalMemory: number;\r\n    freeMemory: number;\r\n  }>;\r\n  \r\n  /**\r\n   * 작업 실행 시간 측정\r\n   * @param callback 측정할 작업\r\n   */\r\n  measurePerformance<T>(callback: () => T): Promise<{\r\n    result: T;\r\n    duration: number;\r\n  }>;\r\n}\r\n\r\nexport interface NativeModules {\r\n  memory: NativeMemoryModule;\r\n  gpu: NativeGPUModule;\r\n  utils: NativeUtils;\r\n}\r\n","/**\n * 네이티브 모듈 클라이언트 API\n *\n * 프론트엔드에서 네이티브 모듈 기능을 사용하기 위한 래퍼 함수들을 제공합니다.\n */\n\nimport type {\n  MemoryInfo,\n  OptimizationResult,\n  GCResult,\n  GpuComputationResult,\n  TaskResult,\n} from '@/types';\nimport { OptimizationLevel, NativeModuleStatus } from '@/types/native-module';\n\n// 윈도우 객체에 nativeModule 확장\ndeclare global {\n  interface Window {\n    nativeModule: {\n      getGpuInfo: () => Promise<NativeResponse<GpuInfo>>;\n      setGpuAcceleration: (enabled: boolean) => Promise<NativeResponse<boolean>>;\n      getMemoryInfo: () => Promise<NativeResponse<MemoryInfo>>;\n      optimizeMemory: (level?: OptimizationLevel) => Promise<NativeResponse<OptimizationResult>>;\n      forceGarbageCollection: () => Promise<NativeResponse<GCResult>>;\n      performGpuComputation: (\n        taskType: GpuTaskType,\n        params: Record<string, any>\n      ) => Promise<NativeResponse<any>>;\n    };\n  }\n}\n\n/**\n * 네이티브 모듈 응답 인터페이스\n */\ninterface NativeResponse<T = any> {\n  success: boolean;\n  error?: string;\n  timestamp: number;\n  data?: T;\n}\n\n/**\n * GPU 정보 인터페이스\n */\nexport interface GpuInfo {\n  name: string;\n  vendor: string;\n  renderer?: string;\n  driverInfo?: string;\n  deviceType?: string;\n  backend?: string;\n  available: boolean;\n  accelerationEnabled?: boolean;\n}\n\n/**\n * GPU 가속 상태 인터페이스\n */\nexport interface GpuAccelerationStatus {\n  available: boolean;\n  enabled: boolean;\n  info?: GpuInfo;\n}\n\n/**\n * GPU 작업 유형\n */\nexport enum GpuTaskType {\n  MatrixMultiplication = 'matrix',\n  TextAnalysis = 'text',\n  ImageProcessing = 'image',\n  DataAggregation = 'data',\n  PatternDetection = 'pattern',\n  TypingStatistics = 'typing',\n  Custom = 'custom',\n}\n\n// 상태 캐시\nlet moduleStatusCache: NativeModuleStatus | null = null;\nlet lastStatusCheck = 0;\nconst STATUS_CACHE_TTL = 10000; // 10초\n\n/**\n * 메모리 정보 조회\n * @returns 메모리 사용량 정보\n */\nexport const getMemoryInfo = async (): Promise<MemoryInfo | null> => {\n  try {\n    // 네이티브 모듈을 통해 메모리 정보 요청\n    const response = await window.nativeModule.getMemoryInfo();\n\n    if (!response.success || !response.data) {\n      console.error('메모리 정보를 가져오는 데 실패했습니다:', response.error);\n      return null;\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('메모리 정보를 가져오는 중 오류 발생:', error);\n    return null;\n  }\n};\n\n/**\n * 메모리 최적화 수행\n * @param level 최적화 레벨\n * @returns 최적화 결과\n */\nexport const optimizeMemory = async (\n  level: OptimizationLevel = OptimizationLevel.Medium\n): Promise<OptimizationResult | null> => {\n  try {\n    // 네이티브 모듈을 통해 메모리 최적화 요청\n    const response = await window.nativeModule.optimizeMemory(level);\n\n    if (!response.success || !response.data) {\n      console.error('메모리 최적화에 실패했습니다:', response.error);\n      return null;\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('메모리 최적화 중 오류 발생:', error);\n    return null;\n  }\n};\n\n/**\n * 가비지 컬렉션 강제 수행\n * @returns GC 결과\n */\nexport const forceGarbageCollection = async (): Promise<GCResult | null> => {\n  try {\n    // 네이티브 모듈을 통해 GC 요청\n    const response = await window.nativeModule.forceGarbageCollection();\n\n    if (!response.success || !response.data) {\n      console.error('가비지 컬렉션에 실패했습니다:', response.error);\n      return null;\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('가비지 컬렉션 중 오류 발생:', error);\n    return null;\n  }\n};\n\n/**\n * GPU 연산 작업 수행\n * @param taskType 작업 유형\n * @param params 작업 파라미터\n * @returns 연산 결과\n */\nexport const performGpuComputation = async (\n  taskType: GpuTaskType,\n  params: Record<string, any>\n): Promise<any | null> => {\n  try {\n    // 네이티브 모듈을 통해 GPU 연산 요청\n    const response = await window.nativeModule.performGpuComputation(taskType, params);\n\n    if (!response.success || !response.data) {\n      console.error(`GPU 연산(${taskType})에 실패했습니다:`, response.error);\n      return null;\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error(`GPU 연산(${taskType}) 중 오류 발생:`, error);\n    return null;\n  }\n};\n\n/**\n * GPU 정보 가져오기\n * @returns GPU 정보\n */\nexport const getGpuInfo = async (): Promise<GpuInfo | null> => {\n  try {\n    // 네이티브 모듈을 통해 GPU 정보 가져오기\n    const response = await window.nativeModule.getGpuInfo();\n\n    if (!response.success || !response.data) {\n      console.error('GPU 정보를 가져오는 데 실패했습니다:', response.error);\n      return null;\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('GPU 정보를 가져오는 중 오류 발생:', error);\n    return null;\n  }\n};\n\n/**\n * GPU 가속 설정\n * @param enabled 활성화 여부\n * @returns 설정 결과\n */\nexport const setGpuAcceleration = async (enabled: boolean): Promise<boolean> => {\n  try {\n    // 네이티브 모듈을 통해 GPU 가속 설정\n    const response = await window.nativeModule.setGpuAcceleration(enabled);\n\n    if (!response.success) {\n      console.error('GPU 가속 설정에 실패했습니다:', response.error);\n      return false;\n    }\n\n    return response.data || false;\n  } catch (error) {\n    console.error('GPU 가속 설정 중 오류 발생:', error);\n    return false;\n  }\n};\n\n/**\n * 네이티브 모듈 상태 조회\n * @returns 네이티브 모듈 상태 정보\n */\nexport async function getNativeModuleStatus(): Promise<NativeModuleStatus> {\n  // 캐시된 상태가 있으면 반환\n  if (moduleStatusCache && Date.now() - (moduleStatusCache.timestamp || 0) < 60000) {\n    return moduleStatusCache;\n  }\n\n  try {\n    // GPU 정보 요청으로 네이티브 모듈 상태 확인\n    const gpuInfo = await getGpuInfo();\n\n    // 성공적으로 응답을 받았으면 모듈이 사용 가능함\n    if (gpuInfo) {\n      // NativeResponse 형식에서 NativeModuleStatus 형식으로 변환\n      const result: NativeModuleStatus = {\n        available: true,\n        fallbackMode: false,\n        version: '1.0.0', // 네이티브 모듈 버전\n        info: gpuInfo,\n        timestamp: Date.now(),\n      };\n\n      // 상태 캐싱\n      moduleStatusCache = result;\n      return result;\n    }\n\n    // 응답 실패 시 기본 오류 상태 반환\n    const errorStatus: NativeModuleStatus = {\n      available: false,\n      fallbackMode: true,\n      version: null,\n      info: null,\n      timestamp: Date.now(),\n      error: '네이티브 모듈을 사용할 수 없습니다.',\n    };\n\n    moduleStatusCache = errorStatus;\n    return errorStatus;\n  } catch (error) {\n    console.error('네이티브 모듈 상태 조회 오류:', error);\n\n    const errorStatus: NativeModuleStatus = {\n      available: false,\n      fallbackMode: true,\n      version: null,\n      info: null,\n      timestamp: Date.now(),\n      error: error instanceof Error ? error.message : '알 수 없는 오류',\n    };\n\n    moduleStatusCache = errorStatus;\n    return errorStatus;\n  }\n}\n\n/**\n * 네이티브 모듈 사용 가능 여부 확인\n * @returns 사용 가능 여부\n */\nexport function isNativeModuleAvailable(): boolean {\n  return typeof window !== 'undefined' && !!window.nativeModule;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"page_appContainer__p4TtA\",\"mainContent\":\"page_mainContent__51TpB\",\"appTabs\":\"page_appTabs__dehwV\",\"tabButton\":\"page_tabButton__stR9X\",\"activeTab\":\"page_activeTab__kgdSK\",\"typingContainer\":\"page_typingContainer__Ltx96\",\"statsContainer\":\"page_statsContainer__15RXV\",\"historyContainer\":\"page_historyContainer__PhcIa\",\"monitorContainer\":\"page_monitorContainer__nzoP_\",\"debugButton\":\"page_debugButton__OpmNi\",\"debugActive\":\"page_debugActive__1OXf0\",\"debugPanel\":\"page_debugPanel__3hMsI\",\"debugPanelBottom\":\"page_debugPanelBottom__KC93m\",\"debugInfo\":\"page_debugInfo__i9tMu\",\"zenMode\":\"page_zenMode__IMTVJ\",\"headerDetectionArea\":\"page_headerDetectionArea__Mg4up\",\"navLinks\":\"page_navLinks__3Mchl\",\"navLink\":\"page_navLink__2S7dD\",\"dark-mode\":\"page_dark-mode__8RLxf\"};"],"names":["Toast","message","type","duration","onClose","visible","setVisible","useState","useEffect","timer","setTimeout","clearTimeout","div","className","styles","span","ToastContext","createContext","undefined","ToastProvider","children","toast","setToast","Provider","value","showToast","useToast","context","useContext","console","warn","formatTime","seconds","minutes","Math","floor","remainingSeconds","hours","remainingMinutes","getAverageSpeed","keyCount","time","round","TypingMonitor","React","browserCheckResultRef","stats","isTracking","onStartTracking","onStopTracking","onSaveStats","description","setDescription","lastAction","setLastAction","activeWebsiteTab","setActiveWebsiteTab","activeStatsTab","setActiveStatsTab","checkBrowserInfo","useCallback","window","electronAPI","getCurrentBrowserInfo","current","info","error","interval","setInterval","clearInterval","handleDescriptionChange","e","target","handleSave","handleToggleTracking","handleWebsiteTabChange","tab","handleStatsTabChange","websiteTabContent","useMemo","a","href","rel","statsTabContent","toLocaleString","typingTime","pages","toFixed","totalWords","totalChars","totalCharsNoSpace","accuracy","h2","button","onClick","strong","h3","browserName","name","isGoogleDocs","title","windowTitle","substring","length","p","textarea","onChange","placeholder","rows","disabled","trim","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","BarElement","Title","Tooltip","Legend","filterLogsForChart","sevenDaysAgo","Date","setDate","getDate","logs","filter","log","timestamp","slice","TypingChart","isDarkMode","setIsDarkMode","chartRefs","useRef","isMountedRef","checkDarkMode","document","documentElement","isDark","classList","contains","body","handleDarkModeChange","event","detail","darkMode","addEventListener","observer","MutationObserver","observe","attributes","attributeFilter","disconnect","removeEventListener","forEach","chart","destroy","gc","filteredLogs","Array","isArray","getChartOptions","responsive","maintainAspectRatio","animation","elements","point","radius","hoverRadius","line","tension","devicePixelRatio","plugins","legend","position","labels","color","font","size","display","text","weight","tooltip","enabled","backgroundColor","titleColor","bodyColor","borderColor","borderWidth","callbacks","label","raw","scales","x","ticks","maxTicksLimit","grid","y","tickLength","chartData","keyCountData","timeData","speedData","wordData","charData","dataMap","Map","i","parse","date","toLocaleDateString","has","set","totalKeyCount","totalTime","data","get","key_count","typing_time","contentLength","content","ceil","sortedDates","from","keys","sort","b","getTime","map","parts","split","d","createChartData","bgColor","datasets","pointBackgroundColor","fill","speedChartData","shouldRenderCharts","setShouldRenderCharts","setChartRef","instance","push","Line","options","redraw","ref","Bar","TabNavigation","memo","activeTab","onTabChange","onDebugToggle","debugMode","style","pointerEvents","theme","toggleTheme","setDarkMode","useTheme","ThemeContext","WindowControls","api","handleMinimize","windowControl","aria-label","MinimizeIcon","handleMaximize","MaximizeIcon","handleClose","CloseIcon","AppHeader","isVisible","onVisibilityChange","autoHide","visibility","setVisibility","lastMouseY","headerRef","timeoutRef","mouseInsideHeader","handleMouseMove","currentY","clientY","handleHeaderMouseEnter","handleHeaderMouseLeave","headerElement","handleClick","aria-hidden","Image","src","alt","width","height","onError","AppFooter","year","getFullYear","footer","MainLayout","windowMode","isHeaderVisible","headerDetectionRef","zIndex","nav","ul","li","main","DebugPanel","logsCount","ConfirmDialog","isOpen","onConfirm","onCancel","confirmText","cancelText","handleKeyDown","key","autoFocus","SaveConfirmDialog","settingsType","Settings","onSave","initialSettings","onDarkModeChange","onWindowModeChange","settings","setSettings","enabledCategories","docs","office","coding","sns","autoStartMonitoring","minimizeToTray","showTrayNotifications","reduceMemoryInBackground","enableMiniView","useHardwareAcceleration","processingMode","maxMemoryThreshold","resumeAfterIdle","needsRestart","setNeedsRestart","showSaveConfirm","setShowSaveConfirm","apiDebugInfo","setApiDebugInfo","showDebugInfo","setShowDebugInfo","add","remove","handleCategoryToggle","prev","category","handleWindowModeChange","mode","handleSettingChange","handleRestartClick","apiInfo","Object","join","restartApp","showRestartPrompt","electron","String","input","checked","handleAutoStartToggle","handleDarkModeToggle","newDarkMode","handleMinimizeToTrayToggle","handleShowTrayNotificationsToggle","small","handleReduceMemoryToggle","handleMiniViewToggle","handleHardwareAccelerationToggle","newValue","toggleDebugInfo","h4","pre","select","option","parseInt","min","max","handleSaveSettings","JSON","stringify","confirmSaveSettings","confirm","cancelSaveSettings","RestartLoading","dots","setDots","progress","setProgress","dotsInterval","progressInterval","createDummyElectronAPI","action","onTypingStatsUpdate","onStatsSaved","startTracking","stopTracking","saveStats","Promise","resolve","loadSettings","saveSettings","getDebugInfo","currentStats","startTime","lastActiveTime","currentWindow","currentBrowser","platform","electronVersion","nodeVersion","success","setWindowMode","getWindowMode","checkAutoStart","onAutoTrackingStarted","onSwitchTab","onOpenSaveStatsDialog","requestStatsUpdate","onMiniViewStatsUpdate","toggleMiniView","updateTraySettings","quitApp","toggleWindow","onBackgroundModeChange","onTrayCommand","closeWindow","getDarkMode","applyDarkModeToAllElements","querySelectorAll","el","defaultSettings","optimizeImageResources","images","optimizedCount","img","rect","imgElement","getBoundingClientRect","top","innerHeight","bottom","left","innerWidth","right","startsWith","originalSrc","setAttribute","IntersectionObserver","entries","entry","isIntersecting","targetImg","getAttribute","removeAttribute","rootMargin","element","hasAttribute","htmlElement","HomeContent","useElectronApi","setApi","isElectron","useSettings","saveSettingsToLocalStorage","localStorage","setItem","settingsToSave","loadSettingsFromLocalStorage","savedSettings","getItem","parsedSettings","completeSettings","newSettings","savePromise","result","timeoutPromise","_","reject","race","darkModeEvent","CustomEvent","dispatchEvent","handleBeforeUnload","handleTabChange","toggleDebugMode","useTabNavigation","initialTab","setActiveTab","setDebugMode","useAutoHideHeader","setIsHeaderVisible","autoHideTimeoutRef","isAutoHideMode","passive","capture","setHeaderVisibility","typingLogs","isLoading","_isLoading","displayStats","handleStartTracking","handleStopTracking","handleSaveStats","currentStatsRef","fetchLogs","_fetchLogs","useTypingStats","setLogs","setIsLoading","setIsTracking","setError","eventsCleanupRef","intervalsRef","setDisplayStats","updateInterval","limit","MAX_LOGS_TO_LOAD","response","fetch","ok","status","statusText","contentType","headers","includes","json","optimizedLogs","id","created_at","window_title","browser_name","total_chars","total_words","saveToDatabase","record","method","recordData","toString","toISOString","initializeEventListeners","cleanupFunctions","cleanup","currentLogs","setCurrentLogs","memoryManager","useMemoryManagement","checkInterval","memoryThreshold","onClearLogs","memoryWarningShownRef","lastCleanupTimeRef","checkMemoryUsage","performance","memory","memoryInfo","usedHeapSize","usedJSHeapSize","totalHeapSize","totalJSHeapSize","percentUsed","now","CLEANUP_COOLDOWN","__memoryOptimizer","optimizeMemory","memoryCheckInterval","handleVisibilityChange","visibilityState","cleanupMemory","addInterval","clearIntervals","catch","err","requestGC","imageOptimizationInterval","isRestarting","setIsRestarting","unsubscribe","onShowRestartLoading","timeout","renderContent","fallback","maxWidth","margin","TypingAnalyzer","_isTracking","safeStats","defaultStats","available","loading","computeWithGpu","toggleGpuAcceleration","useNativeGpu","gpuInfo","setGpuInfo","setAvailable","setEnabled","setLoading","lastComputationResult","setLastComputationResult","fetchGpuInfo","getGpuInfo","accelerationEnabled","Error","enable","setGpuAcceleration","taskType","performGpuComputation","computation_type","duration_ms","setResult","useGpuAcceleration","setUseGpuAcceleration","analyzeTyping","computeResult","result_summary","jsResult","analyzeTypingWithJS","handleToggleGpu","newState","wpm","performance_index","consistency_score","fatigue_analysis","score","recommendation","consistency","time_factor","intensity_factor","TypingAnalyzerWrapper","setStats","_isElectron","setIsElectron","hasApi","mockStats","onStatsUpdate","newStats","requestCurrentStats","getTrackingStatus","then","fallbackStats","NativeModuleTest","dynamic","ssr","Home","mounted","setMounted","h1","OptimizationLevel","getMemoryInfo","nativeModule","level","Medium","forceGarbageCollection","params"],"sourceRoot":"","ignoreList":[]}