{"version":3,"file":"static/chunks/app/pages/analysis/page-0a4fad0c07668f8a.js","mappings":"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","sources":["webpack://_N_E/./src/app/pages/analysis/page.module.css","webpack://_N_E/?f940","webpack://_N_E/./src/app/components/LogAnalysisPanel.module.css","webpack://_N_E/./src/app/utils/enum-converters.ts","webpack://_N_E/./src/app/utils/memory/optimizer.ts","webpack://_N_E/./src/app/utils/performance-metrics.ts","webpack://_N_E/./src/app/utils/memory/logger.ts","webpack://_N_E/./src/app/utils/log-utils.ts","webpack://_N_E/./src/app/utils/log-learning.ts","webpack://_N_E/./src/app/utils/format-utils.ts","webpack://_N_E/./src/app/components/LogAnalysisPanel.tsx","webpack://_N_E/./src/app/pages/analysis/page.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"page_container__Oa_Yd\",\"header\":\"page_header__oX1IH\",\"main\":\"page_main__HYnnv\",\"helpSection\":\"page_helpSection__urTHs\",\"helpContent\":\"page_helpContent__XR3c6\",\"actions\":\"page_actions__aQlQc\",\"secondaryButton\":\"page_secondaryButton__QCv7s\",\"root\":\"page_root__QiYEX\"};","import(/* webpackMode: \"eager\" */ \"C:\\\\Users\\\\user\\\\Desktop\\\\loop_2\\\\src\\\\app\\\\pages\\\\analysis\\\\page.tsx\");\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logAnalysisPanel\":\"LogAnalysisPanel_logAnalysisPanel__oyS8m\",\"header\":\"LogAnalysisPanel_header__ntVim\",\"lastAnalysisTime\":\"LogAnalysisPanel_lastAnalysisTime__fsF3j\",\"controls\":\"LogAnalysisPanel_controls__uA_Zd\",\"mainButton\":\"LogAnalysisPanel_mainButton__p9rNy\",\"learningButton\":\"LogAnalysisPanel_learningButton__91G6_\",\"errorMessage\":\"LogAnalysisPanel_errorMessage__XQM51\",\"loadingIndicator\":\"LogAnalysisPanel_loadingIndicator___8OQc\",\"spinner\":\"LogAnalysisPanel_spinner__2cxhW\",\"spin\":\"LogAnalysisPanel_spin__HYfFK\",\"tabNavigation\":\"LogAnalysisPanel_tabNavigation__pveWH\",\"tabButton\":\"LogAnalysisPanel_tabButton__ZFnuT\",\"activeTab\":\"LogAnalysisPanel_activeTab__wJN0E\",\"resultSection\":\"LogAnalysisPanel_resultSection__Cy9Qz\",\"noResults\":\"LogAnalysisPanel_noResults__8IaJP\",\"insightsSection\":\"LogAnalysisPanel_insightsSection__RzhLb\",\"metricsSection\":\"LogAnalysisPanel_metricsSection__PDTFd\",\"recommendationsSection\":\"LogAnalysisPanel_recommendationsSection__W53ft\",\"insightItem\":\"LogAnalysisPanel_insightItem__z_dHX\",\"peakHoursChart\":\"LogAnalysisPanel_peakHoursChart__7yAvM\",\"activeHoursChart\":\"LogAnalysisPanel_activeHoursChart__6NKUe\",\"errorHoursChart\":\"LogAnalysisPanel_errorHoursChart__PXG0_\",\"peakHourBar\":\"LogAnalysisPanel_peakHourBar__Ao4lA\",\"activeHourBar\":\"LogAnalysisPanel_activeHourBar__Uwapg\",\"errorHourBar\":\"LogAnalysisPanel_errorHourBar__lml6X\",\"peakHourLabel\":\"LogAnalysisPanel_peakHourLabel__yXmte\",\"activeHourLabel\":\"LogAnalysisPanel_activeHourLabel__Vm7ZA\",\"errorHourLabel\":\"LogAnalysisPanel_errorHourLabel__YHKIA\",\"peakHourValue\":\"LogAnalysisPanel_peakHourValue__873hu\",\"activeHourValue\":\"LogAnalysisPanel_activeHourValue__K6F3f\",\"errorHourValue\":\"LogAnalysisPanel_errorHourValue__WfPSg\",\"metricsGrid\":\"LogAnalysisPanel_metricsGrid__ItMfT\",\"metricItem\":\"LogAnalysisPanel_metricItem__aFhJB\",\"metricLabel\":\"LogAnalysisPanel_metricLabel__7En0A\",\"metricValue\":\"LogAnalysisPanel_metricValue__hwk1l\",\"recommendationList\":\"LogAnalysisPanel_recommendationList__3i7br\",\"recommendationItem\":\"LogAnalysisPanel_recommendationItem__i_n1b\",\"wordCloud\":\"LogAnalysisPanel_wordCloud__dpTf_\",\"wordItem\":\"LogAnalysisPanel_wordItem__I7IQy\",\"errorsList\":\"LogAnalysisPanel_errorsList__z4AlY\",\"errorItem\":\"LogAnalysisPanel_errorItem__pXK0v\",\"errorType\":\"LogAnalysisPanel_errorType__X9Q21\",\"errorCount\":\"LogAnalysisPanel_errorCount__tJ7HM\",\"errorBar\":\"LogAnalysisPanel_errorBar__IQe6W\",\"errorExample\":\"LogAnalysisPanel_errorExample__e0ghi\",\"errorExampleLabel\":\"LogAnalysisPanel_errorExampleLabel__bH9TT\",\"errorExampleContent\":\"LogAnalysisPanel_errorExampleContent__90lxt\",\"sessionsList\":\"LogAnalysisPanel_sessionsList__49n41\",\"sessionIncrease\":\"LogAnalysisPanel_sessionIncrease__E4TUk\",\"overallSummary\":\"LogAnalysisPanel_overallSummary__IczVW\",\"summaryStats\":\"LogAnalysisPanel_summaryStats__dPN8j\",\"summaryStat\":\"LogAnalysisPanel_summaryStat__3W5FW\",\"summaryStatLabel\":\"LogAnalysisPanel_summaryStatLabel__6P0lq\",\"summaryStatValue\":\"LogAnalysisPanel_summaryStatValue__BG_t2\",\"actionButtons\":\"LogAnalysisPanel_actionButtons__YM7Ce\"};","/**\r\n * ìµœì í™” ë ˆë²¨ ì—´ê±°í˜• ë³€í™˜ ìœ í‹¸ë¦¬í‹°\r\n */\r\nimport {\r\n  OptimizationLevel,\r\n  NativeOptimizationLevel,\r\n  APP_TO_NATIVE_LEVEL_MAP,\r\n  NATIVE_TO_APP_LEVEL_MAP,\r\n  MemoryEventType,\r\n  MemoryUsageLevel,\r\n  GpuTaskType\r\n} from '@/types';\r\n\r\n/**\r\n * ìµœì í™” ë ˆë²¨ ë¬¸ìì—´ì„ ì—´ê±°í˜•ìœ¼ë¡œ ë³€í™˜\r\n * @param level ë ˆë²¨ ë¬¸ìì—´ ë˜ëŠ” ìˆ«ì\r\n */\r\nexport function parseOptimizationLevel(level: string | number): OptimizationLevel {\r\n  if (typeof level === 'number') {\r\n    if (level >= 0 && level <= 5) {\r\n      return level as OptimizationLevel;\r\n    }\r\n    return OptimizationLevel.NONE;\r\n  }\r\n\r\n  switch (level.toLowerCase()) {\r\n    case 'none':\r\n    case 'normal':\r\n      return OptimizationLevel.NONE;\r\n    case 'low':\r\n      return OptimizationLevel.LOW;\r\n    case 'medium':\r\n      return OptimizationLevel.MEDIUM;\r\n    case 'high':\r\n      return OptimizationLevel.HIGH;\r\n    case 'aggressive':\r\n    case 'critical':\r\n      return OptimizationLevel.AGGRESSIVE;\r\n    case 'extreme':\r\n      return OptimizationLevel.EXTREME;\r\n    default:\r\n      // ìˆ«ì ë¬¸ìì—´ì¸ ê²½ìš° ë³€í™˜ ì‹œë„\r\n      const num = parseInt(level, 10);\r\n      if (!isNaN(num) && num >= 0 && num <= 5) {\r\n        return num as OptimizationLevel;\r\n      }\r\n      return OptimizationLevel.NONE;\r\n  }\r\n}\r\n\r\n/**\r\n * ìµœì í™” ë ˆë²¨ì„ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ ë¬¸ìì—´ë¡œ ë³€í™˜\r\n * @param level ìµœì í™” ë ˆë²¨\r\n */\r\nexport function formatOptimizationLevel(level: OptimizationLevel): string {\r\n  switch (level) {\r\n    case OptimizationLevel.NONE:\r\n    case OptimizationLevel.NORMAL:\r\n      return 'ì¼ë°˜';\r\n    case OptimizationLevel.LOW:\r\n      return 'ë‚®ìŒ';\r\n    case OptimizationLevel.MEDIUM:\r\n      return 'ì¤‘ê°„';\r\n    case OptimizationLevel.HIGH:\r\n      return 'ë†’ìŒ';\r\n    case OptimizationLevel.AGGRESSIVE:\r\n    case OptimizationLevel.CRITICAL:\r\n      return 'ìœ„í—˜';\r\n    case OptimizationLevel.EXTREME:\r\n      return 'ë§¤ìš° ìœ„í—˜';\r\n    default:\r\n      return 'ì•Œ ìˆ˜ ì—†ìŒ';\r\n  }\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì´ë²¤íŠ¸ íƒ€ì… í¬ë§·íŒ…\r\n */\r\nexport function formatMemoryEventType(eventType: MemoryEventType): string {\r\n  switch (eventType) {\r\n    case MemoryEventType.PERIODIC_CHECK:\r\n      return 'ì£¼ê¸°ì  í™•ì¸';\r\n    case MemoryEventType.PAGE_NAVIGATION:\r\n      return 'í˜ì´ì§€ íƒìƒ‰';\r\n    case MemoryEventType.OPTIMIZATION:\r\n      return 'ìµœì í™”';\r\n    case MemoryEventType.COMPONENT_MOUNT:\r\n      return 'ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸';\r\n    case MemoryEventType.COMPONENT_UNMOUNT:\r\n      return 'ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸';\r\n    case MemoryEventType.USER_ACTION:\r\n      return 'ì‚¬ìš©ì ì•¡ì…˜';\r\n    case MemoryEventType.GARBAGE_COLLECTION:\r\n      return 'ê°€ë¹„ì§€ ì»¬ë ‰ì…˜';\r\n    case MemoryEventType.RESOURCE_LOADING:\r\n      return 'ë¦¬ì†ŒìŠ¤ ë¡œë”©';\r\n    case MemoryEventType.ERROR:\r\n      return 'ì˜¤ë¥˜';\r\n    case MemoryEventType.WARNING:\r\n      return 'ê²½ê³ ';\r\n    case MemoryEventType.CUSTOM:\r\n      return 'ì‚¬ìš©ì ì •ì˜';\r\n    default:\r\n      return 'ì•Œ ìˆ˜ ì—†ìŒ';\r\n  }\r\n}\r\n\r\n/**\r\n * GPU ì‘ì—… íƒ€ì… ì •ê·œí™”\r\n */\r\nexport function normalizeGpuTaskType(taskType: string | GpuTaskType): string {\r\n  if (typeof taskType === 'number') {\r\n    // ì—´ê±°í˜•ì—ì„œ ë¬¸ìì—´ë¡œ ë³€í™˜\r\n    switch (taskType) {\r\n      case GpuTaskType.MATRIX_MULTIPLICATION:\r\n        return 'matrix';\r\n      case GpuTaskType.TEXT_ANALYSIS:\r\n        return 'text';\r\n      case GpuTaskType.PATTERN_DETECTION:\r\n        return 'pattern';\r\n      case GpuTaskType.IMAGE_PROCESSING:\r\n        return 'image';\r\n      case GpuTaskType.DATA_AGGREGATION:\r\n        return 'data';\r\n      case GpuTaskType.TYPING_STATISTICS:\r\n        return 'typing';\r\n      case GpuTaskType.CUSTOM:\r\n        return 'custom';\r\n      default:\r\n        return 'matrix'; // ê¸°ë³¸ê°’\r\n    }\r\n  }\r\n\r\n  // ì´ë¯¸ ë¬¸ìì—´ì¸ ê²½ìš° í‘œì¤€í™”\r\n  switch (taskType.toLowerCase()) {\r\n    case 'matrix':\r\n    case 'matrixmultiplication':\r\n    case 'matrix-multiplication':\r\n      return 'matrix';\r\n    case 'text':\r\n    case 'textanalysis':\r\n    case 'text-analysis':\r\n      return 'text';\r\n    case 'pattern':\r\n    case 'patterndetection':\r\n    case 'pattern-detection':\r\n      return 'pattern';\r\n    case 'image':\r\n    case 'imageprocessing':\r\n    case 'image-processing':\r\n      return 'image';\r\n    case 'data':\r\n    case 'dataaggregation':\r\n    case 'data-aggregation':\r\n      return 'data';\r\n    case 'typing':\r\n    case 'typingstatistics':\r\n    case 'typing-statistics':\r\n      return 'typing';\r\n    case 'custom':\r\n      return 'custom';\r\n    default:\r\n      return 'matrix'; // ê¸°ë³¸ê°’\r\n  }\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë ˆë²¨ ê°€ì ¸ì˜¤ê¸°\r\n */\r\nexport function getMemoryUsageLevel(percentUsed: number): MemoryUsageLevel {\r\n  if (percentUsed >= 90) {\r\n    return MemoryUsageLevel.CRITICAL;\r\n  } else if (percentUsed >= 70) {\r\n    return MemoryUsageLevel.HIGH;\r\n  } else if (percentUsed >= 50) {\r\n    return MemoryUsageLevel.MEDIUM;\r\n  } else {\r\n    return MemoryUsageLevel.LOW;\r\n  }\r\n}\r\n\r\n/**\r\n * ì• í”Œë¦¬ì¼€ì´ì…˜ OptimizationLevelì„ ë„¤ì´í‹°ë¸Œ OptimizationLevelë¡œ ë³€í™˜\r\n */\r\nexport function toNativeOptimizationLevel(level: OptimizationLevel): NativeOptimizationLevel {\r\n  // ë§¤í•‘ í…Œì´ë¸”ì—ì„œ ë°”ë¡œ ì¡°íšŒ (ë” ì•ˆì „í•˜ê³  ì§ê´€ì ì„)\r\n  const nativeLevel = APP_TO_NATIVE_LEVEL_MAP[level];\r\n\r\n  // ë§¤í•‘ í…Œì´ë¸”ì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ê°’ ë°˜í™˜\r\n  if (nativeLevel === undefined) {\r\n    console.warn(`ì•Œ ìˆ˜ ì—†ëŠ” ìµœì í™” ë ˆë²¨ (${level}), ê¸°ë³¸ê°’ ì‚¬ìš©`);\r\n    return NativeOptimizationLevel.Medium;\r\n  }\r\n\r\n  return nativeLevel;\r\n}\r\n\r\n/**\r\n * ë„¤ì´í‹°ë¸Œ OptimizationLevelì„ ì• í”Œë¦¬ì¼€ì´ì…˜ OptimizationLevelë¡œ ë³€í™˜\r\n */\r\nexport function toAppOptimizationLevel(level: NativeOptimizationLevel): OptimizationLevel {\r\n  // ë§¤í•‘ í…Œì´ë¸”ì—ì„œ ë°”ë¡œ ì¡°íšŒ (ë” ì•ˆì „í•˜ê³  ì§ê´€ì ì„)\r\n  const appLevel = NATIVE_TO_APP_LEVEL_MAP[level];\r\n\r\n  // ë§¤í•‘ í…Œì´ë¸”ì— ì—†ëŠ” ê²½ìš° ê¸°ë³¸ê°’ ë°˜í™˜\r\n  if (appLevel === undefined) {\r\n    console.warn(`ì•Œ ìˆ˜ ì—†ëŠ” ë„¤ì´í‹°ë¸Œ ìµœì í™” ë ˆë²¨ (${level}), ê¸°ë³¸ê°’ ì‚¬ìš©`);\r\n    return OptimizationLevel.MEDIUM;\r\n  }\r\n\r\n  return appLevel as OptimizationLevel;\r\n}\r\n\r\n/**\r\n * ìˆ«ìë¥¼ ì ì ˆí•œ ìµœì í™” ë ˆë²¨ë¡œ ì•ˆì „í•˜ê²Œ ë³€í™˜\r\n */\r\nexport function safeOptimizationLevel(level: number): OptimizationLevel {\r\n  switch (level) {\r\n    case 0:\r\n      return OptimizationLevel.NONE;\r\n    case 1:\r\n      return OptimizationLevel.LOW;\r\n    case 2:\r\n      return OptimizationLevel.MEDIUM;\r\n    case 3:\r\n      return OptimizationLevel.HIGH;\r\n    case 4:\r\n      return OptimizationLevel.AGGRESSIVE;\r\n    case 5:\r\n      return OptimizationLevel.EXTREME;\r\n    default:\r\n      console.warn(`ìœ íš¨í•˜ì§€ ì•Šì€ ìµœì í™” ë ˆë²¨ (${level}), ê¸°ë³¸ê°’ ì‚¬ìš©`);\r\n      return OptimizationLevel.MEDIUM;\r\n  }\r\n}\r\n\r\n/**\r\n * íƒ€ì… ë³€í™˜ ìœ í‹¸ë¦¬í‹° - ë„¤ì´í‹°ë¸Œ ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ì•± ë©”ëª¨ë¦¬ ì •ë³´ë¡œ ë³€í™˜\r\n */\r\nexport function convertNativeMemoryInfo(nativeInfo: any): any {\r\n  if (!nativeInfo) return null;\r\n\r\n  return {\r\n    timestamp: nativeInfo.timestamp || Date.now(),\r\n    heap_used: nativeInfo.heap_used,\r\n    heapUsed: nativeInfo.heap_used,\r\n    heap_total: nativeInfo.heap_total,\r\n    heapTotal: nativeInfo.heap_total,\r\n    heap_used_mb: nativeInfo.heap_used_mb,\r\n    heapUsedMB: nativeInfo.heap_used_mb,\r\n    rss: nativeInfo.rss,\r\n    rss_mb: nativeInfo.rss_mb,\r\n    rssMB: nativeInfo.rss_mb,\r\n    percent_used: nativeInfo.percent_used,\r\n    percentUsed: nativeInfo.percent_used,\r\n    heap_limit: nativeInfo.heap_limit,\r\n    heapLimit: nativeInfo.heap_limit\r\n  };\r\n}\r\n\r\n/**\r\n * íƒ€ì… ë³€í™˜ ìœ í‹¸ë¦¬í‹° - ë„¤ì´í‹°ë¸Œ GC ê²°ê³¼ë¥¼ ì•± GC ê²°ê³¼ë¡œ ë³€í™˜\r\n */\r\nexport function convertNativeGCResult(nativeResult: any): any {\r\n  if (!nativeResult) return null;\r\n\r\n  return {\r\n    success: nativeResult.success,\r\n    timestamp: nativeResult.timestamp || Date.now(),\r\n    freedMemory: nativeResult.freed_memory,\r\n    freed_memory: nativeResult.freed_memory,\r\n    freedMB: nativeResult.freed_mb,\r\n    freed_mb: nativeResult.freed_mb,\r\n    error: nativeResult.error\r\n  };\r\n}\r\n\r\n/**\r\n * ìµœì í™” ë ˆë²¨ ë³€í™˜ í•¨ìˆ˜ë“¤\r\n */\r\nexport function getOptimizationLevelFromNumber(level: number): OptimizationLevel {\r\n  switch (level) {\r\n    case 0:\r\n      return OptimizationLevel.NONE;\r\n    case 1:\r\n      return OptimizationLevel.LOW;\r\n    case 2:\r\n      return OptimizationLevel.MEDIUM;\r\n    case 3:\r\n      return OptimizationLevel.HIGH;\r\n    case 4:\r\n      return OptimizationLevel.AGGRESSIVE;\r\n    default:\r\n      return OptimizationLevel.MEDIUM;\r\n  }\r\n}\r\n\r\nexport function getOptimizationLevelFromString(level: string): OptimizationLevel {\r\n  switch (level.toLowerCase()) {\r\n    case 'none':\r\n      return OptimizationLevel.NONE;\r\n    case 'low':\r\n      return OptimizationLevel.LOW;\r\n    case 'medium':\r\n      return OptimizationLevel.MEDIUM;\r\n    case 'high':\r\n      return OptimizationLevel.HIGH;\r\n    case 'aggressive':\r\n      return OptimizationLevel.AGGRESSIVE;\r\n    default:\r\n      return OptimizationLevel.MEDIUM;\r\n  }\r\n}\r\n\r\n/**\r\n * ì¸ë±ìŠ¤ ì‹ì´ 'number' í˜•ì‹ì´ ì•„ë‹ˆë¯€ë¡œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ ìˆ˜ì •\r\n */\r\nexport function getOptimizationLevelName(level: OptimizationLevel): string {\r\n  // switch ë¬¸ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ì¤‘ë³µ ì†ì„± ë¬¸ì œ í•´ê²°\r\n  switch (level) {\r\n    case OptimizationLevel.NONE:\r\n    case OptimizationLevel.NORMAL:  // NONEê³¼ ë™ì¼í•œ ê°’\r\n      return 'ì—†ìŒ';\r\n    case OptimizationLevel.LOW:\r\n      return 'ë‚®ìŒ';\r\n    case OptimizationLevel.MEDIUM:\r\n      return 'ì¤‘ê°„';\r\n    case OptimizationLevel.HIGH:\r\n      return 'ë†’ìŒ';\r\n    case OptimizationLevel.AGGRESSIVE:\r\n    case OptimizationLevel.CRITICAL:  // AGGRESSIVEì™€ ë™ì¼í•œ ê°’\r\n      return 'ì ê·¹ì ';\r\n    case OptimizationLevel.EXTREME:\r\n      return 'ë§¤ìš° ì ê·¹ì ';\r\n    default:\r\n      return 'ì¤‘ê°„';\r\n  }\r\n}\r\n","/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” ì½”ì–´ ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ì´ ëª¨ë“ˆì€ ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ê¸°ë°˜ ìµœì í™” í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\r\n * ëª¨ë“  ìµœì í™” ì‘ì—…ì€ Rustë¡œ êµ¬í˜„ëœ ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì„ í†µí•´ ìˆ˜í–‰ë©ë‹ˆë‹¤.\r\n */\r\n\r\nimport { requestNativeMemoryOptimization } from '../native-memory-bridge';\r\nimport { suggestGarbageCollection, requestGC } from './gc-utils';\r\nimport { OptimizationLevel as AppOptimizationLevel } from '@/types';\r\nimport { OptimizationLevel as NativeOptimizationLevel } from '@/types/native-module';\r\nimport { toNativeOptimizationLevel } from '../enum-converters';\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” ìˆ˜í–‰ í•¨ìˆ˜ (ë‚´ë¶€ êµ¬í˜„)\r\n * ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì„ í†µí•´ ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\r\n * \r\n * @param {boolean} aggressive ì ê·¹ì  ìµœì í™” ì—¬ë¶€\r\n * @returns {Promise<boolean>} ì„±ê³µ ì—¬ë¶€\r\n */\r\nexport async function internalOptimizeMemory(aggressive: boolean = false): Promise<boolean> {\r\n  try {\r\n    // ì ì ˆí•œ ìµœì í™” ë ˆë²¨ ì„ íƒ\r\n    const appLevel = aggressive ? AppOptimizationLevel.HIGH : AppOptimizationLevel.MEDIUM;\r\n    // ëª…ì‹œì  ë³€í™˜ í•¨ìˆ˜ ì‚¬ìš©\r\n    const nativeLevel = toNativeOptimizationLevel(appLevel);\r\n    \r\n    // ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ìµœì í™” í˜¸ì¶œ\r\n    const result = await requestNativeMemoryOptimization(nativeLevel, aggressive);\r\n    \r\n    if (!result) {\r\n      console.warn('ë„¤ì´í‹°ë¸Œ ë©”ëª¨ë¦¬ ìµœì í™” ì‹¤íŒ¨');\r\n      return false;\r\n    }\r\n    \r\n    // ë¸Œë¼ìš°ì €ì— GC íŒíŠ¸ ì œê³µ\r\n    suggestGarbageCollection();\r\n    \r\n    // Electron ë©”ì¸ í”„ë¡œì„¸ìŠ¤ì— ë©”ëª¨ë¦¬ ìµœì í™” ìš”ì²­ (ì§€ì›ë˜ëŠ” ê²½ìš°)\r\n    if (window.electronAPI && window.electronAPI.optimizeMemory) {\r\n      window.electronAPI.optimizeMemory(aggressive);\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('ë©”ëª¨ë¦¬ ìµœì í™” ì¤‘ ì˜¤ë¥˜:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” ìˆ˜í–‰ í•¨ìˆ˜ (ê³µê°œ API)\r\n * \r\n * @param {boolean} deepCleanup ì‹¬ì¸µ ì •ë¦¬ ì—¬ë¶€\r\n * @returns {Promise<boolean>} ì„±ê³µ ì—¬ë¶€\r\n */\r\nexport async function optimizeMemory(deepCleanup = false): Promise<boolean> {\r\n  try {\r\n    // ì ê·¹ì ì¸ í”Œë˜ê·¸ ì„¤ì •\r\n    const aggressive = deepCleanup;\r\n    \r\n    // ë‚´ë¶€ ìµœì í™” í•¨ìˆ˜ í˜¸ì¶œ\r\n    const result = await internalOptimizeMemory(aggressive);\r\n    \r\n    // GC ìš”ì²­\r\n    await requestGC(deepCleanup);\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    console.error('ë©”ëª¨ë¦¬ ìµœì í™” ì˜¤ë¥˜:', error);\r\n    return false;\r\n  }\r\n}\r\n","/**\r\n * ì„±ëŠ¥ ì¸¡ì • ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ì´ ëª¨ë“ˆì€ ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆê³¼ JavaScript êµ¬í˜„ ê°„ì˜ ì„±ëŠ¥ì„ ë¹„êµí•˜ê¸° ìœ„í•œ\r\n * ë„êµ¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì¸¡ì • ê²°ê³¼ëŠ” ë¡œê·¸ì™€ ëŒ€ì‹œë³´ë“œì— í‘œì‹œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n */\r\n\r\nimport { OptimizationLevel } from '@/types';\r\nimport { toNativeOptimizationLevel } from './enum-converters';\r\nimport { requestNativeMemoryOptimization } from './native-memory-bridge';\r\nimport { internalOptimizeMemory } from './memory/optimizer';\r\nimport { getMemoryInfo } from './memory/memory-info';\r\nimport { getNativeModuleStatus } from './nativeModuleClient';\r\n\r\n// OptimizationLevel ìƒìˆ˜ ê°’ ì •ì˜ (AppOptimizationLevel íƒ€ì…ì„ ê°’ìœ¼ë¡œ ëŒ€ì²´)\r\nconst OPTIMIZATION_LEVEL = {\r\n  NORMAL: 0,\r\n  LOW: 1,\r\n  MEDIUM: 2,\r\n  HIGH: 3,\r\n  EXTREME: 4\r\n} as const;\r\n\r\n// ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼ ì¸í„°í˜ì´ìŠ¤\r\nexport interface PerformanceResult {\r\n  operationName: string;\r\n  nativeImplementation: {\r\n    executionTime: number;\r\n    success: boolean;\r\n    error?: string;\r\n  };\r\n  jsImplementation: {\r\n    executionTime: number;\r\n    success: boolean;\r\n    error?: string;\r\n  };\r\n  speedupFactor: number;\r\n  timestamp: number;\r\n  memoryBefore: any;\r\n  memoryAfter: any;\r\n  memoryDifference: number;\r\n}\r\n\r\n// ì„±ëŠ¥ ì¸¡ì • ì´ë ¥\r\nconst performanceHistory: PerformanceResult[] = [];\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” ì„±ëŠ¥ ë¹„êµ ì‹¤í–‰\r\n * @param level ìµœì í™” ë ˆë²¨\r\n * @param emergency ê¸´ê¸‰ ëª¨ë“œ ì—¬ë¶€\r\n * @returns Promise<PerformanceResult> ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼\r\n */\r\nexport async function benchmarkMemoryOptimization(\r\n  level: number = OPTIMIZATION_LEVEL.MEDIUM,\r\n  emergency: boolean = false\r\n): Promise<PerformanceResult> {\r\n  // ì´ˆê¸° ë©”ëª¨ë¦¬ ìƒíƒœ ê¸°ë¡\r\n  const memoryBefore = await getMemoryInfo() || { heapUsedMB: 0 };\r\n  \r\n  // ë„¤ì´í‹°ë¸Œ êµ¬í˜„ í…ŒìŠ¤íŠ¸\r\n  let nativeResult = {\r\n    executionTime: 0,\r\n    success: false,\r\n    error: undefined as string | undefined\r\n  };\r\n  \r\n  // ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸\r\n  const { available } = await getNativeModuleStatus();\r\n  \r\n  if (available) {\r\n    try {\r\n      const nativeStartTime = performance.now();\r\n      const nativeLevel = toNativeOptimizationLevel(level as unknown as OptimizationLevel);\r\n      await requestNativeMemoryOptimization(nativeLevel, emergency);\r\n      const nativeEndTime = performance.now();\r\n      \r\n      nativeResult = {\r\n        executionTime: nativeEndTime - nativeStartTime,\r\n        success: true,\r\n        error: undefined\r\n      };\r\n    } catch (error) {\r\n      nativeResult.error = error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';\r\n    }\r\n  } else {\r\n    nativeResult.error = 'ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ';\r\n  }\r\n  \r\n  // ìë°”ìŠ¤í¬ë¦½íŠ¸ êµ¬í˜„ í…ŒìŠ¤íŠ¸\r\n  let jsResult = {\r\n    executionTime: 0,\r\n    success: false,\r\n    error: undefined as string | undefined\r\n  };\r\n  \r\n  try {\r\n    const jsStartTime = performance.now();\r\n    await internalOptimizeMemory(emergency);\r\n    const jsEndTime = performance.now();\r\n    \r\n    jsResult = {\r\n      executionTime: jsEndTime - jsStartTime,\r\n      success: true,\r\n      error: undefined\r\n    };\r\n  } catch (error) {\r\n    jsResult.error = error instanceof Error ? error.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜';\r\n  }\r\n  \r\n  // ìµœì¢… ë©”ëª¨ë¦¬ ìƒíƒœ ê¸°ë¡\r\n  const memoryAfter = await getMemoryInfo() || { heapUsedMB: 0 };\r\n  const _freedMB = (memoryBefore.heapUsedMB ?? 0) - (memoryAfter.heapUsedMB ?? 0); // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ ì•ì— _ ì¶”ê°€\r\n  \r\n  // ì„±ëŠ¥ ë¹„êµ ê²°ê³¼ ê³„ì‚°\r\n  const speedupFactor = jsResult.success && nativeResult.success && nativeResult.executionTime > 0\r\n    ? jsResult.executionTime / nativeResult.executionTime\r\n    : 0;\r\n  \r\n  // ë©”ëª¨ë¦¬ ì°¨ì´ ê³„ì‚° (MB ë‹¨ìœ„)\r\n  const memoryDifference = (memoryBefore?.heapUsedMB ?? 0) - (memoryAfter?.heapUsedMB ?? 0);\r\n  \r\n  // ê²°ê³¼ ê°ì²´ ìƒì„±\r\n  const result: PerformanceResult = {\r\n    operationName: `Memory Optimization (Level ${level}, Emergency: ${emergency})`,\r\n    nativeImplementation: nativeResult,\r\n    jsImplementation: jsResult,\r\n    speedupFactor,\r\n    timestamp: Date.now(),\r\n    memoryBefore,\r\n    memoryAfter,\r\n    memoryDifference\r\n  };\r\n  \r\n  // ì´ë ¥ì— ì¶”ê°€\r\n  performanceHistory.push(result);\r\n  if (performanceHistory.length > 50) {\r\n    performanceHistory.shift(); // ìµœëŒ€ 50ê°œ í•­ëª© ìœ ì§€\r\n  }\r\n  \r\n  // ê²°ê³¼ ë¡œê¹…\r\n  logPerformanceResult(result);\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼ ë¡œê¹…\r\n * @param result ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼\r\n */\r\nfunction logPerformanceResult(result: PerformanceResult): void {\r\n  console.group('ğŸ” ì„±ëŠ¥ ë¹„êµ ê²°ê³¼');\r\n  console.log(`ì‘ì—…: ${result.operationName}`);\r\n  console.log(`ì‹œê°„: ${new Date(result.timestamp).toLocaleTimeString()}`);\r\n  \r\n  console.group('âš™ï¸ ë„¤ì´í‹°ë¸Œ êµ¬í˜„');\r\n  console.log(`ì‹¤í–‰ ì‹œê°„: ${result.nativeImplementation.executionTime.toFixed(2)}ms`);\r\n  console.log(`ì„±ê³µ ì—¬ë¶€: ${result.nativeImplementation.success ? 'âœ…' : 'âŒ'}`);\r\n  if (result.nativeImplementation.error) {\r\n    console.error(`ì˜¤ë¥˜: ${result.nativeImplementation.error}`);\r\n  }\r\n  console.groupEnd();\r\n  \r\n  console.group('ğŸ”§ JavaScript êµ¬í˜„');\r\n  console.log(`ì‹¤í–‰ ì‹œê°„: ${result.jsImplementation.executionTime.toFixed(2)}ms`);\r\n  console.log(`ì„±ê³µ ì—¬ë¶€: ${result.jsImplementation.success ? 'âœ…' : 'âŒ'}`);\r\n  if (result.jsImplementation.error) {\r\n    console.error(`ì˜¤ë¥˜: ${result.jsImplementation.error}`);\r\n  }\r\n  console.groupEnd();\r\n  \r\n  if (result.speedupFactor > 0) {\r\n    console.log(`âš¡ ì†ë„ í–¥ìƒ: ${result.speedupFactor.toFixed(2)}x ${result.speedupFactor > 1 ? '(ë„¤ì´í‹°ë¸Œê°€ ë” ë¹ ë¦„)' : '(JSê°€ ë” ë¹ ë¦„)'}`);\r\n  }\r\n  \r\n  console.log(`ğŸ’¾ ë©”ëª¨ë¦¬ ì°¨ì´: ${result.memoryDifference.toFixed(2)}MB ${result.memoryDifference > 0 ? 'ê°ì†Œ' : 'ì¦ê°€'}`);\r\n  console.groupEnd();\r\n}\r\n\r\n/**\r\n * ì„±ëŠ¥ ì¸¡ì • ì´ë ¥ ê°€ì ¸ì˜¤ê¸°\r\n * @returns ì„±ëŠ¥ ì¸¡ì • ì´ë ¥ ë°°ì—´\r\n */\r\nexport function getPerformanceHistory(): PerformanceResult[] {\r\n  return [...performanceHistory];\r\n}\r\n\r\n// optimizeMemory í•¨ìˆ˜ ì¶”ê°€ (ì‹¤ì œë¡œëŠ” requestNativeMemoryOptimizationì„ ë˜í•‘)\r\nasync function optimizeMemory(level: number, emergency: boolean = false): Promise<void> {\r\n  await requestNativeMemoryOptimization(level as unknown as number, emergency);\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” ì‘ì—…ì— ëŒ€í•œ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰\r\n * ëª¨ë“  ìµœì í™” ë ˆë²¨ì— ëŒ€í•´ ì„±ëŠ¥ ì¸¡ì •ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\r\n */\r\nexport async function runComprehensiveBenchmark(): Promise<PerformanceResult[]> {\r\n  const results: PerformanceResult[] = [];\r\n  \r\n  // ëª¨ë“  ìµœì í™” ë ˆë²¨ì— ëŒ€í•´ í…ŒìŠ¤íŠ¸\r\n  const optimizationLevel = 2; // ì¤‘ê°„ ë ˆë²¨ ì‚¬ìš©\r\n  for (let level = 0; level <= 4; level++) {\r\n    results.push(await benchmarkMemoryOptimization(level, false));\r\n    // í…ŒìŠ¤íŠ¸ ê°„ ê°„ê²©ì„ ë‘ì–´ ì´ì „ í…ŒìŠ¤íŠ¸ì˜ ì˜í–¥ ìµœì†Œí™”\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n  }\r\n  \r\n  // ê¸´ê¸‰ ëª¨ë“œ í…ŒìŠ¤íŠ¸\r\n  await optimizeMemory(optimizationLevel);\r\n  results.push(await benchmarkMemoryOptimization(OPTIMIZATION_LEVEL.EXTREME, true));\r\n  \r\n  // ì¢…í•© ê²°ê³¼ ë¡œê¹…\r\n  console.group('ğŸ“Š ì¢…í•© ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼');\r\n  console.log(`ì´ ${results.length}ê°œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë¨`);\r\n  \r\n  const avgSpeedup = results.reduce((sum, r) => sum + r.speedupFactor, 0) / results.length;\r\n  console.log(`í‰ê·  ì†ë„ í–¥ìƒ: ${avgSpeedup.toFixed(2)}x`);\r\n  \r\n  console.log(`ìµœê³  ì†ë„ í–¥ìƒ: ${Math.max(...results.map(r => r.speedupFactor)).toFixed(2)}x`);\r\n  console.log(`ì´ í•´ì œëœ ë©”ëª¨ë¦¬: ${results.reduce((sum, r) => sum + r.memoryDifference, 0).toFixed(2)}MB`);\r\n  console.groupEnd();\r\n  \r\n  return results;\r\n}\r\n\r\n/**\r\n * ë‘ ê°€ì§€ ìµœì í™” ë ˆë²¨ì„ ë§µí•‘í•˜ëŠ” ìœ í‹¸ë¦¬í‹°\r\n */\r\nexport function convertOptimizationLevel(level: number): number {\r\n  const _appOptimizationLevel = 2; // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ ì•ì— _ ì¶”ê°€\r\n  // someFunction ì œê±°\r\n  return level;\r\n}\r\n","/**\r\n * ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¡œê¹… ë° ë¶„ì„ ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ì¥ê¸°ì ì¸ ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ ë¶„ì„ê³¼ ìµœì í™” ì „ëµ ìˆ˜ë¦½ì— í•„ìš”í•œ\r\n * ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ì €ì¥í•©ë‹ˆë‹¤.\r\n */\r\n\r\n// ì˜¬ë°”ë¥¸ import ê²½ë¡œ ì„¤ì •\r\nimport { getMemoryInfo as getMemoryInfoOriginal } from '../nativeModuleClient';\r\nimport { getPerformanceHistory } from '../performance-metrics';\r\n// MemoryEventTypeì„ src/typesì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤\r\nimport { MemoryEventType, MemoryInfo } from '@/types';\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ë¡œê±° ëª¨ë“ˆ\r\n * \r\n * ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë° ê´€ë ¨ ì´ë²¤íŠ¸ë¥¼ ë¡œê¹…í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°\r\n */\r\n\r\n// ë¡œê·¸ ë ˆë²¨ ì •ì˜\r\nexport enum LogLevel {\r\n  DEBUG = 0,\r\n  INFO = 1,\r\n  WARN = 2,\r\n  ERROR = 3\r\n}\r\n\r\n// ë¡œê·¸ í•­ëª© ì¸í„°í˜ì´ìŠ¤\r\nexport interface LogEntry {\r\n  timestamp: number;\r\n  level: LogLevel;\r\n  message: string;\r\n  data?: Record<string, unknown>;\r\n}\r\n\r\n// ë¡œê·¸ ì„¤ì • ì¸í„°í˜ì´ìŠ¤\r\nexport interface LoggerOptions {\r\n  minLevel?: LogLevel;\r\n  maxLogs?: number;\r\n  printToConsole?: boolean;\r\n  moduleName?: string;\r\n}\r\n\r\n// ê¸°ë³¸ ë¡œê±° ì˜µì…˜\r\nconst DEFAULT_OPTIONS: LoggerOptions = {\r\n  minLevel: LogLevel.INFO,\r\n  maxLogs: 100,\r\n  printToConsole: true,\r\n  moduleName: 'memory'\r\n};\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ë¡œê±° í´ë˜ìŠ¤\r\n */\r\nexport class MemoryLogger {\r\n  private logs: LogEntry[] = [];\r\n  private options: LoggerOptions;\r\n\r\n  constructor(options: LoggerOptions = {}) {\r\n    this.options = { ...DEFAULT_OPTIONS, ...options };\r\n  }\r\n\r\n  /**\r\n   * ë¡œê·¸ ê¸°ë¡\r\n   * @param level ë¡œê·¸ ë ˆë²¨\r\n   * @param message ë©”ì‹œì§€\r\n   * @param data ì¶”ê°€ ë°ì´í„°\r\n   */\r\n  private log(level: LogLevel, message: string, data?: Record<string, unknown>): void {\r\n    // ì„¤ì •ëœ ìµœì†Œ ë ˆë²¨ë³´ë‹¤ ë‚®ì€ ë¡œê·¸ëŠ” ë¬´ì‹œ\r\n    if (level < this.options.minLevel!) {\r\n      return;\r\n    }\r\n\r\n    // ë¡œê·¸ í•­ëª© ìƒì„±\r\n    const entry: LogEntry = {\r\n      timestamp: Date.now(),\r\n      level,\r\n      message,\r\n      data\r\n    };\r\n\r\n    // ë¡œê·¸ ë°°ì—´ì— ì¶”ê°€\r\n    this.logs.push(entry);\r\n\r\n    // ë¡œê·¸ ê°œìˆ˜ ì œí•œ\r\n    if (this.logs.length > this.options.maxLogs!) {\r\n      this.logs.shift();\r\n    }\r\n\r\n    // ì½˜ì†” ì¶œë ¥ (ì„¤ì •ëœ ê²½ìš°)\r\n    if (this.options.printToConsole) {\r\n      this.printToConsole(entry);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì½˜ì†”ì— ë¡œê·¸ ì¶œë ¥\r\n   * @param entry ë¡œê·¸ í•­ëª©\r\n   */\r\n  private printToConsole(entry: LogEntry): void {\r\n    const timestamp = new Date(entry.timestamp).toISOString();\r\n    const prefix = this.options.moduleName ? `[${this.options.moduleName}]` : '';\r\n\r\n    switch (entry.level) {\r\n      case LogLevel.DEBUG:\r\n        console.debug(`${timestamp} ${prefix} ${entry.message}`, entry.data);\r\n        break;\r\n      case LogLevel.INFO:\r\n        console.info(`${timestamp} ${prefix} ${entry.message}`, entry.data);\r\n        break;\r\n      case LogLevel.WARN:\r\n        console.warn(`${timestamp} ${prefix} ${entry.message}`, entry.data);\r\n        break;\r\n      case LogLevel.ERROR:\r\n        console.error(`${timestamp} ${prefix} ${entry.message}`, entry.data);\r\n        break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë””ë²„ê·¸ ë¡œê·¸ ê¸°ë¡\r\n   * @param message ë©”ì‹œì§€\r\n   * @param data ì¶”ê°€ ë°ì´í„°\r\n   */\r\n  debug(message: string, data?: Record<string, unknown>): void {\r\n    this.log(LogLevel.DEBUG, message, data);\r\n  }\r\n\r\n  /**\r\n   * ì •ë³´ ë¡œê·¸ ê¸°ë¡\r\n   * @param message ë©”ì‹œì§€\r\n   * @param data ì¶”ê°€ ë°ì´í„°\r\n   */\r\n  info(message: string, data?: Record<string, unknown>): void {\r\n    this.log(LogLevel.INFO, message, data);\r\n  }\r\n\r\n  /**\r\n   * ê²½ê³  ë¡œê·¸ ê¸°ë¡\r\n   * @param message ë©”ì‹œì§€\r\n   * @param data ì¶”ê°€ ë°ì´í„°\r\n   */\r\n  warn(message: string, data?: Record<string, unknown>): void {\r\n    this.log(LogLevel.WARN, message, data);\r\n  }\r\n\r\n  /**\r\n   * ì˜¤ë¥˜ ë¡œê·¸ ê¸°ë¡\r\n   * @param message ë©”ì‹œì§€\r\n   * @param data ì¶”ê°€ ë°ì´í„°\r\n   */\r\n  error(message: string, data?: Record<string, unknown>): void {\r\n    this.log(LogLevel.ERROR, message, data);\r\n  }\r\n\r\n  /**\r\n   * ëª¨ë“  ë¡œê·¸ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLogs(): LogEntry[] {\r\n    return [...this.logs];\r\n  }\r\n\r\n  /**\r\n   * íŠ¹ì • ë ˆë²¨ ì´ìƒì˜ ë¡œê·¸ë§Œ ê°€ì ¸ì˜¤ê¸°\r\n   * @param level ìµœì†Œ ë¡œê·¸ ë ˆë²¨\r\n   */\r\n  getLogsByLevel(level: LogLevel): LogEntry[] {\r\n    return this.logs.filter(entry => entry.level >= level);\r\n  }\r\n\r\n  /**\r\n   * ì˜¤ë¥˜ ë¡œê·¸ë§Œ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getErrorLogs(): LogEntry[] {\r\n    return this.logs.filter(entry => entry.level === LogLevel.ERROR);\r\n  }\r\n}\r\n\r\n// ê¸°ë³¸ ë¡œê±° ì¸ìŠ¤í„´ìŠ¤\r\nexport const memoryLogger = new MemoryLogger();\r\nexport const logger = memoryLogger; // í¸ì˜ë¥¼ ìœ„í•œ ë³„ì¹­\r\n\r\n// í¸ì˜ì„±ì„ ìœ„í•œ ê¸°ë³¸ í•¨ìˆ˜ ë‚´ë³´ë‚´ê¸°\r\nexport const debug = memoryLogger.debug.bind(memoryLogger);\r\nexport const info = memoryLogger.info.bind(memoryLogger);\r\nexport const warn = memoryLogger.warn.bind(memoryLogger);\r\nexport const error = memoryLogger.error.bind(memoryLogger);\r\n\r\n// ë©”ëª¨ë¦¬ ë¡œê·¸ ì—”íŠ¸ë¦¬ ì¸í„°í˜ì´ìŠ¤\r\nexport interface MemoryLogEntry {\r\n  timestamp: number;\r\n  info: MemoryInfo;\r\n  eventType: MemoryEventType;\r\n  eventDescription?: string;\r\n  componentId?: string;\r\n  route?: string;\r\n}\r\n\r\n// ë©”ëª¨ë¦¬ ì‚¬ìš© í†µê³„ ì¸í„°í˜ì´ìŠ¤\r\nexport interface MemoryUsageStats {\r\n  averageUsage: number;\r\n  peakUsage: number;\r\n  minUsage: number;\r\n  lastUsage: number;\r\n  usageOverTime: Array<{ timestamp: number; usageMB: number }>;\r\n  optimizationEvents: Array<{ timestamp: number; freedMemory: number }>;\r\n  gcEvents: Array<{ timestamp: number; freedMemory: number }>;\r\n  leakSuspects: Array<{ componentId: string; frequency: number }>;\r\n}\r\n\r\n// ëˆ„ë½ëœ ë³€ìˆ˜ì™€ ìƒìˆ˜ ì •ì˜ ì¶”ê°€\r\nconst memoryLogs: MemoryLogEntry[] = [];\r\nconst MAX_LOG_ENTRIES = 1000;\r\nconst MEMORY_LOG_DB = 'memory_log_db';\r\nconst INDEXEDDB_STORE = 'memory_logs';\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì •ë³´ ì •ê·œí™” í•¨ìˆ˜\r\n * @param memoryInfo ì›ì‹œ ë©”ëª¨ë¦¬ ì •ë³´\r\n * @returns í‘œì¤€í™”ëœ ë©”ëª¨ë¦¬ ì •ë³´\r\n */\r\nfunction normalizeMemoryInfo(memoryInfo: Record<string, unknown>): MemoryInfo {\r\n  // ê°„ë‹¨í•œ ì •ê·œí™” í•¨ìˆ˜ êµ¬í˜„\r\n  return {\r\n    heapUsed: typeof memoryInfo.heapUsed === 'number' ? memoryInfo.heapUsed : (typeof memoryInfo.heap_used === 'number' ? memoryInfo.heap_used : 0),\r\n    heapTotal: typeof memoryInfo.heapTotal === 'number' ? memoryInfo.heapTotal : (typeof memoryInfo.heap_total === 'number' ? memoryInfo.heap_total : 0),\r\n    heapUsedMB: typeof memoryInfo.heapUsedMB === 'number' ? memoryInfo.heapUsedMB : (typeof memoryInfo.heap_used_mb === 'number' ? memoryInfo.heap_used_mb : 0),\r\n    heap_used: typeof memoryInfo.heap_used === 'number' ? memoryInfo.heap_used : (typeof memoryInfo.heapUsed === 'number' ? memoryInfo.heapUsed : 0),\r\n    heap_total: typeof memoryInfo.heap_total === 'number' ? memoryInfo.heap_total : (typeof memoryInfo.heapTotal === 'number' ? memoryInfo.heapTotal : 0),\r\n    heap_used_mb: typeof memoryInfo.heap_used_mb === 'number' ? memoryInfo.heap_used_mb : (typeof memoryInfo.heapUsedMB === 'number' ? memoryInfo.heapUsedMB : 0),\r\n    rss: typeof memoryInfo.rss === 'number' ? memoryInfo.rss : 0,\r\n    rssMB: typeof memoryInfo.rssMB === 'number' ? memoryInfo.rssMB : (typeof memoryInfo.rss_mb === 'number' ? memoryInfo.rss_mb : 0),\r\n    rss_mb: typeof memoryInfo.rss_mb === 'number' ? memoryInfo.rss_mb : (typeof memoryInfo.rssMB === 'number' ? memoryInfo.rssMB : 0),\r\n    percentUsed: typeof memoryInfo.percentUsed === 'number' ? memoryInfo.percentUsed : (typeof memoryInfo.percent_used === 'number' ? memoryInfo.percent_used : 0),\r\n    percent_used: typeof memoryInfo.percent_used === 'number' ? memoryInfo.percent_used : (typeof memoryInfo.percentUsed === 'number' ? memoryInfo.percentUsed : 0),\r\n    heap_limit: typeof memoryInfo.heap_limit === 'number' ? memoryInfo.heap_limit : (typeof memoryInfo.heapLimit === 'number' ? memoryInfo.heapLimit : 0),\r\n    timestamp: typeof memoryInfo.timestamp === 'number' ? memoryInfo.timestamp : Date.now()\r\n  };\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜ ë˜í¼\r\n * @returns ë©”ëª¨ë¦¬ ì •ë³´ ë˜ëŠ” ê¸°ë³¸ ê°’\r\n */\r\nasync function getMemoryInfo(): Promise<Record<string, unknown>> {\r\n  try {\r\n    const response = await getMemoryInfoOriginal();\r\n    if (response && response.success && response.memoryInfo) {\r\n      return response.memoryInfo;\r\n    }\r\n    throw new Error('ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');\r\n  } catch (error) {\r\n    logger.error('ë©”ëª¨ë¦¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨', { \r\n      error: error instanceof Error ? error.message : String(error)\r\n    });\r\n    \r\n    // ê¸°ë³¸ ë©”ëª¨ë¦¬ ì •ë³´ ë°˜í™˜\r\n    return {\r\n      heap_used: 0,\r\n      heap_total: 0,\r\n      heap_used_mb: 0,\r\n      heapUsed: 0,\r\n      heapTotal: 0,\r\n      heapUsedMB: 0,\r\n      rss: 0,\r\n      rss_mb: 0,\r\n      rssMB: 0,\r\n      percent_used: 0,\r\n      percentUsed: 0,\r\n      heap_limit: 0, // ì¶”ê°€: í•„ìˆ˜ ì†ì„± heap_limit\r\n      timestamp: Date.now()\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¡œê¹…\r\n * @param eventType ì´ë²¤íŠ¸ íƒ€ì…\r\n * @param eventDescription ì´ë²¤íŠ¸ ì„¤ëª… (ì„ íƒ)\r\n * @param componentId ì»´í¬ë„ŒíŠ¸ ID (ì„ íƒ)\r\n * @param route í˜„ì¬ ë¼ìš°íŠ¸ (ì„ íƒ)\r\n */\r\nexport async function logMemoryUsage(\r\n  eventType: MemoryEventType,\r\n  eventDescription?: string,\r\n  componentId?: string,\r\n  route?: string\r\n): Promise<MemoryLogEntry> {\r\n  // í˜„ì¬ ë©”ëª¨ë¦¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸°\r\n  const rawMemoryInfo = await getMemoryInfo();\r\n\r\n  // í‘œì¤€í™”ëœ MemoryInfo ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€í™˜\r\n  const standardizedInfo = normalizeMemoryInfo(rawMemoryInfo);\r\n\r\n  // í˜„ì¬ ë¼ìš°íŠ¸ ê°€ì ¸ì˜¤ê¸° (route ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°)\r\n  if (!route && typeof window !== 'undefined') {\r\n    route = window.location.pathname;\r\n  }\r\n\r\n  // ë¡œê·¸ í•­ëª© ìƒì„±\r\n  const logEntry: MemoryLogEntry = {\r\n    timestamp: Date.now(),\r\n    info: standardizedInfo,\r\n    eventType,\r\n    eventDescription,\r\n    componentId,\r\n    route\r\n  };\r\n\r\n  // ì¸ë©”ëª¨ë¦¬ ë¡œê·¸ì— ì¶”ê°€\r\n  memoryLogs.push(logEntry);\r\n\r\n  // ìµœëŒ€ ê°œìˆ˜ ì œí•œ\r\n  if (memoryLogs.length > MAX_LOG_ENTRIES) {\r\n    memoryLogs.shift();\r\n  }\r\n\r\n  // IndexedDBì— ì €ì¥ (ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œë§Œ ì‹¤í–‰)\r\n  if (typeof window !== 'undefined' && window.indexedDB) {\r\n    saveLogToIndexedDB(logEntry).catch(err =>\r\n      logger.error('ë©”ëª¨ë¦¬ ë¡œê·¸ ì €ì¥ ì¤‘ ì˜¤ë¥˜:', { \r\n        error: err instanceof Error ? err.message : String(err) \r\n      })\r\n    );\r\n  }\r\n\r\n  return logEntry;\r\n}\r\n\r\n/**\r\n * ì£¼ê¸°ì ì¸ ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ ì‹œì‘\r\n * @param intervalMs ì²´í¬ ê°„ê²© (ë°€ë¦¬ì´ˆ)\r\n * @returns ëª¨ë‹ˆí„°ë§ ì¤‘ì§€ í•¨ìˆ˜\r\n */\r\nexport function startMemoryMonitoring(intervalMs: number = 60000): () => void {\r\n  const intervalId = setInterval(() => {\r\n    // MemoryEventType ì—´ê±°í˜• ì§ì ‘ ì‚¬ìš©\r\n    logMemoryUsage(MemoryEventType.PERIODIC_CHECK);\r\n  }, intervalMs);\r\n\r\n  return () => clearInterval(intervalId);\r\n}\r\n\r\n/**\r\n * IndexedDBì— ë¡œê·¸ ì €ì¥\r\n * @param logEntry ë¡œê·¸ í•­ëª©\r\n */\r\nasync function saveLogToIndexedDB(logEntry: MemoryLogEntry): Promise<void> {\r\n  return new Promise((resolve, reject) => {\r\n    // IndexedDBê°€ ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸\r\n    if (!window.indexedDB) {\r\n      reject(new Error('IndexedDBë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤'));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // ë°ì´í„°ë² ì´ìŠ¤ ì—´ê¸°\r\n      const request = window.indexedDB.open(MEMORY_LOG_DB, 1);\r\n\r\n      // ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±/ì—…ê·¸ë ˆì´ë“œ ì´ë²¤íŠ¸\r\n      request.onupgradeneeded = (event) => {\r\n        const db = (event.target as IDBOpenDBRequest).result;\r\n\r\n        // ê°ì²´ ì €ì¥ì†Œê°€ ì—†ìœ¼ë©´ ìƒì„±\r\n        if (!db.objectStoreNames.contains(INDEXEDDB_STORE)) {\r\n          db.createObjectStore(INDEXEDDB_STORE, { keyPath: 'timestamp' });\r\n        }\r\n      };\r\n\r\n      // ì˜¤ë¥˜ ì²˜ë¦¬\r\n      request.onerror = (event) => {\r\n        const errorMsg = `IndexedDB ì˜¤ë¥˜: ${(event.target as IDBOpenDBRequest).error}`;\r\n        logger.error(errorMsg);\r\n        reject(new Error(errorMsg));\r\n      };\r\n\r\n      // ì„±ê³µ ì²˜ë¦¬\r\n      request.onsuccess = (event) => {\r\n        const db = (event.target as IDBOpenDBRequest).result;\r\n\r\n        try {\r\n          // íŠ¸ëœì­ì…˜ ì‹œì‘\r\n          const transaction = db.transaction([INDEXEDDB_STORE], 'readwrite');\r\n          const store = transaction.objectStore(INDEXEDDB_STORE);\r\n\r\n          // ë¡œê·¸ í•­ëª© ì €ì¥\r\n          const addRequest = store.add(logEntry);\r\n\r\n          addRequest.onsuccess = () => {\r\n            resolve();\r\n          };\r\n\r\n          addRequest.onerror = () => {\r\n            const errorMsg = `ë¡œê·¸ í•­ëª© ì €ì¥ ì‹¤íŒ¨: ${addRequest.error}`;\r\n            logger.error(errorMsg);\r\n            reject(new Error(errorMsg));\r\n          };\r\n\r\n          // íŠ¸ëœì­ì…˜ ì™„ë£Œ ì´ë²¤íŠ¸\r\n          transaction.oncomplete = () => {\r\n            db.close();\r\n          };\r\n        } catch (error) {\r\n          const errorMsg = `IndexedDB íŠ¸ëœì­ì…˜ ì˜¤ë¥˜: ${error instanceof Error ? error.message : String(error)}`;\r\n          logger.error(errorMsg);\r\n          reject(new Error(errorMsg));\r\n        }\r\n      };\r\n    } catch (error) {\r\n      const errorMsg = `IndexedDB ì ‘ê·¼ ì˜¤ë¥˜: ${error instanceof Error ? error.message : String(error)}`;\r\n      logger.error(errorMsg);\r\n      reject(new Error(errorMsg));\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * ì €ì¥ëœ ë©”ëª¨ë¦¬ ë¡œê·¸ ê°€ì ¸ì˜¤ê¸°\r\n * @param limit ê°€ì ¸ì˜¬ ìµœëŒ€ í•­ëª© ìˆ˜\r\n * @param startTime ì‹œì‘ ì‹œê°„ (ë°€ë¦¬ì´ˆ)\r\n * @param endTime ì¢…ë£Œ ì‹œê°„ (ë°€ë¦¬ì´ˆ)\r\n * @param eventTypes í•„í„°ë§í•  ì´ë²¤íŠ¸ íƒ€ì… ë°°ì—´\r\n * @returns ë¡œê·¸ í•­ëª© ë°°ì—´\r\n */\r\nexport async function getMemoryLogs(\r\n  limit: number = 100,\r\n  startTime?: number,\r\n  endTime?: number,\r\n  eventTypes?: MemoryEventType[]\r\n): Promise<MemoryLogEntry[]> {\r\n  // ì‹œê°„ ê¸°ì¤€ í•„í„°ë§\r\n  const filteredByTime = memoryLogs.filter((log: MemoryLogEntry) => {\r\n    if (startTime && log.timestamp < startTime) return false;\r\n    if (endTime && log.timestamp > endTime) return false;\r\n    return true;\r\n  });\r\n\r\n  // ì´ë²¤íŠ¸ íƒ€ì… ê¸°ì¤€ í•„í„°ë§\r\n  const filtered = eventTypes\r\n    ? filteredByTime.filter((log: MemoryLogEntry) => eventTypes.includes(log.eventType as MemoryEventType))\r\n    : filteredByTime;\r\n\r\n  // ìµœì‹  ìˆœìœ¼ë¡œ ì •ë ¬í•˜ê³  ì œí•œëœ ê°œìˆ˜ ë°˜í™˜\r\n  return filtered\r\n    .sort((a: MemoryLogEntry, b: MemoryLogEntry) => b.timestamp - a.timestamp)\r\n    .slice(0, limit);\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ì‚¬ìš© í†µê³„ ë¶„ì„\r\n * @param startTime ì‹œì‘ ì‹œê°„ (ë°€ë¦¬ì´ˆ)\r\n * @param endTime ì¢…ë£Œ ì‹œê°„ (ë°€ë¦¬ì´ˆ)\r\n * @returns ë©”ëª¨ë¦¬ ì‚¬ìš© í†µê³„\r\n */\r\nexport async function analyzeMemoryUsage(\r\n  startTime: number = Date.now() - 24 * 60 * 60 * 1000, // ê¸°ë³¸: 24ì‹œê°„\r\n  endTime: number = Date.now()\r\n): Promise<MemoryUsageStats> {\r\n  // ì§€ì •ëœ ê¸°ê°„ì˜ ë¡œê·¸ ê°€ì ¸ì˜¤ê¸°\r\n  const logs = await getMemoryLogs(1000, startTime, endTime);\r\n\r\n  if (logs.length === 0) {\r\n    throw new Error('ë¶„ì„í•  ë©”ëª¨ë¦¬ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤');\r\n  }\r\n\r\n  // ê¸°ë³¸ í†µê³„ ê³„ì‚°\r\n  const usages = logs.map(log => log.info.heap_used_mb || 0);\r\n  const avgUsage = usages.reduce((sum, usage) => sum + usage, 0) / usages.length;\r\n  const peakUsage = Math.max(...usages);\r\n  const minUsage = Math.min(...usages);\r\n  const lastUsage = usages[0]; // ìµœì‹  ë¡œê·¸ê°€ ì²« ë²ˆì§¸\r\n\r\n  // ì‹œê°„ë³„ ì‚¬ìš©ëŸ‰\r\n  const usageOverTime = logs.map(log => ({\r\n    timestamp: log.timestamp,\r\n    usageMB: log.info.heap_used_mb || 0\r\n  })).sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // ìµœì í™” ì´ë²¤íŠ¸ ì¶”ì¶œ\r\n  const optimizationEvents = logs\r\n    .filter(log => log.eventType === MemoryEventType.OPTIMIZATION)\r\n    .map(log => {\r\n      // ìµœì í™” ì „í›„ ë©”ëª¨ë¦¬ ì°¨ì´ ê³„ì‚° (ì´ì „ ë¡œê·¸ì™€ ë¹„êµ)\r\n      const index = logs.indexOf(log);\r\n      const prevLog = logs[index + 1]; // ì—­ìˆœ ì •ë ¬ì´ë¯€ë¡œ ë‹¤ìŒ ì¸ë±ìŠ¤ê°€ ì´ì „ ë¡œê·¸\r\n      const freedMemory = prevLog\r\n        ? (prevLog.info.heap_used_mb || 0) - (log.info.heap_used_mb || 0)\r\n        : 0;\r\n\r\n      return {\r\n        timestamp: log.timestamp,\r\n        freedMemory: Math.max(0, freedMemory) // ìŒìˆ˜ì¸ ê²½ìš° 0ìœ¼ë¡œ ì²˜ë¦¬\r\n      };\r\n    });\r\n\r\n  // GC ì´ë²¤íŠ¸ ì¶”ì¶œ\r\n  const gcEvents = logs\r\n    .filter(log => log.eventType === MemoryEventType.GARBAGE_COLLECTION)\r\n    .map(log => {\r\n      // GC ì „í›„ ë©”ëª¨ë¦¬ ì°¨ì´ ê³„ì‚°\r\n      const index = logs.indexOf(log);\r\n      const prevLog = logs[index + 1];\r\n      const freedMemory = prevLog\r\n        ? (prevLog.info.heap_used_mb || 0) - (log.info.heap_used_mb || 0)\r\n        : 0;\r\n\r\n      return {\r\n        timestamp: log.timestamp,\r\n        freedMemory: Math.max(0, freedMemory)\r\n      };\r\n    });\r\n\r\n  // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì˜ì‹¬ ì»´í¬ë„ŒíŠ¸ ë¶„ì„\r\n  const componentMounts = logs.filter(log =>\r\n    log.eventType === MemoryEventType.COMPONENT_MOUNT && log.componentId\r\n  );\r\n\r\n  const componentCounts: Record<string, number> = {};\r\n  for (const log of componentMounts) {\r\n    if (log.componentId) {\r\n      const id = log.componentId;\r\n      componentCounts[id] = (componentCounts[id] || 0) + 1;\r\n    }\r\n  }\r\n\r\n  // ëˆ„ìˆ˜ ì˜ì‹¬ ì»´í¬ë„ŒíŠ¸ (ìƒìœ„ 10ê°œ)\r\n  const leakSuspects = Object.entries(componentCounts)\r\n    .map(([componentId, frequency]) => ({ componentId, frequency }))\r\n    .sort((a, b) => b.frequency - a.frequency)\r\n    .slice(0, 10);\r\n\r\n  return {\r\n    averageUsage: avgUsage,\r\n    peakUsage,\r\n    minUsage,\r\n    lastUsage,\r\n    usageOverTime,\r\n    optimizationEvents,\r\n    gcEvents,\r\n    leakSuspects\r\n  };\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ë¡œê·¸ ë‚´ë³´ë‚´ê¸° (JSON)\r\n * @returns JSON ë¬¸ìì—´\r\n */\r\nexport async function exportMemoryLogs(): Promise<string> {\r\n  const logs = await getMemoryLogs(MAX_LOG_ENTRIES);\r\n  const performanceData = getPerformanceHistory();\r\n\r\n  const exportData = {\r\n    logs,\r\n    performanceHistory: performanceData,\r\n    exportTimestamp: Date.now(),\r\n    appVersion: '1.0.0', // ì•± ë²„ì „\r\n    systemInfo: typeof navigator !== 'undefined' ? {\r\n      userAgent: navigator.userAgent,\r\n      platform: navigator.platform,\r\n      language: navigator.language\r\n    } : {\r\n      environment: 'server-side'\r\n    }\r\n  };\r\n\r\n  return JSON.stringify(exportData, null, 2);\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìë™ ë¡œê·¸ ì„¤ì •\r\n * ì£¼ìš” ì´ë²¤íŠ¸ì— ëŒ€í•œ ë©”ëª¨ë¦¬ ë¡œê¹…ì„ ìë™í™”í•©ë‹ˆë‹¤.\r\n * @returns ìë™ ë¡œê¹… ì •ë¦¬ í•¨ìˆ˜\r\n */\r\nexport function setupAutomaticMemoryLogging(): () => void {\r\n  const cleanupFunctions: Array<() => void> = [];\r\n\r\n  // ì£¼ê¸°ì  ëª¨ë‹ˆí„°ë§ ì‹œì‘\r\n  const stopMonitoring = startMemoryMonitoring(60000); // 1ë¶„ë§ˆë‹¤\r\n  cleanupFunctions.push(stopMonitoring);\r\n\r\n  // í˜ì´ì§€ íƒìƒ‰ ì¶”ì \r\n  if (typeof window !== 'undefined') {\r\n    // í˜ì´ì§€ ë¡œë“œ ì‹œ\r\n    const handleLoad = () => {\r\n      logMemoryUsage(MemoryEventType.PAGE_NAVIGATION, 'Page loaded');\r\n    };\r\n    window.addEventListener('load', handleLoad);\r\n    cleanupFunctions.push(() => window.removeEventListener('load', handleLoad));\r\n\r\n    // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ\r\n    const handleBeforeUnload = () => {\r\n      logMemoryUsage(MemoryEventType.PAGE_NAVIGATION, 'Page unloaded');\r\n    };\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    cleanupFunctions.push(() => window.removeEventListener('beforeunload', handleBeforeUnload));\r\n\r\n    // ê°€ì‹œì„± ë³€ê²½ ì‹œ\r\n    const handleVisibilityChange = () => {\r\n      logMemoryUsage(\r\n        MemoryEventType.PAGE_NAVIGATION,\r\n        `Visibility changed: ${document.visibilityState}`\r\n      );\r\n    };\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    cleanupFunctions.push(() => document.removeEventListener('visibilitychange', handleVisibilityChange));\r\n  }\r\n\r\n  // ëª¨ë“  ì •ë¦¬ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ ë°˜í™˜\r\n  return () => {\r\n    cleanupFunctions.forEach(cleanup => cleanup());\r\n  };\r\n}\r\n","/**\r\n * ë¡œê·¸ ì €ì¥ ë° ê´€ë¦¬ ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ëŒ€í™” ë¡œê·¸ì™€ ì—ëŸ¬ ë¡œê·¸ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ\r\n */\r\n\r\nimport { formatBytes, getCurrentTimestamp } from './common-utils';\r\nimport { logger } from './memory/logger';\r\n\r\n/**\r\n * ë¡œê·¸ íƒ€ì… ì •ì˜\r\n */\r\nexport enum LogType {\r\n  CONVERSATION = 'conversation', // ì‚¬ìš©ìì™€ AI ê°„ ëŒ€í™” ë¡œê·¸\r\n  ERROR = 'error',               // ì—ëŸ¬ ë¡œê·¸\r\n  PERFORMANCE = 'performance',   // ì„±ëŠ¥ ê´€ë ¨ ë¡œê·¸\r\n  MEMORY = 'memory',             // ë©”ëª¨ë¦¬ ê´€ë ¨ ë¡œê·¸\r\n  SYSTEM = 'system'              // ì‹œìŠ¤í…œ ê´€ë ¨ ë¡œê·¸\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ë°ì´í„° ì¸í„°í˜ì´ìŠ¤\r\n */\r\nexport interface LogEntry {\r\n  id?: string;           // ë¡œê·¸ ê³ ìœ  ID (ì €ì¥ ì‹œ ìë™ ìƒì„±)\r\n  type: LogType;         // ë¡œê·¸ íƒ€ì…\r\n  timestamp: number;     // ë¡œê·¸ ìƒì„± ì‹œê°„ (ë°€ë¦¬ì´ˆ íƒ€ì„ìŠ¤íƒ¬í”„)\r\n  content: string;       // ë¡œê·¸ ë‚´ìš©\r\n  metadata?: any;        // ì¶”ê°€ ë©”íƒ€ë°ì´í„° (JSON ì§ë ¬í™” ê°€ëŠ¥í•œ ê°ì²´)\r\n  tags?: string[];       // ë¡œê·¸ íƒœê·¸ (ê²€ìƒ‰ ë° í•„í„°ë§ìš©)\r\n  sessionId?: string;    // ì„¸ì…˜ ID\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ê²€ìƒ‰ ì˜µì…˜ ì¸í„°í˜ì´ìŠ¤\r\n */\r\nexport interface LogSearchOptions {\r\n  type?: LogType | LogType[];    // ê²€ìƒ‰í•  ë¡œê·¸ íƒ€ì…\r\n  startTime?: number;            // ê²€ìƒ‰ ì‹œì‘ ì‹œê°„\r\n  endTime?: number;              // ê²€ìƒ‰ ì¢…ë£Œ ì‹œê°„\r\n  tags?: string[];               // ê²€ìƒ‰í•  íƒœê·¸\r\n  query?: string;                // ê²€ìƒ‰ ì¿¼ë¦¬ (ë¡œê·¸ ë‚´ìš©ì—ì„œ ê²€ìƒ‰)\r\n  limit?: number;                // ê²€ìƒ‰ ê²°ê³¼ ì œí•œ\r\n  offset?: number;               // ê²€ìƒ‰ ê²°ê³¼ ì˜¤í”„ì…‹\r\n  sessionId?: string;            // ì„¸ì…˜ IDë¡œ ê²€ìƒ‰\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param logEntry - ì €ì¥í•  ë¡œê·¸ ë°ì´í„°\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬ (ID í¬í•¨)\r\n */\r\nexport async function saveLog(logEntry: Omit<LogEntry, 'id'>): Promise<LogEntry> {\r\n  try {\r\n    // ë¡œê·¸ ID ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ + ëœë¤ ë¬¸ìì—´)\r\n    const id = `${Date.now()}-${Math.random().toString(36).substring(2, 10)}`;\r\n\r\n    const log: LogEntry = {\r\n      ...logEntry,\r\n      id,\r\n      timestamp: logEntry.timestamp || getCurrentTimestamp()\r\n    };\r\n\r\n    // ë¡œê·¸ API ì—”ë“œí¬ì¸íŠ¸ë¡œ ì €ì¥ ìš”ì²­\r\n    const response = await fetch('/api/logs/save', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(log),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`ë¡œê·¸ ì €ì¥ ì‹¤íŒ¨: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    const result = await response.json();\r\n\r\n    logger.debug(`ë¡œê·¸ ì €ì¥ ì™„ë£Œ (ID: ${id}, íƒ€ì…: ${logEntry.type})`);\r\n    return result.data;\r\n  } catch (error) {\r\n    logger.error('ë¡œê·¸ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error as Record<string, unknown>);\r\n\r\n    // API í˜¸ì¶œ ì‹¤íŒ¨ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì„ì‹œ ì €ì¥\r\n    try {\r\n      const storageKey = `log_${Date.now()}`;\r\n      localStorage.setItem(storageKey, JSON.stringify(logEntry));\r\n    } catch (storageError) {\r\n      logger.error('ë¡œê·¸ì˜ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°±ì—… ì €ì¥ ì‹¤íŒ¨:', storageError as Record<string, unknown>);\r\n    }\r\n\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤.\r\n * \r\n * @param options - ê²€ìƒ‰ ì˜µì…˜\r\n * @returns ê²€ìƒ‰ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬ ë°°ì—´\r\n */\r\nexport async function searchLogs(options: LogSearchOptions = {}): Promise<LogEntry[]> {\r\n  try {\r\n    const queryParams = new URLSearchParams();\r\n\r\n    // ê²€ìƒ‰ ì˜µì…˜ì„ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ë³€í™˜\r\n    if (options.type) {\r\n      if (Array.isArray(options.type)) {\r\n        options.type.forEach(t => queryParams.append('type', t));\r\n      } else {\r\n        queryParams.set('type', options.type);\r\n      }\r\n    }\r\n\r\n    if (options.startTime) queryParams.set('startTime', options.startTime.toString());\r\n    if (options.endTime) queryParams.set('endTime', options.endTime.toString());\r\n    if (options.query) queryParams.set('query', options.query);\r\n    if (options.limit) queryParams.set('limit', options.limit.toString());\r\n    if (options.offset) queryParams.set('offset', options.offset.toString());\r\n    if (options.sessionId) queryParams.set('sessionId', options.sessionId);\r\n\r\n    if (options.tags && options.tags.length > 0) {\r\n      options.tags.forEach(tag => queryParams.append('tag', tag));\r\n    }\r\n\r\n    // ë¡œê·¸ ê²€ìƒ‰ API í˜¸ì¶œ\r\n    try {\r\n      let requestUrl = '';\r\n      \r\n      // ë¸Œë¼ìš°ì € í™˜ê²½ì¸ì§€ ì„œë²„ í™˜ê²½ì¸ì§€ í™•ì¸\r\n      if (typeof window === 'undefined') {\r\n        // ì„œë²„ í™˜ê²½ì—ì„œëŠ” ìƒëŒ€ ê²½ë¡œ ì‚¬ìš©\r\n        requestUrl = `/api/logs/search?${queryParams.toString()}`;\r\n      } else {\r\n        // ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” ì „ì²´ URL êµ¬ì„±\r\n        const baseUrl = window.location.origin;\r\n        try {\r\n          const apiUrl = new URL('/api/logs/search', baseUrl);\r\n          apiUrl.search = queryParams.toString();\r\n          requestUrl = apiUrl.toString();\r\n        } catch (urlError) {\r\n          logger.warn('URL ìƒì„± ì˜¤ë¥˜, ìƒëŒ€ ê²½ë¡œë¡œ í´ë°±:', urlError as Record<string, unknown>);\r\n          requestUrl = `/api/logs/search?${queryParams.toString()}`;\r\n        }\r\n      }\r\n\r\n      const response = await fetch(requestUrl);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`ë¡œê·¸ ê²€ìƒ‰ ì‹¤íŒ¨: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n\r\n      logger.debug(`ë¡œê·¸ ê²€ìƒ‰ ì™„ë£Œ (ê²°ê³¼ ìˆ˜: ${result.data.length})`);\r\n      return result.data;\r\n    } catch (error) {\r\n      logger.error('ë¡œê·¸ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error as Record<string, unknown>);\r\n      throw error;\r\n    }\r\n  } catch (error) {\r\n    logger.error('ë¡œê·¸ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error as Record<string, unknown>);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ëŒ€í™” ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param userMessage - ì‚¬ìš©ì ë©”ì‹œì§€\r\n * @param aiResponse - AI ì‘ë‹µ\r\n * @param metadata - ì¶”ê°€ ë©”íƒ€ë°ì´í„°\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬\r\n */\r\nexport async function saveConversationLog(\r\n  userMessage: string,\r\n  aiResponse: string,\r\n  metadata: any = {}\r\n): Promise<LogEntry> {\r\n  const now = getCurrentTimestamp();\r\n  const sessionId = metadata.sessionId || (localStorage.getItem('sessionId') ?? undefined) || `session_${now}`;\r\n\r\n  // ì„¸ì…˜ IDê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±í•˜ê³  ì €ì¥\r\n  if (!localStorage.getItem('sessionId')) {\r\n    localStorage.setItem('sessionId', sessionId);\r\n  }\r\n\r\n  const logEntry: Omit<LogEntry, 'id'> = {\r\n    type: LogType.CONVERSATION,\r\n    timestamp: now,\r\n    content: JSON.stringify({\r\n      userMessage,\r\n      aiResponse,\r\n      timestamp: now\r\n    }),\r\n    metadata: {\r\n      ...metadata,\r\n      messageSize: {\r\n        user: new Blob([userMessage]).size,\r\n        ai: new Blob([aiResponse]).size\r\n      },\r\n      messageSizeFormatted: {\r\n        user: formatBytes(new Blob([userMessage]).size),\r\n        ai: formatBytes(new Blob([aiResponse]).size)\r\n      }\r\n    },\r\n    tags: ['conversation', 'ai', ...(metadata.tags || [])],\r\n    sessionId\r\n  };\r\n\r\n  return saveLog(logEntry);\r\n}\r\n\r\n/**\r\n * ì—ëŸ¬ ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param error - ì—ëŸ¬ ê°ì²´ ë˜ëŠ” ì—ëŸ¬ ë©”ì‹œì§€\r\n * @param metadata - ì¶”ê°€ ë©”íƒ€ë°ì´í„°\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬\r\n */\r\nexport async function saveErrorLog(\r\n  error: Error | string,\r\n  metadata: any = {}\r\n): Promise<LogEntry> {\r\n  const errorMessage = error instanceof Error ? error.message : error;\r\n  const errorStack = error instanceof Error ? error.stack : undefined;\r\n\r\n  const logEntry: Omit<LogEntry, 'id'> = {\r\n    type: LogType.ERROR,\r\n    timestamp: getCurrentTimestamp(),\r\n    content: errorMessage,\r\n    metadata: {\r\n      ...metadata,\r\n      stack: errorStack,\r\n      browserInfo: typeof navigator !== 'undefined' ? {\r\n        userAgent: navigator.userAgent,\r\n        platform: navigator.platform,\r\n        language: navigator.language\r\n      } : undefined\r\n    },\r\n    tags: ['error', ...(metadata.tags || [])],\r\n    sessionId: metadata.sessionId || (localStorage.getItem('sessionId') ?? undefined)\r\n  };\r\n\r\n  return saveLog(logEntry);\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param memoryInfo - ë©”ëª¨ë¦¬ ì •ë³´\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬\r\n */\r\nexport async function saveMemoryLog(memoryInfo: any): Promise<LogEntry> {\r\n  const logEntry: Omit<LogEntry, 'id'> = {\r\n    type: LogType.MEMORY,\r\n    timestamp: getCurrentTimestamp(),\r\n    content: JSON.stringify(memoryInfo),\r\n    metadata: {\r\n      heapUsed: memoryInfo.heapUsed,\r\n      heapTotal: memoryInfo.heapTotal,\r\n      percentUsed: memoryInfo.percentUsed\r\n    },\r\n    tags: ['memory', 'performance'],\r\n    sessionId: localStorage.getItem('sessionId') ?? undefined\r\n  };\r\n\r\n  return saveLog(logEntry);\r\n}\r\n\r\n/**\r\n * ì„±ëŠ¥ ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param metric - ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì´ë¦„\r\n * @param value - ì„±ëŠ¥ ê°’\r\n * @param unit - ê°’ì˜ ë‹¨ìœ„ (ms, MB ë“±)\r\n * @param metadata - ì¶”ê°€ ë©”íƒ€ë°ì´í„°\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬\r\n */\r\nexport async function savePerformanceLog(\r\n  metric: string,\r\n  value: number,\r\n  unit: string = 'ms',\r\n  metadata: any = {}\r\n): Promise<LogEntry> {\r\n  const logEntry: Omit<LogEntry, 'id'> = {\r\n    type: LogType.PERFORMANCE,\r\n    timestamp: getCurrentTimestamp(),\r\n    content: `${metric}: ${value}${unit}`,\r\n    metadata: {\r\n      ...metadata,\r\n      metric,\r\n      value,\r\n      unit\r\n    },\r\n    tags: ['performance', metric, ...(metadata.tags || [])],\r\n    sessionId: localStorage.getItem('sessionId') ?? undefined\r\n  };\r\n\r\n  return saveLog(logEntry);\r\n}\r\n\r\n/**\r\n * ì‹œìŠ¤í…œ ë¡œê·¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.\r\n * \r\n * @param message - ì‹œìŠ¤í…œ ë©”ì‹œì§€\r\n * @param metadata - ì¶”ê°€ ë©”íƒ€ë°ì´í„°\r\n * @returns ì €ì¥ëœ ë¡œê·¸ ì—”íŠ¸ë¦¬\r\n */\r\nexport async function saveSystemLog(\r\n  message: string,\r\n  metadata: any = {}\r\n): Promise<LogEntry> {\r\n  const logEntry: Omit<LogEntry, 'id'> = {\r\n    type: LogType.SYSTEM,\r\n    timestamp: getCurrentTimestamp(),\r\n    content: message,\r\n    metadata: {\r\n      ...metadata,\r\n      systemInfo: typeof navigator !== 'undefined' ? {\r\n        userAgent: navigator.userAgent,\r\n        language: navigator.language,\r\n        platform: navigator.platform\r\n      } : undefined\r\n    },\r\n    tags: ['system', ...(metadata.tags || [])],\r\n    sessionId: localStorage.getItem('sessionId') ?? undefined\r\n  };\r\n\r\n  return saveLog(logEntry);\r\n}\r\n\r\n/**\r\n * ë¡œì»¬ ì €ì¥ì†Œì˜ ë¡œê·¸ë¥¼ ëª¨ë‘ ì„œë²„ë¡œ ë™ê¸°í™”í•©ë‹ˆë‹¤.\r\n */\r\nexport async function syncLocalLogs(): Promise<void> {\r\n  try {\r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¡œê·¸ë¡œ ì‹œì‘í•˜ëŠ” í‚¤ ëª¨ë‘ ê°€ì ¸ì˜¤ê¸°\r\n    const logKeys = Object.keys(localStorage).filter(key => key.startsWith('log_'));\r\n\r\n    if (logKeys.length === 0) {\r\n      logger.debug('ë™ê¸°í™”í•  ë¡œì»¬ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.');\r\n      return;\r\n    }\r\n\r\n    logger.info(`${logKeys.length}ê°œì˜ ë¡œì»¬ ë¡œê·¸ ë™ê¸°í™” ì‹œì‘`);\r\n\r\n    // ê° ë¡œê·¸ ë™ê¸°í™”\r\n    for (const key of logKeys) {\r\n      try {\r\n        const logJson = localStorage.getItem(key);\r\n        if (!logJson) continue;\r\n\r\n        const log = JSON.parse(logJson);\r\n        await saveLog(log);\r\n\r\n        // ì„±ê³µì ìœ¼ë¡œ ë™ê¸°í™”ëœ ë¡œê·¸ëŠ” ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì œê±°\r\n        localStorage.removeItem(key);\r\n      } catch (error) {\r\n        logger.error(`ë¡œê·¸ ë™ê¸°í™” ì¤‘ ì˜¤ë¥˜ (${key}):`, error as Record<string, unknown>);\r\n      }\r\n    }\r\n\r\n    logger.info('ë¡œì»¬ ë¡œê·¸ ë™ê¸°í™” ì™„ë£Œ');\r\n  } catch (error) {\r\n    logger.error('ë¡œê·¸ ë™ê¸°í™” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error as Record<string, unknown>);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ë¡œê¹… ìœ í‹¸ë¦¬í‹°\r\n */\r\n\r\nexport function isDebugMode(): boolean {\r\n  return process.env.NODE_ENV === 'development' ||\r\n    (typeof localStorage !== 'undefined' && localStorage.getItem('debug_mode') === 'true');\r\n}\r\n\r\nexport function addLogEntry(entry: Omit<LogEntry, 'id'>): void {\r\n  try {\r\n    if (typeof localStorage === 'undefined') return;\r\n\r\n    const logEntry = {\r\n      ...entry,\r\n      id: Date.now().toString() + Math.random().toString(36).substr(2, 5)\r\n    };\r\n\r\n    const logsJson = localStorage.getItem('application_logs');\r\n    const logs = logsJson ? JSON.parse(logsJson) : [];\r\n\r\n    logs.push(logEntry);\r\n\r\n    if (logs.length > 1000) {\r\n      logs.splice(0, logs.length - 1000);\r\n    }\r\n\r\n    localStorage.setItem('application_logs', JSON.stringify(logs));\r\n  } catch (error) {\r\n    console.error('ë¡œê·¸ í•­ëª© ì €ì¥ ì‹¤íŒ¨:', error);\r\n  }\r\n}\r\n\r\nexport enum LogLevel {\r\n  Debug = 'debug',\r\n  Info = 'info',\r\n  Warn = 'warn',\r\n  Error = 'error',\r\n  Critical = 'critical'\r\n}\r\n\r\nexport function logDebug(message: string, data?: unknown): void {\r\n  if (!isDebugMode()) return;\r\n\r\n  const entry = createLogEntry(LogLevel.Debug, message, data);\r\n  delete (entry as any).level; // level ì†ì„± ì œê±°\r\n  addLogEntry(entry);\r\n}\r\n\r\nexport function logInfo(message: string, data?: unknown): void {\r\n  const entry = createLogEntry(LogLevel.Info, message, data);\r\n  delete (entry as any).level; // level ì†ì„± ì œê±°\r\n  addLogEntry(entry);\r\n}\r\n\r\nexport function logWarn(message: string, data?: unknown): void {\r\n  const entry = createLogEntry(LogLevel.Warn, message, data);\r\n  delete (entry as any).level; // level ì†ì„± ì œê±°\r\n  addLogEntry(entry);\r\n}\r\n\r\nexport function logError(message: string, data?: unknown): void {\r\n  const entry = createLogEntry(LogLevel.Error, message, data);\r\n  delete (entry as any).level; // level ì†ì„± ì œê±°\r\n  addLogEntry(entry);\r\n}\r\n\r\nexport function logCritical(message: string, data?: unknown): void {\r\n  const entry = createLogEntry(LogLevel.Critical, message, data);\r\n  delete (entry as any).level; // level ì†ì„± ì œê±°\r\n  addLogEntry(entry);\r\n}\r\n\r\nfunction getCurrentSessionId(): string | undefined {\r\n  if (typeof localStorage === 'undefined') return undefined;\r\n\r\n  const sessionId = localStorage.getItem('session_id');\r\n  return sessionId || undefined;\r\n}\r\n\r\nexport function createLogEntry(level: LogLevel, message: string, data?: unknown): Omit<LogEntry, 'id'> {\r\n  const logData = {\r\n    type: LogType.SYSTEM,\r\n    timestamp: getCurrentTimestamp(),\r\n    content: message,\r\n    metadata: data ? JSON.parse(JSON.stringify(data)) : {},\r\n    tags: [level.toLowerCase()],\r\n    sessionId: getCurrentSessionId()\r\n  };\r\n  \r\n  // levelì€ ë‚´ë¶€ ìš©ë„ë¡œë§Œ ì‚¬ìš©í•˜ê³  ì‹¤ì œ LogEntryì—ëŠ” í¬í•¨ì‹œí‚¤ì§€ ì•ŠìŒ\r\n  return logData;\r\n}\r\n","/**\r\n * ë¡œê·¸ í•™ìŠµ ë° ìµœì í™” ìœ í‹¸ë¦¬í‹°\r\n * \r\n * ë¡œê·¸ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ í•™ìŠµí•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìµœì í™”í•˜ëŠ” ê¸°ëŠ¥ ì œê³µ\r\n */\r\n\r\nimport { LogType, searchLogs } from './log-utils';\r\nimport { logger } from './memory/logger';\r\n\r\n/**\r\n * ì¸í„°í˜ì´ìŠ¤ ì •ì˜\r\n */\r\ninterface WordFrequency {\r\n  [key: string]: number;\r\n}\r\n\r\ninterface HourlyActivity {\r\n  [hour: number]: number;\r\n}\r\n\r\ninterface SessionConversations {\r\n  [sessionId: string]: number;\r\n}\r\n\r\ninterface ErrorGroups {\r\n  [errorType: string]: {\r\n    count: number;\r\n    examples: Array<{ message: string; timestamp: number }>;\r\n    sessionIds: Set<string>;\r\n  };\r\n}\r\n\r\n/**\r\n * í•™ìŠµ ëª¨ë¸ íƒ€ì… ì •ì˜\r\n */\r\nexport enum LearningModelType {\r\n  MEMORY_OPTIMIZATION = 'memory_optimization',\r\n  ERROR_PREDICTION = 'error_prediction',\r\n  PERFORMANCE_OPTIMIZATION = 'performance_optimization',\r\n  USER_BEHAVIOR = 'user_behavior'\r\n}\r\n\r\n/**\r\n * í•™ìŠµ ê²°ê³¼ ì¸í„°í˜ì´ìŠ¤\r\n */\r\nexport interface LearningResult {\r\n  modelType: LearningModelType;\r\n  timestamp: number;\r\n  insights: any[];\r\n  recommendations: string[];\r\n  metrics: { [key: string]: number };\r\n}\r\n\r\n/**\r\n * ë©”ëª¨ë¦¬ ìµœì í™” í•™ìŠµ ì˜µì…˜\r\n */\r\nexport interface MemoryOptimizationOptions {\r\n  timeRange?: {\r\n    startTime?: number;\r\n    endTime?: number;\r\n  };\r\n  minSampleSize?: number;\r\n  sessionLimit?: number;\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ë°ì´í„°ë¡œë¶€í„° ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ì„ í•™ìŠµí•©ë‹ˆë‹¤.\r\n * \r\n * @param options - ë©”ëª¨ë¦¬ ìµœì í™” í•™ìŠµ ì˜µì…˜\r\n * @returns í•™ìŠµ ê²°ê³¼\r\n */\r\nexport async function learnMemoryUsagePatterns(\r\n  options: MemoryOptimizationOptions = {}\r\n): Promise<LearningResult> {\r\n  try {\r\n    logger.info('ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ í•™ìŠµ ì‹œì‘');\r\n    \r\n    // ê¸°ë³¸ê°’ ì„¤ì •\r\n    const minSampleSize = options.minSampleSize || 50;\r\n    const now = Date.now();\r\n    const startTime = options.timeRange?.startTime || now - 7 * 24 * 60 * 60 * 1000; // ê¸°ë³¸ 1ì£¼ì¼\r\n    const endTime = options.timeRange?.endTime || now;\r\n    \r\n    // ë©”ëª¨ë¦¬ ê´€ë ¨ ë¡œê·¸ ê²€ìƒ‰\r\n    const memoryLogs = await searchLogs({\r\n      type: LogType.MEMORY,\r\n      startTime,\r\n      endTime,\r\n      limit: 1000 // ìµœëŒ€ 1000ê°œê¹Œì§€ë§Œ ê°€ì ¸ì˜´\r\n    });\r\n    \r\n    if (memoryLogs.length < minSampleSize) {\r\n      logger.warn(`ì¶©ë¶„í•œ ë©”ëª¨ë¦¬ ë¡œê·¸ ìƒ˜í”Œì´ ì—†ìŠµë‹ˆë‹¤. í•„ìš”: ${minSampleSize}, í˜„ì¬: ${memoryLogs.length}`);\r\n    }\r\n    \r\n    // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¶„ì„\r\n    const memoryUsages = memoryLogs.map(log => {\r\n      const metadata = log.metadata || {};\r\n      return {\r\n        timestamp: log.timestamp,\r\n        heapUsed: metadata.heapUsed || 0,\r\n        heapTotal: metadata.heapTotal || 0,\r\n        percentUsed: metadata.percentUsed || 0\r\n      };\r\n    });\r\n    \r\n    // ì‹œê°„ëŒ€ë³„ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì§‘ê³„\r\n    const hourlyUsage: { [hour: number]: number[] } = {};\r\n    memoryUsages.forEach(usage => {\r\n      const date = new Date(usage.timestamp);\r\n      const hour = date.getHours();\r\n      \r\n      if (!hourlyUsage[hour]) hourlyUsage[hour] = [];\r\n      hourlyUsage[hour].push(usage.percentUsed);\r\n    });\r\n    \r\n    // í‰ê·  ì‹œê°„ëŒ€ë³„ ì‚¬ìš©ëŸ‰ ê³„ì‚°\r\n    const hourlyAverages = Object.entries(hourlyUsage).map(([hour, values]) => ({\r\n      hour: parseInt(hour),\r\n      avgUsage: values.reduce((sum, val) => sum + val, 0) / values.length,\r\n      count: values.length\r\n    }));\r\n    \r\n    // ìµœëŒ€ ë©”ëª¨ë¦¬ ì‚¬ìš© ì‹œê°„ëŒ€ ì‹ë³„\r\n    hourlyAverages.sort((a, b) => b.avgUsage - a.avgUsage);\r\n    const peakHours = hourlyAverages.slice(0, 3);\r\n    \r\n    // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì„¸ì…˜ ì‹ë³„\r\n    const sessionData: { [sessionId: string]: number[] } = {};\r\n    memoryLogs.forEach(log => {\r\n      if (!log.sessionId) return;\r\n      \r\n      const metadata = log.metadata || {};\r\n      if (!sessionData[log.sessionId]) sessionData[log.sessionId] = [];\r\n      sessionData[log.sessionId].push(metadata.percentUsed || 0);\r\n    });\r\n    \r\n    // ì„¸ì…˜ë³„ë¡œ ë©”ëª¨ë¦¬ ì¦ê°€ ì¶”ì„¸ ë¶„ì„\r\n    const sessionTrends = Object.entries(sessionData).map(([sessionId, usages]) => {\r\n      if (usages.length < 5) return null; // ë„ˆë¬´ ì§§ì€ ì„¸ì…˜ì€ ì œì™¸\r\n      \r\n      const firstHalf = usages.slice(0, Math.floor(usages.length / 2));\r\n      const secondHalf = usages.slice(Math.floor(usages.length / 2));\r\n      \r\n      const firstAvg = firstHalf.reduce((sum, val) => sum + val, 0) / firstHalf.length;\r\n      const secondAvg = secondHalf.reduce((sum, val) => sum + val, 0) / secondHalf.length;\r\n      \r\n      const increaseTrend = secondAvg - firstAvg;\r\n      \r\n      return {\r\n        sessionId,\r\n        samplesCount: usages.length,\r\n        increaseTrend,\r\n        percentIncrease: (increaseTrend / firstAvg) * 100\r\n      };\r\n    }).filter(Boolean);\r\n    \r\n    // ë©”ëª¨ë¦¬ ì¦ê°€ ì¶”ì„¸ê°€ ë†’ì€ ì„¸ì…˜ ì •ë ¬\r\n    sessionTrends.sort((a, b) => (b?.increaseTrend || 0) - (a?.increaseTrend || 0));\r\n    const problematicSessions = sessionTrends.filter(session => session && session.percentIncrease > 15);\r\n    \r\n    // ìµœì í™” ì¶”ì²œì‚¬í•­ ìƒì„±\r\n    const recommendations = [];\r\n    \r\n    if (peakHours.length > 0) {\r\n      const formattedHours = peakHours.map(h => `${h.hour}ì‹œ`).join(', ');\r\n      recommendations.push(`ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ì€ ì‹œê°„ëŒ€(${formattedHours})ì— ìë™ ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ ì˜ˆì•½í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    if (problematicSessions.length > 0) {\r\n      recommendations.push(`ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ${problematicSessions.length}ê°œì˜ íŒ¨í„´ì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.`);\r\n      \r\n      if (problematicSessions.length > 2) {\r\n        recommendations.push('ì¥ê¸°ê°„ ì‚¬ìš© ì‹œ ì£¼ê¸°ì ì¸ ì•± ì¬ì‹œì‘ ì¼ì •ì„ ì„¤ì •í•˜ì„¸ìš”.');\r\n      }\r\n    }\r\n    \r\n    // ë©”ëª¨ë¦¬ GC ìµœì  ì£¼ê¸° ì¶”ì²œ\r\n    const gcSuggestion = calculateOptimalGCInterval(memoryUsages);\r\n    if (gcSuggestion) {\r\n      recommendations.push(`ìµœì ì˜ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ì£¼ê¸°: ${gcSuggestion}ms`);\r\n    }\r\n    \r\n    // í•™ìŠµ ê²°ê³¼ ë°˜í™˜\r\n    const result: LearningResult = {\r\n      modelType: LearningModelType.MEMORY_OPTIMIZATION,\r\n      timestamp: Date.now(),\r\n      insights: [\r\n        { type: 'peakHours', data: peakHours },\r\n        { type: 'problematicSessions', data: problematicSessions.slice(0, 5) },\r\n        { type: 'hourlyUsage', data: hourlyAverages },\r\n      ],\r\n      recommendations,\r\n      metrics: {\r\n        sampleSize: memoryLogs.length,\r\n        avgMemoryUsage: memoryUsages.reduce((sum, u) => sum + u.percentUsed, 0) / memoryUsages.length,\r\n        peakMemoryUsage: Math.max(...memoryUsages.map(u => u.percentUsed)),\r\n        problematicSessionsCount: problematicSessions.length\r\n      }\r\n    };\r\n    \r\n    logger.info('ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ í•™ìŠµ ì™„ë£Œ', { \r\n      sampleSize: memoryLogs.length, \r\n      recommendations: recommendations.length \r\n    });\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    logger.error('ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ í•™ìŠµ ì¤‘ ì˜¤ë¥˜:', error as Record<string, unknown>);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ í•™ìŠµ ì˜µì…˜\r\n */\r\nexport interface UserBehaviorOptions {\r\n  timeRange?: {\r\n    startTime?: number;\r\n    endTime?: number;\r\n  };\r\n  minSampleSize?: number;\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ë°ì´í„°ë¡œë¶€í„° ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ì„ í•™ìŠµí•©ë‹ˆë‹¤.\r\n * \r\n * @param options - ì‚¬ìš©ì í–‰ë™ í•™ìŠµ ì˜µì…˜\r\n * @returns í•™ìŠµ ê²°ê³¼\r\n */\r\nexport async function learnUserBehaviorPatterns(\r\n  options: UserBehaviorOptions = {}\r\n): Promise<LearningResult> {\r\n  try {\r\n    logger.info('ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ í•™ìŠµ ì‹œì‘');\r\n    \r\n    // ê¸°ë³¸ê°’ ì„¤ì •\r\n    const minSampleSize = options.minSampleSize || 20;\r\n    const now = Date.now();\r\n    const startTime = options.timeRange?.startTime || now - 30 * 24 * 60 * 60 * 1000; // ê¸°ë³¸ 30ì¼\r\n    const endTime = options.timeRange?.endTime || now;\r\n    \r\n    // ëŒ€í™” ë¡œê·¸ ê²€ìƒ‰\r\n    const conversationLogs = await searchLogs({\r\n      type: LogType.CONVERSATION,\r\n      startTime,\r\n      endTime,\r\n      limit: 1000 // ìµœëŒ€ 1000ê°œê¹Œì§€ë§Œ ê°€ì ¸ì˜´\r\n    });\r\n    \r\n    if (conversationLogs.length < minSampleSize) {\r\n      logger.warn(`ì¶©ë¶„í•œ ëŒ€í™” ë¡œê·¸ ìƒ˜í”Œì´ ì—†ìŠµë‹ˆë‹¤. í•„ìš”: ${minSampleSize}, í˜„ì¬: ${conversationLogs.length}`);\r\n    }\r\n    \r\n    // ëŒ€í™” ë°ì´í„° ì¶”ì¶œ\r\n    const conversations = conversationLogs.map(log => {\r\n      try {\r\n        return {\r\n          ...log,\r\n          parsedContent: JSON.parse(log.content)\r\n        };\r\n      } catch (_) {  // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ëŠ” _ ë¡œë§Œ í‘œì‹œ\r\n        return {\r\n          ...log,\r\n          parsedContent: {\r\n            userMessage: '',\r\n            aiResponse: '',\r\n            timestamp: log.timestamp\r\n          }\r\n        };\r\n      }\r\n    });\r\n    \r\n    // ìì£¼ ì‚¬ìš©ë˜ëŠ” ë‹¨ì–´/êµ¬ë¬¸ ë¶„ì„\r\n    const wordFrequency: WordFrequency = {};\r\n    conversations.forEach(conv => {\r\n      const userMessage = conv.parsedContent?.userMessage || '';\r\n      if (!userMessage) return;\r\n      \r\n      const words = userMessage\r\n        .toLowerCase()\r\n        .replace(/[^\\w\\sê°€-í£]/g, ' ')\r\n        .split(/\\s+/)\r\n        .filter((word: string) => word.length > 1);\r\n      \r\n      words.forEach((word: string) => {\r\n        wordFrequency[word] = (wordFrequency[word] || 0) + 1;\r\n      });\r\n    });\r\n    \r\n    // ì‹œê°„ëŒ€ë³„ í™œë™ íŒ¨í„´ ë¶„ì„\r\n    const hourlyActivity: HourlyActivity = {};\r\n    conversations.forEach(conv => {\r\n      const timestamp = conv.timestamp || conv.parsedContent?.timestamp;\r\n      if (!timestamp) return;\r\n      \r\n      const date = new Date(timestamp);\r\n      const hour = date.getHours();\r\n      \r\n      hourlyActivity[hour] = (hourlyActivity[hour] || 0) + 1;\r\n    });\r\n    \r\n    // ë©”ì‹œì§€ ê¸¸ì´ ë¶„ì„\r\n    const messageLengths = conversations.map(conv => {\r\n      const userMessage = conv.parsedContent?.userMessage || '';\r\n      return userMessage.length;\r\n    });\r\n    \r\n    const avgMessageLength = messageLengths.length > 0 ? \r\n      messageLengths.reduce((sum, len) => sum + len, 0) / messageLengths.length : 0;\r\n    \r\n    // ì„¸ì…˜ë³„ ëŒ€í™” ìˆ˜ ë¶„ì„\r\n    const sessionConversations: SessionConversations = {};\r\n    conversations.forEach(conv => {\r\n      if (!conv.sessionId) return;\r\n      sessionConversations[conv.sessionId] = (sessionConversations[conv.sessionId] || 0) + 1;\r\n    });\r\n    \r\n    const sessionsArray = Object.entries(sessionConversations)\r\n      .map(([id, count]) => ({ id, count: count as number }));\r\n    \r\n    const avgConversationsPerSession = sessionsArray.length > 0 ?\r\n      sessionsArray.reduce((sum, session) => {\r\n        return sum + (session && session.count ? session.count : 0);\r\n      }, 0) / sessionsArray.length : 0;\r\n    \r\n    // í™œë™ì´ ê°€ì¥ ë§ì€ ì‹œê°„ëŒ€ ì‹ë³„: null ì²´í¬ ì¶”ê°€\r\n    const activeHours = Object.entries(hourlyActivity)\r\n      .sort((a, b) => {\r\n        if (a === null || b === null || a[1] === null || b[1] === null) return 0;\r\n        return (b[1] as number) - (a[1] as number);\r\n      })\r\n      .slice(0, 3)\r\n      .map(([hour, count]) => ({ \r\n        hour: parseInt(hour), \r\n        count: count as number \r\n      }));\r\n    \r\n    // ì¶”ì²œì‚¬í•­ ìƒì„±\r\n    const recommendations = [];\r\n    \r\n    if (activeHours.length > 0) {\r\n      const formattedHours = activeHours.map(h => `${h.hour}ì‹œ`).join(', ');\r\n      recommendations.push(`ì‚¬ìš©ìëŠ” ${formattedHours}ì— ê°€ì¥ í™œë°œí•˜ê²Œ í™œë™í•©ë‹ˆë‹¤. ì´ ì‹œê°„ëŒ€ì— ì„±ëŠ¥ì„ ìµœì í™”í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    if (avgMessageLength > 100) {\r\n      recommendations.push(`ì‚¬ìš©ìëŠ” í‰ê·  ${Math.round(avgMessageLength)}ìì˜ ê¸´ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ëŒ€ìš©ëŸ‰ í…ìŠ¤íŠ¸ ì²˜ë¦¬ë¥¼ ìµœì í™”í•˜ì„¸ìš”.`);\r\n    } else {\r\n      recommendations.push(`ì‚¬ìš©ìëŠ” í‰ê·  ${Math.round(avgMessageLength)}ìì˜ ì§§ì€ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ë¹ ë¥¸ ì‘ë‹µì— ì§‘ì¤‘í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    if (avgConversationsPerSession > 10) {\r\n      recommendations.push(`ì‚¬ìš©ìëŠ” ì„¸ì…˜ë‹¹ í‰ê·  ${Math.round(avgConversationsPerSession)}ê°œì˜ ëŒ€í™”ë¥¼ ë‚˜ëˆ•ë‹ˆë‹¤. ì¥ê¸° ì„¸ì…˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    if (Object.keys(wordFrequency).length > 0) {\r\n      const topWords = Object.entries(wordFrequency)\r\n        .sort((a, b) => b[1] - a[1])\r\n        .slice(0, 20)\r\n        .map(([word, count]) => ({ word, count }));\r\n      const topThreeWords = topWords.slice(0, 3).map(w => w.word).join(', ');\r\n      recommendations.push(`ê°€ì¥ ìì£¼ ì‚¬ìš©ëœ í‚¤ì›Œë“œëŠ” \"${topThreeWords}\"ì…ë‹ˆë‹¤. ì´ì™€ ê´€ë ¨ëœ ì‘ë‹µì„ ìµœì í™”í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    // í•™ìŠµ ê²°ê³¼ ë°˜í™˜ ì½”ë“œì—ì„œ íƒ€ì… ë‹¨ì–¸ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬\r\n    const result: LearningResult = {\r\n      modelType: LearningModelType.USER_BEHAVIOR,\r\n      timestamp: Date.now(),\r\n      insights: [\r\n        { type: 'topWords', data: Object.entries(wordFrequency)\r\n          .sort((a, b) => b[1] - a[1])\r\n          .slice(0, 20)\r\n          .map(([word, count]) => ({ word, count })) },\r\n        { type: 'activeHours', data: activeHours },\r\n        { type: 'messageLengths', data: { average: avgMessageLength, max: Math.max(...messageLengths) } },\r\n        { type: 'sessionsActivity', data: { \r\n          average: avgConversationsPerSession, \r\n          maxCount: Math.max(...Object.values(sessionConversations).map(v => v as number)) \r\n        } },\r\n      ],\r\n      recommendations: recommendations || [], // null ì²´í¬ ì¶”ê°€\r\n      metrics: {\r\n        sampleSize: conversations.length,\r\n        uniqueWords: Object.keys(wordFrequency).length,\r\n        avgMessageLength,\r\n        avgConversationsPerSession\r\n      }\r\n    };\r\n    \r\n    // íƒ€ì… ì•ˆì „í•œ ë¡œê¹…\r\n    logger.info('ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ í•™ìŠµ ì™„ë£Œ', { \r\n      sampleSize: conversations.length, \r\n      recommendations: recommendations ? recommendations.length : 0 \r\n    } as Record<string, unknown>);  // íƒ€ì… ë‹¨ì–¸ ì¶”ê°€\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    logger.error('ì‚¬ìš©ì í–‰ë™ íŒ¨í„´ í•™ìŠµ ì¤‘ ì˜¤ë¥˜:', error as Record<string, unknown>);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ì˜¤ë¥˜ ì˜ˆì¸¡ í•™ìŠµ ì˜µì…˜\r\n */\r\nexport interface ErrorPredictionOptions {\r\n  timeRange?: {\r\n    startTime?: number;\r\n    endTime?: number;\r\n  };\r\n  minSampleSize?: number;\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ë°ì´í„°ë¡œë¶€í„° ì˜¤ë¥˜ íŒ¨í„´ì„ í•™ìŠµí•˜ì—¬ ì˜ˆì¸¡ ëª¨ë¸ì„ ìƒì„±í•©ë‹ˆë‹¤.\r\n * \r\n * @param options - ì˜¤ë¥˜ ì˜ˆì¸¡ í•™ìŠµ ì˜µì…˜\r\n * @returns í•™ìŠµ ê²°ê³¼\r\n */\r\nexport async function learnErrorPatterns(\r\n  options: ErrorPredictionOptions = {}\r\n): Promise<LearningResult> {\r\n  try {\r\n    logger.info('ì˜¤ë¥˜ íŒ¨í„´ í•™ìŠµ ì‹œì‘');\r\n    \r\n    // ê¸°ë³¸ê°’ ì„¤ì •\r\n    const minSampleSize = options.minSampleSize || 10;\r\n    const now = Date.now();\r\n    const startTime = options.timeRange?.startTime || now - 30 * 24 * 60 * 60 * 1000; // ê¸°ë³¸ 30ì¼\r\n    const endTime = options.timeRange?.endTime || now;\r\n    \r\n    // ì˜¤ë¥˜ ë¡œê·¸ ê²€ìƒ‰\r\n    const errorLogs = await searchLogs({\r\n      type: LogType.ERROR,\r\n      startTime,\r\n      endTime,\r\n      limit: 1000\r\n    });\r\n    \r\n    if (errorLogs.length < minSampleSize) {\r\n      logger.warn(`ì¶©ë¶„í•œ ì˜¤ë¥˜ ë¡œê·¸ ìƒ˜í”Œì´ ì—†ìŠµë‹ˆë‹¤. í•„ìš”: ${minSampleSize}, í˜„ì¬: ${errorLogs.length}`);\r\n    }\r\n    \r\n    // ì˜¤ë¥˜ ë©”ì‹œì§€ ë¶„ë¥˜\r\n    const errorGroups: ErrorGroups = {};\r\n    errorLogs.forEach(log => {\r\n      // ì˜¤ë¥˜ ë©”ì‹œì§€ì—ì„œ í•µì‹¬ ë¶€ë¶„ë§Œ ì¶”ì¶œ\r\n      const errorMessage = log.content || '';\r\n      const errorType = getErrorType(errorMessage);\r\n      \r\n      if (!errorGroups[errorType]) {\r\n        errorGroups[errorType] = {\r\n          count: 0,\r\n          examples: [],\r\n          sessionIds: new Set()\r\n        };\r\n      }\r\n      \r\n      errorGroups[errorType].count++;\r\n      \r\n      // ìµœëŒ€ 5ê°œê¹Œì§€ë§Œ ì˜ˆì‹œ ì €ì¥\r\n      if (errorGroups[errorType].examples.length < 5) {\r\n        errorGroups[errorType].examples.push({\r\n          message: errorMessage,\r\n          timestamp: log.timestamp\r\n        });\r\n      }\r\n      \r\n      // ì„¸ì…˜ IDê°€ ìˆëŠ” ê²½ìš° ì¶”ê°€\r\n      if (log.sessionId) {\r\n        errorGroups[errorType].sessionIds.add(log.sessionId);\r\n      }\r\n    });\r\n    \r\n    // ê°€ì¥ ë¹ˆë²ˆí•œ ì˜¤ë¥˜ ì¶”ì¶œ\r\n    const topErrors = Object.entries(errorGroups)\r\n      .map(([type, data]) => ({\r\n        type,\r\n        count: data.count,\r\n        examples: data.examples,\r\n        uniqueSessions: data.sessionIds.size\r\n      }))\r\n      .sort((a, b) => b.count - a.count);\r\n    \r\n    // ì‹œê°„ëŒ€ë³„ ì˜¤ë¥˜ ë°œìƒ íŒ¨í„´\r\n    const hourlyErrors: Record<number, number> = {};\r\n    errorLogs.forEach(log => {\r\n      const date = new Date(log.timestamp);\r\n      const hour = date.getHours();\r\n      \r\n      hourlyErrors[hour] = (hourlyErrors[hour] || 0) + 1;\r\n    });\r\n    \r\n    // ê°€ì¥ ì˜¤ë¥˜ê°€ ë§ì€ ì‹œê°„ëŒ€\r\n    const errorPeakHours = Object.entries(hourlyErrors)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([hour, count]) => ({ hour: parseInt(hour), count }));\r\n    \r\n    // ì¶”ì²œì‚¬í•­ ìƒì„±\r\n    const recommendations = [];\r\n    \r\n    if (topErrors.length > 0) {\r\n      const topError = topErrors[0];\r\n      recommendations.push(`ê°€ì¥ ë¹ˆë²ˆí•œ ì˜¤ë¥˜ \"${topError.type}\"ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ ê°•í™”í•˜ì„¸ìš”. (${topError.count}íšŒ ë°œìƒ)`);\r\n      \r\n      if (topError.uniqueSessions > 3) {\r\n        recommendations.push(`\"${topError.type}\" ì˜¤ë¥˜ê°€ ${topError.uniqueSessions}ê°œì˜ ë‹¤ë¥¸ ì„¸ì…˜ì—ì„œ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œì  ë¬¸ì œì¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.`);\r\n      }\r\n    }\r\n    \r\n    if (errorPeakHours.length > 0) {\r\n      const formattedHours = errorPeakHours.map(h => `${h.hour}ì‹œ`).join(', ');\r\n      recommendations.push(`${formattedHours}ì— ì˜¤ë¥˜ ë°œìƒë¥ ì´ ë†’ìŠµë‹ˆë‹¤. ì´ ì‹œê°„ëŒ€ì— ì¶”ê°€ ëª¨ë‹ˆí„°ë§ì„ ì„¤ì •í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    if (errorLogs.length > 50) {\r\n      const errorRate = (errorLogs.length / ((endTime - startTime) / (24 * 60 * 60 * 1000))).toFixed(2);\r\n      recommendations.push(`ì¼í‰ê·  ${errorRate}ê°œì˜ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì˜¤ë¥˜ ì²˜ë¦¬ ë¡œì§ì„ ê²€í† í•˜ì„¸ìš”.`);\r\n    }\r\n    \r\n    // í•™ìŠµ ê²°ê³¼ ë°˜í™˜\r\n    const result: LearningResult = {\r\n      modelType: LearningModelType.ERROR_PREDICTION,\r\n      timestamp: Date.now(),\r\n      insights: [\r\n        { type: 'topErrors', data: topErrors.slice(0, 5) },\r\n        { type: 'errorPeakHours', data: errorPeakHours },\r\n        { type: 'errorDistribution', data: Object.fromEntries(topErrors.slice(0, 10).map(e => [e.type, e.count])) }\r\n      ],\r\n      recommendations,\r\n      metrics: {\r\n        sampleSize: errorLogs.length,\r\n        uniqueErrorTypes: Object.keys(errorGroups).length,\r\n        mostFrequentErrorCount: topErrors.length > 0 ? topErrors[0].count : 0,\r\n        errorVarietyIndex: Object.keys(errorGroups).length / errorLogs.length\r\n      }\r\n    };\r\n    \r\n    logger.info('ì˜¤ë¥˜ íŒ¨í„´ í•™ìŠµ ì™„ë£Œ', { \r\n      sampleSize: errorLogs.length, \r\n      errorTypes: Object.keys(errorGroups).length \r\n    });\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    logger.error('ì˜¤ë¥˜ íŒ¨í„´ í•™ìŠµ ì¤‘ ì˜¤ë¥˜:', error as Record<string, unknown>);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * ì—¬ëŸ¬ í•™ìŠµ ê²°ê³¼ë¥¼ í†µí•©í•˜ì—¬ ì¢…í•©ì ì¸ ìµœì í™” ì¶”ì²œì„ ìƒì„±í•©ë‹ˆë‹¤.\r\n * \r\n * @param results - í•™ìŠµ ê²°ê³¼ ë°°ì—´\r\n * @returns í†µí•©ëœ ì¶”ì²œì‚¬í•­ ë°°ì—´\r\n */\r\nexport function combineRecommendations(results: LearningResult[]): string[] {\r\n  // ëª¨ë“  ì¶”ì²œì‚¬í•­ ìˆ˜ì§‘\r\n  const allRecommendations = results.flatMap(result => result.recommendations);\r\n  \r\n  // ì¤‘ë³µ ì œê±° (ìœ ì‚¬í•œ ì¶”ì²œì‚¬í•­ ë³‘í•©)\r\n  const uniqueRecommendations = [];\r\n  const addedKeywords = new Set();\r\n  \r\n  for (const rec of allRecommendations) {\r\n    // ë¬¸ì¥ì—ì„œ í•µì‹¬ í‚¤ì›Œë“œ ì¶”ì¶œ (ê°„ë‹¨í•œ êµ¬í˜„)\r\n    const keywords = rec.toLowerCase().replace(/[^\\w\\sê°€-í£]/g, ' ').split(/\\s+/).filter(w => w.length > 4);\r\n    \r\n    // ì´ë¯¸ ìœ ì‚¬í•œ í‚¤ì›Œë“œê°€ ìˆëŠ”ì§€ í™•ì¸\r\n    let isDuplicate = false;\r\n    for (const keyword of keywords) {\r\n      if (addedKeywords.has(keyword)) {\r\n        isDuplicate = true;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (!isDuplicate) {\r\n      uniqueRecommendations.push(rec);\r\n      keywords.forEach(keyword => addedKeywords.add(keyword));\r\n    }\r\n  }\r\n  \r\n  return uniqueRecommendations;\r\n}\r\n\r\n/**\r\n * ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ ì—ëŸ¬ íƒ€ì…ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.\r\n * \r\n * @param errorMessage - ì—ëŸ¬ ë©”ì‹œì§€\r\n * @returns ì¶”ì¶œëœ ì—ëŸ¬ íƒ€ì…\r\n */\r\nfunction getErrorType(errorMessage: string): string {\r\n  // ì¼ë°˜ì ì¸ JavaScript ì˜¤ë¥˜ íŒ¨í„´ í™•ì¸\r\n  if (errorMessage.includes('TypeError:')) return 'TypeError';\r\n  if (errorMessage.includes('ReferenceError:')) return 'ReferenceError';\r\n  if (errorMessage.includes('SyntaxError:')) return 'SyntaxError';\r\n  if (errorMessage.includes('RangeError:')) return 'RangeError';\r\n  if (errorMessage.includes('NetworkError:') || errorMessage.includes('ë„¤íŠ¸ì›Œí¬')) return 'NetworkError';\r\n  if (errorMessage.includes('API ìš”ì²­ ì‹¤íŒ¨') || errorMessage.includes('API request failed')) return 'APIError';\r\n  if (errorMessage.includes('Permission denied') || errorMessage.includes('ê¶Œí•œ')) return 'PermissionError';\r\n  if (errorMessage.includes('not found') || errorMessage.includes('ì°¾ì„ ìˆ˜ ì—†ìŒ')) return 'NotFoundError';\r\n  if (errorMessage.includes('ë©”ëª¨ë¦¬') || errorMessage.includes('memory')) return 'MemoryError';\r\n  \r\n  // íŠ¹ì • í‚¤ì›Œë“œë¡œ ë¶„ë¥˜\r\n  if (errorMessage.includes('undefined') || errorMessage.includes('null')) return 'NullError';\r\n  if (errorMessage.includes('promise') || errorMessage.includes('async')) return 'AsyncError';\r\n  if (errorMessage.includes('ì´ˆê³¼') || errorMessage.includes('limit') || errorMessage.includes('threshold')) return 'LimitExceededError';\r\n  \r\n  // ê¸°ë³¸ê°’ ë°˜í™˜\r\n  return 'UnknownError';\r\n}\r\n\r\n/**\r\n * ìµœì ì˜ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ê°„ê²©ì„ ê³„ì‚°í•©ë‹ˆë‹¤.\r\n * \r\n * @param memoryUsages - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë°ì´í„°\r\n * @returns ìµœì ì˜ GC ê°„ê²©(ms) ë˜ëŠ” null\r\n */\r\nfunction calculateOptimalGCInterval(memoryUsages: any[]): number | null {\r\n  if (memoryUsages.length < 10) return null;\r\n  \r\n  // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€ íŒ¨í„´ ë¶„ì„\r\n  const _timestamps = memoryUsages.map(u => u.timestamp);  // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ì— _ ì ‘ë‘ì‚¬ ì¶”ê°€\r\n  const _memoryValues = memoryUsages.map(u => u.percentUsed);  // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ì— _ ì ‘ë‘ì‚¬ ì¶”ê°€\r\n  \r\n  // ì •ë ¬\r\n  const sortedData = memoryUsages\r\n    .map((u, _i) => ({ timestamp: u.timestamp, value: u.percentUsed }))\r\n    .sort((a, b) => a.timestamp - b.timestamp);\r\n  \r\n  // ì¦ê°€ìœ¨ ê³„ì‚°\r\n  const increases = [];\r\n  for (let i = 1; i < sortedData.length; i++) {\r\n    const timeDiff = sortedData[i].timestamp - sortedData[i-1].timestamp;\r\n    const valueDiff = sortedData[i].value - sortedData[i-1].value;\r\n    \r\n    if (valueDiff > 0 && timeDiff > 0) {\r\n      increases.push({\r\n        rate: valueDiff / timeDiff * 1000, // msë‹¹ ì¦ê°€ìœ¨ì„ ì´ˆë‹¹ ì¦ê°€ìœ¨ë¡œ ë³€í™˜\r\n        timeDiff\r\n      });\r\n    }\r\n  }\r\n  \r\n  if (increases.length < 5) return null;\r\n  \r\n  // ì¤‘ì•™ê°’ ê³„ì‚°\r\n  increases.sort((a, b) => a.rate - b.rate);\r\n  const medianRate = increases[Math.floor(increases.length / 2)].rate;\r\n  \r\n  // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ 5% ì¦ê°€í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” í‰ê·  ì‹œê°„ (ë°€ë¦¬ì´ˆ)\r\n  const timeToIncrease5Percent = 5 / medianRate * 1000;\r\n  \r\n  // ì ì ˆí•œ GC ê°„ê²© = ë©”ëª¨ë¦¬ê°€ 5% ì¦ê°€í•˜ëŠ” ì‹œê°„ì˜ 80%\r\n  // ì´ ê°’ì€ ê²½í—˜ì ìœ¼ë¡œ ê²°ì •ëœ ê²ƒì´ë©°, ìƒí™©ì— ë”°ë¼ ì¡°ì • ê°€ëŠ¥\r\n  const suggestedInterval = Math.round(timeToIncrease5Percent * 0.8);\r\n  \r\n  // í•©ë¦¬ì ì¸ ë²”ìœ„ ë‚´ì— ìˆëŠ”ì§€ ê²€ì¦ (ìµœì†Œ 10ì´ˆ, ìµœëŒ€ 5ë¶„)\r\n  const minInterval = 10 * 1000;\r\n  const maxInterval = 5 * 60 * 1000;\r\n  \r\n  if (suggestedInterval < minInterval) return minInterval;\r\n  if (suggestedInterval > maxInterval) return maxInterval;\r\n  \r\n  return suggestedInterval;\r\n}\r\n","/**\r\n * í¬ë§·íŒ… ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\r\n */\r\n\r\n/**\r\n * ë°”ì´íŠ¸ í¬ê¸°ë¥¼ ì‚¬ëŒì´ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜\r\n */\r\nexport function formatBytes(bytes: number, decimals: number = 2): string {\r\n  if (bytes === 0) return '0 Bytes';\r\n\r\n  const k = 1024;\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i];\r\n}\r\n\r\n/**\r\n * ìˆ«ìë¥¼ ì²œ ë‹¨ìœ„ êµ¬ë¶„ìê°€ ìˆëŠ” ë¬¸ìì—´ë¡œ ë³€í™˜\r\n */\r\nexport function formatNumber(num: number): string {\r\n  return num.toLocaleString();\r\n}\r\n\r\n/**\r\n * ì‹œê°„(ë°€ë¦¬ì´ˆ)ì„ ì½ê¸° ì‰¬ìš´ í˜•íƒœë¡œ ë³€í™˜\r\n */\r\nexport function formatTime(milliseconds: number): string {\r\n  if (milliseconds < 1000) {\r\n    return `${milliseconds}ms`;\r\n  } else if (milliseconds < 60000) {\r\n    return `${(milliseconds / 1000).toFixed(1)}s`;\r\n  } else {\r\n    const minutes = Math.floor(milliseconds / 60000);\r\n    const seconds = ((milliseconds % 60000) / 1000).toFixed(0);\r\n    return `${minutes}m ${seconds}s`;\r\n  }\r\n}\r\n\r\n/**\r\n * WPM(ë¶„ë‹¹ ë‹¨ì–´ ìˆ˜) í¬ë§·íŒ…\r\n */\r\nexport function formatWPM(wpm: number): string {\r\n  return `${Math.round(wpm)} WPM`;\r\n}\r\n","'use client';\r\n\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { LearningModelType, LearningResult } from '../utils/log-learning';\r\nimport { formatBytes, formatTime } from '../utils/format-utils';\r\nimport KeyboardIcon from '@mui/icons-material/Keyboard';\r\nimport styles from './LogAnalysisPanel.module.css';\r\n\r\n/**\r\n * ì‹œê°„ë³„ ë°ì´í„°ë¥¼ ìœ„í•œ íƒ€ì… ì •ì˜\r\n */\r\ninterface HourData {\r\n  hour: number;\r\n  count: number;\r\n  percentage?: number;\r\n  // í•„ìš”í•œ ë‹¤ë¥¸ ì†ì„±ë“¤ ì¶”ê°€\r\n}\r\n\r\n/**\r\n * ì„¸ì…˜ ë°ì´í„°ë¥¼ ìœ„í•œ íƒ€ì… ì •ì˜\r\n */\r\ninterface SessionData {\r\n  id: string;\r\n  duration: number;\r\n  keyCount: number;\r\n  date: string;\r\n  // í•„ìš”í•œ ë‹¤ë¥¸ ì†ì„±ë“¤ ì¶”ê°€\r\n}\r\n\r\n/**\r\n * ë‹¨ì–´ ë°ì´í„°ë¥¼ ìœ„í•œ íƒ€ì… ì •ì˜\r\n */\r\ninterface WordData {\r\n  word: string;\r\n  count: number;\r\n  percentage?: number;\r\n  // í•„ìš”í•œ ë‹¤ë¥¸ ì†ì„±ë“¤ ì¶”ê°€\r\n}\r\n\r\ninterface LogAnalysisPanelProps {\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * ë¡œê·¸ ë¶„ì„ íŒ¨ë„ ì»´í¬ë„ŒíŠ¸\r\n * ë¡œê·¸ ë°ì´í„°ë¥¼ í•™ìŠµí•˜ê³  ë¶„ì„ ê²°ê³¼ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\r\n */\r\nexport default function LogAnalysisPanel({ className = '' }: LogAnalysisPanelProps) {\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [results, setResults] = useState<LearningResult[]>([]);\r\n  const [selectedTab, setSelectedTab] = useState<LearningModelType>(LearningModelType.MEMORY_OPTIMIZATION);\r\n  const [lastAnalysisTime, setLastAnalysisTime] = useState<number | null>(null);\r\n  const [combinedRecommendations, setCombinedRecommendations] = useState<string[]>([]);\r\n\r\n  // í•™ìŠµ ìƒíƒœ\r\n  const [, setLearningStatus] = useState<{\r\n    isLearning: boolean;\r\n    lastLearningTime: number | null;\r\n    availableModels: LearningModelType[];\r\n  }>({\r\n    isLearning: false,\r\n    lastLearningTime: null,\r\n    availableModels: Object.values(LearningModelType)\r\n  });\r\n\r\n  const learningStatusRef = useRef(false);\r\n\r\n  /**\r\n   * í•™ìŠµ ìƒíƒœ í™•ì¸\r\n   */\r\n  const checkLearningStatus = useCallback(async () => {\r\n    try {\r\n      const response = await fetch('/api/logs/learn');\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setLearningStatus(data.status || {\r\n          isLearning: false,\r\n          lastLearningTime: null,\r\n          availableModels: Object.values(LearningModelType)\r\n        });\r\n      } else {\r\n        console.error('í•™ìŠµ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜:', data.error);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('í•™ìŠµ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\r\n    }\r\n  }, []);\r\n\r\n  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ í•™ìŠµ ìƒíƒœ í™•ì¸\r\n  useEffect(() => {\r\n    checkLearningStatus();\r\n  }, [checkLearningStatus]);\r\n\r\n  /**\r\n   * í•™ìŠµ ì‹¤í–‰\r\n   */\r\n  const runLearning = useCallback(async (models: LearningModelType[] = []) => {\r\n    // ëª¨ë¸ì„ ì§€ì •í•˜ì§€ ì•Šì€ ê²½ìš° ê¸°ë³¸ê°’ìœ¼ë¡œ ëª¨ë“  ëª¨ë¸ ì‚¬ìš©\r\n    const modelsToLearn = models.length > 0\r\n      ? models\r\n      : Object.values(LearningModelType);\r\n\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/logs/learn', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          modelTypes: modelsToLearn,\r\n          options: {\r\n            memory: {\r\n              timeRange: {\r\n                startTime: Date.now() - 7 * 24 * 60 * 60 * 1000, // 1ì£¼ì¼\r\n                endTime: Date.now()\r\n              }\r\n            },\r\n            user: {\r\n              timeRange: {\r\n                startTime: Date.now() - 30 * 24 * 60 * 60 * 1000, // 1ê°œì›”\r\n                endTime: Date.now()\r\n              }\r\n            },\r\n            error: {\r\n              timeRange: {\r\n                startTime: Date.now() - 30 * 24 * 60 * 60 * 1000, // 1ê°œì›”\r\n                endTime: Date.now()\r\n              }\r\n            }\r\n          }\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status} ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setResults(data.results || []);\r\n        setCombinedRecommendations(data.combinedRecommendations || []);\r\n        setLastAnalysisTime(data.timestamp || Date.now());\r\n\r\n        // í•™ìŠµ ìƒíƒœ ì—…ë°ì´íŠ¸\r\n        await checkLearningStatus();\r\n      } else {\r\n        setError(data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\r\n      }\r\n    } catch (error: any) {\r\n      setError(error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [checkLearningStatus]);\r\n\r\n  /**\r\n   * íŠ¹ì • ëª¨ë¸ ìœ í˜•ì— ëŒ€í•œ í•™ìŠµ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  const getResultForModel = (modelType: LearningModelType): LearningResult | undefined => {\r\n    return results.find(result => result.modelType === modelType);\r\n  };\r\n\r\n  /**\r\n   * í•™ìŠµ ê²°ê³¼ì—ì„œ ì¶”ì²œ ì‚¬í•­ ë Œë”ë§\r\n   */\r\n  const renderRecommendations = (recommendations: string[]) => {\r\n    return (\r\n      <ul className={styles.recommendationList}>\r\n        {recommendations.map((rec, index) => (\r\n          <li key={index} className={styles.recommendationItem}>{rec}</li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * í†µê³„ í•­ëª© ë Œë”ë§\r\n   */\r\n  const renderMetricItem = (label: string, value: any) => {\r\n    let formattedValue = value;\r\n\r\n    // ìˆ«ìì¸ ê²½ìš° ì†Œìˆ˜ì  ì²˜ë¦¬\r\n    if (typeof value === 'number') {\r\n      // ë©”ëª¨ë¦¬ ê´€ë ¨ í•­ëª©ì€ MB ë˜ëŠ” ë°”ì´íŠ¸ë¡œ í‘œì‹œ\r\n      if (label.toLowerCase().includes('memory') ||\r\n        label.toLowerCase().includes('heap') ||\r\n        label.toLowerCase().includes('size')) {\r\n        formattedValue = formatBytes(value);\r\n      }\r\n      // 0ê³¼ 1 ì‚¬ì´ì˜ ê°’ì€ ë°±ë¶„ìœ¨ë¡œ í‘œì‹œ\r\n      else if (value > 0 && value < 1) {\r\n        formattedValue = `${(value * 100).toFixed(2)}%`;\r\n      }\r\n      // ê¸°íƒ€ ìˆ«ìëŠ” ì†Œìˆ˜ì  2ìë¦¬ê¹Œì§€ í‘œì‹œ\r\n      else {\r\n        formattedValue = Number.isInteger(value) ? value : value.toFixed(2);\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div key={label} className={styles.metricItem}>\r\n        <span className={styles.metricLabel}>{label}:</span>\r\n        <span className={styles.metricValue}>{formattedValue}</span>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * ë©”ëª¨ë¦¬ ìµœì í™” ê²°ê³¼ ë Œë”ë§\r\n   */\r\n  const renderMemoryOptimizationResults = () => {\r\n    const result = getResultForModel(LearningModelType.MEMORY_OPTIMIZATION);\r\n\r\n    if (!result) {\r\n      return (\r\n        <div className={styles.noResults}>\r\n          <p>ë©”ëª¨ë¦¬ ìµœì í™” í•™ìŠµ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n          <button\r\n            onClick={() => runLearning([LearningModelType.MEMORY_OPTIMIZATION])}\r\n            disabled={isLoading}\r\n            className={styles.learningButton}\r\n          >\r\n            ë©”ëª¨ë¦¬ íŒ¨í„´ í•™ìŠµí•˜ê¸°\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const { insights, recommendations, metrics } = result;\r\n\r\n    return (\r\n      <div className={styles.resultSection}>\r\n        <h3>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¶„ì„ ê²°ê³¼</h3>\r\n\r\n        {/* ì¸ì‚¬ì´íŠ¸ í‘œì‹œ */}\r\n        <div className={styles.insightsSection}>\r\n          <h4>ì£¼ìš” ì¸ì‚¬ì´íŠ¸</h4>\r\n\r\n          {insights.map((insight, index) => {\r\n            if (insight.type === 'peakHours' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í”¼í¬ ì‹œê°„ëŒ€</h5>\r\n                  <div className={styles.peakHoursChart}>\r\n                    {insight.data.map((hour: HourData, i: number) => (\r\n                      <div key={i} className={styles.hourBar}>\r\n                        <div \r\n                          className={styles.hourBarFill} \r\n                          style={{ height: `${hour.percentage || 0}%` }}\r\n                        />\r\n                        <span className={styles.hourLabel}>{hour.hour}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            if (insight.type === 'problematicSessions' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>ì˜ì‹¬ë˜ëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì„¸ì…˜</h5>\r\n                  <ul className={styles.sessionsList}>\r\n                    {insight.data.map((session: SessionData, i: number) => (\r\n                      <div key={i} className={styles.sessionItem}>\r\n                        <div className={styles.sessionDetails}>\r\n                          <span className={styles.sessionDate}>{session.date}</span>\r\n                          <span className={styles.sessionDuration}>{formatTime(session.duration)}</span>\r\n                        </div>\r\n                        <div className={styles.sessionKeyCount}>\r\n                          <KeyboardIcon className={styles.keyIcon} />\r\n                          <span>{session.keyCount}</span>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return null;\r\n          })}\r\n        </div>\r\n\r\n        {/* ë©”íŠ¸ë¦­ í‘œì‹œ */}\r\n        <div className={styles.metricsSection}>\r\n          <h4>ë©”ëª¨ë¦¬ ì‚¬ìš© í†µê³„</h4>\r\n          <div className={styles.metricsGrid}>\r\n            {Object.entries(metrics).map(([key, value]) =>\r\n              renderMetricItem(\r\n                key\r\n                  .replace(/([A-Z])/g, ' $1')\r\n                  .replace(/^./, str => str.toUpperCase()),\r\n                value\r\n              )\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ì¶”ì²œ ì‚¬í•­ í‘œì‹œ */}\r\n        <div className={styles.recommendationsSection}>\r\n          <h4>ì¶”ì²œ ì‚¬í•­</h4>\r\n          {renderRecommendations(recommendations)}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ê²°ê³¼ ë Œë”ë§\r\n   */\r\n  const renderUserBehaviorResults = () => {\r\n    const result = getResultForModel(LearningModelType.USER_BEHAVIOR);\r\n\r\n    if (!result) {\r\n      return (\r\n        <div className={styles.noResults}>\r\n          <p>ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n          <button\r\n            onClick={() => runLearning([LearningModelType.USER_BEHAVIOR])}\r\n            disabled={isLoading}\r\n            className={styles.learningButton}\r\n          >\r\n            ì‚¬ìš©ì íŒ¨í„´ í•™ìŠµí•˜ê¸°\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const { insights, recommendations, metrics } = result;\r\n\r\n    return (\r\n      <div className={styles.resultSection}>\r\n        <h3>ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ê²°ê³¼</h3>\r\n\r\n        {/* ì¸ì‚¬ì´íŠ¸ í‘œì‹œ */}\r\n        <div className={styles.insightsSection}>\r\n          <h4>ì£¼ìš” ì¸ì‚¬ì´íŠ¸</h4>\r\n\r\n          {insights.map((insight, index) => {\r\n            if (insight.type === 'topWords' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>ìì£¼ ì‚¬ìš©í•˜ëŠ” ë‹¨ì–´</h5>\r\n                  <div className={styles.wordCloud}>\r\n                    {insight.data.slice(0, 10).map((word: WordData, i: number) => (\r\n                      <div key={i} className={styles.wordItem}>\r\n                        <span className={styles.wordRank}>{i + 1}</span>\r\n                        <span className={styles.wordText}>{word.word}</span>\r\n                        <span className={styles.wordCount}>{word.count}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            if (insight.type === 'activeHours' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>í™œë°œí•œ í™œë™ ì‹œê°„ëŒ€</h5>\r\n                  <div className={styles.activeHoursChart}>\r\n                    {insight.data.map((hour: HourData, i: number) => (\r\n                      <div key={i} className={styles.hourBar}>\r\n                        <div \r\n                          className={styles.hourBarFill} \r\n                          style={{ height: `${hour.percentage || 0}%` }}\r\n                        />\r\n                        <span className={styles.hourLabel}>{hour.hour}</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return null;\r\n          })}\r\n        </div>\r\n\r\n        {/* ë©”íŠ¸ë¦­ í‘œì‹œ */}\r\n        <div className={styles.metricsSection}>\r\n          <h4>ì‚¬ìš© í†µê³„</h4>\r\n          <div className={styles.metricsGrid}>\r\n            {Object.entries(metrics).map(([key, value]) =>\r\n              renderMetricItem(\r\n                key\r\n                  .replace(/([A-Z])/g, ' $1')\r\n                  .replace(/^./, str => str.toUpperCase()),\r\n                value\r\n              )\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ì¶”ì²œ ì‚¬í•­ í‘œì‹œ */}\r\n        <div className={styles.recommendationsSection}>\r\n          <h4>ì¶”ì²œ ì‚¬í•­</h4>\r\n          {renderRecommendations(recommendations)}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * ì˜¤ë¥˜ ë¶„ì„ ê²°ê³¼ ë Œë”ë§\r\n   */\r\n  const renderErrorPredictionResults = () => {\r\n    const result = getResultForModel(LearningModelType.ERROR_PREDICTION);\r\n\r\n    if (!result) {\r\n      return (\r\n        <div className={styles.noResults}>\r\n          <p>ì˜¤ë¥˜ ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n          <button\r\n            onClick={() => runLearning([LearningModelType.ERROR_PREDICTION])}\r\n            disabled={isLoading}\r\n            className={styles.learningButton}\r\n          >\r\n            ì˜¤ë¥˜ íŒ¨í„´ í•™ìŠµí•˜ê¸°\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const { insights, recommendations, metrics } = result;\r\n\r\n    return (\r\n      <div className={styles.resultSection}>\r\n        <h3>ì˜¤ë¥˜ íŒ¨í„´ ë¶„ì„ ê²°ê³¼</h3>\r\n\r\n        {/* ì¸ì‚¬ì´íŠ¸ í‘œì‹œ */}\r\n        <div className={styles.insightsSection}>\r\n          <h4>ì£¼ìš” ì¸ì‚¬ì´íŠ¸</h4>\r\n\r\n          {insights.map((insight, index) => {\r\n            if (insight.type === 'topErrors' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>ê°€ì¥ ë¹ˆë²ˆí•œ ì˜¤ë¥˜ ìœ í˜•</h5>\r\n                  <ul className={styles.errorsList}>\r\n                    {insight.data.map((error: any, i: number) => (\r\n                      <li key={i} className={styles.errorItem}>\r\n                        <span className={styles.errorType}>{error.type}</span>\r\n                        <span className={styles.errorCount}>{error.count}íšŒ</span>\r\n                        <div className={styles.errorBar} style={{ width: `${Math.min(100, error.count * 5)}%` }} />\r\n\r\n                        {error.examples && error.examples.length > 0 && (\r\n                          <div className={styles.errorExample}>\r\n                            <span className={styles.errorExampleLabel}>ì˜ˆì‹œ:</span>\r\n                            <span className={styles.errorExampleContent}>\r\n                              {error.examples[0].message}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            if (insight.type === 'errorPeakHours' && insight.data.length > 0) {\r\n              return (\r\n                <div key={index} className={styles.insightItem}>\r\n                  <h5>ì˜¤ë¥˜ ë°œìƒ ë¹ˆë„ ë†’ì€ ì‹œê°„ëŒ€</h5>\r\n                  <div className={styles.errorHoursChart}>\r\n                    {insight.data.map((hour: HourData, i: number) => (\r\n                      <div key={i} className={styles.errorHourBar}\r\n                        style={{\r\n                          height: `${Math.max(20, (hour.count / 5) * 100)}px`,\r\n                          backgroundColor: i === 0 ? '#e03131' : '#f08c00'\r\n                        }}\r\n                      >\r\n                        <span className={styles.errorHourLabel}>{hour.hour}ì‹œ</span>\r\n                        <span className={styles.errorHourValue}>{hour.count}íšŒ</span>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n\r\n            return null;\r\n          })}\r\n        </div>\r\n\r\n        {/* ë©”íŠ¸ë¦­ í‘œì‹œ */}\r\n        <div className={styles.metricsSection}>\r\n          <h4>ì˜¤ë¥˜ í†µê³„</h4>\r\n          <div className={styles.metricsGrid}>\r\n            {Object.entries(metrics).map(([key, value]) =>\r\n              renderMetricItem(\r\n                key\r\n                  .replace(/([A-Z])/g, ' $1')\r\n                  .replace(/^./, str => str.toUpperCase()),\r\n                value\r\n              )\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ì¶”ì²œ ì‚¬í•­ í‘œì‹œ */}\r\n        <div className={styles.recommendationsSection}>\r\n          <h4>ì¶”ì²œ ì‚¬í•­</h4>\r\n          {renderRecommendations(recommendations)}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  /**\r\n   * ì¢…í•© ë¶„ì„ ê²°ê³¼ ë Œë”ë§\r\n   */\r\n  const renderOverallInsights = () => {\r\n    if (combinedRecommendations.length === 0) {\r\n      return (\r\n        <div className={styles.noResults}>\r\n          <p>ì¢…í•© ë¶„ì„ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ì–‘í•œ ìœ í˜•ì˜ í•™ìŠµì„ ì‹¤í–‰í•˜ì„¸ìš”.</p>\r\n          <button\r\n            onClick={() => runLearning()}\r\n            disabled={isLoading}\r\n            className={styles.learningButton}\r\n          >\r\n            ì „ì²´ í•™ìŠµ ì‹¤í–‰í•˜ê¸°\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={styles.resultSection}>\r\n        <h3>ì¢…í•© ë¶„ì„ ê²°ê³¼</h3>\r\n\r\n        <div className={styles.overallSummary}>\r\n          <div className={styles.summaryStats}>\r\n            <div className={styles.summaryStat}>\r\n              <span className={styles.summaryStatLabel}>ë¶„ì„ëœ ëª¨ë¸</span>\r\n              <span className={styles.summaryStatValue}>{results.length}</span>\r\n            </div>\r\n            <div className={styles.summaryStat}>\r\n              <span className={styles.summaryStatLabel}>ì´ ì¶”ì²œì‚¬í•­</span>\r\n              <span className={styles.summaryStatValue}>{combinedRecommendations.length}</span>\r\n            </div>\r\n            <div className={styles.summaryStat}>\r\n              <span className={styles.summaryStatLabel}>ë§ˆì§€ë§‰ ë¶„ì„</span>\r\n              <span className={styles.summaryStatValue}>\r\n                {lastAnalysisTime\r\n                  ? new Date(lastAnalysisTime).toLocaleString()\r\n                  : 'ì—†ìŒ'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles.recommendationsSection}>\r\n            <h4>í†µí•© ì¶”ì²œ ì‚¬í•­</h4>\r\n            {renderRecommendations(combinedRecommendations)}\r\n          </div>\r\n\r\n          <div className={styles.actionButtons}>\r\n            <button\r\n              onClick={() => runLearning()}\r\n              disabled={isLoading}\r\n              className={styles.learningButton}\r\n            >\r\n              {isLoading ? 'í•™ìŠµ ì¤‘...' : 'í•™ìŠµ ë‹¤ì‹œ ì‹¤í–‰í•˜ê¸°'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // ì„ íƒí•œ íƒ­ì— ë”°ë¼ ê²°ê³¼ ë Œë”ë§\r\n  const renderSelectedTabContent = () => {\r\n    switch (selectedTab) {\r\n      case LearningModelType.MEMORY_OPTIMIZATION:\r\n        return renderMemoryOptimizationResults();\r\n      case LearningModelType.USER_BEHAVIOR:\r\n        return renderUserBehaviorResults();\r\n      case LearningModelType.ERROR_PREDICTION:\r\n        return renderErrorPredictionResults();\r\n      case LearningModelType.PERFORMANCE_OPTIMIZATION:\r\n        return renderOverallInsights();\r\n      default:\r\n        return <div>ìœ íš¨í•˜ì§€ ì•Šì€ íƒ­ì…ë‹ˆë‹¤.</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`${styles.logAnalysisPanel} ${className}`}>\r\n      <div className={styles.header}>\r\n        <h2>ë¡œê·¸ ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h2>\r\n        {lastAnalysisTime && (\r\n          <p className={styles.lastAnalysisTime}>\r\n            ë§ˆì§€ë§‰ ë¶„ì„: {new Date(lastAnalysisTime).toLocaleString()}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      {/* í•™ìŠµ ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */}\r\n      <div className={styles.controls}>\r\n        <button\r\n          onClick={() => runLearning()}\r\n          disabled={isLoading}\r\n          className={styles.mainButton}\r\n        >\r\n          {isLoading ? 'í•™ìŠµ ì¤‘...' : 'ëª¨ë“  ë°ì´í„° í•™ìŠµí•˜ê¸°'}\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì—ëŸ¬ ë©”ì‹œì§€ */}\r\n      {error && (\r\n        <div className={styles.errorMessage}>\r\n          <p>ì˜¤ë¥˜ ë°œìƒ: {error}</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* í•™ìŠµ ì¤‘ ë¡œë”© í‘œì‹œ */}\r\n      {isLoading && (\r\n        <div className={styles.loadingIndicator}>\r\n          <div className={styles.spinner}></div>\r\n          <p>ë¡œê·¸ ë°ì´í„° í•™ìŠµ ì¤‘...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */}\r\n      <div className={styles.tabNavigation}>\r\n        <button\r\n          className={`${styles.tabButton} ${selectedTab === LearningModelType.MEMORY_OPTIMIZATION ? styles.activeTab : ''}`}\r\n          onClick={() => setSelectedTab(LearningModelType.MEMORY_OPTIMIZATION)}\r\n        >\r\n          ë©”ëª¨ë¦¬ ìµœì í™”\r\n        </button>\r\n        <button\r\n          className={`${styles.tabButton} ${selectedTab === LearningModelType.USER_BEHAVIOR ? styles.activeTab : ''}`}\r\n          onClick={() => setSelectedTab(LearningModelType.USER_BEHAVIOR)}\r\n        >\r\n          ì‚¬ìš©ì í–‰ë™\r\n        </button>\r\n        <button\r\n          className={`${styles.tabButton} ${selectedTab === LearningModelType.ERROR_PREDICTION ? styles.activeTab : ''}`}\r\n          onClick={() => setSelectedTab(LearningModelType.ERROR_PREDICTION)}\r\n        >\r\n          ì˜¤ë¥˜ ì˜ˆì¸¡\r\n        </button>\r\n        <button\r\n          className={`${styles.tabButton} ${selectedTab === LearningModelType.PERFORMANCE_OPTIMIZATION ? styles.activeTab : ''}`}\r\n          onClick={() => setSelectedTab(LearningModelType.PERFORMANCE_OPTIMIZATION)}\r\n        >\r\n          ì¢…í•© ë¶„ì„\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì„ íƒí•œ íƒ­ ë‚´ìš© ë Œë”ë§ */}\r\n      <div className={styles.tabContent}>\r\n        {renderSelectedTabContent()}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport React from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport LogAnalysisPanel from '../../components/LogAnalysisPanel';\r\nimport styles from './page.module.css';\r\n\r\n/**\r\n * ë¡œê·¸ ë¶„ì„ í˜ì´ì§€\r\n * ë¡œê·¸ ë°ì´í„° í•™ìŠµ ë° ë¶„ì„ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.\r\n */\r\nexport default function LogAnalysisPage() {\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <header className={styles.header}>\r\n        <h1>ë¡œê·¸ ë¶„ì„ ë° ì¸ì‚¬ì´íŠ¸</h1>\r\n        <p>\r\n          ë¡œê·¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë©”ëª¨ë¦¬ ìµœì í™”, ì‚¬ìš©ì í–‰ë™ íŒ¨í„´, ì˜¤ë¥˜ ì˜ˆì¸¡ì— ëŒ€í•œ ì¸ì‚¬ì´íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.\r\n        </p>\r\n      </header>\r\n\r\n      <main className={styles.main}>\r\n        <LogAnalysisPanel />\r\n\r\n        <section className={styles.helpSection}>\r\n          <h2>ë¶„ì„ ë„ì›€ë§</h2>\r\n          <div className={styles.helpContent}>\r\n            <h3>í•™ìŠµ ê¸°ëŠ¥ ì•ˆë‚´</h3>\r\n            <p>\r\n              ë¡œê·¸ í•™ìŠµì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì €ì¥ëœ ë¡œê·¸ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ íŒ¨í„´ì„ ë°œê²¬í•˜ê³  ìµœì í™” ë°©ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤.\r\n              ê° ëª¨ë“ˆë³„ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤:\r\n            </p>\r\n\r\n            <ul>\r\n              <li>\r\n                <strong>ë©”ëª¨ë¦¬ ìµœì í™”</strong>: ë©”ëª¨ë¦¬ ì‚¬ìš© íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ ìµœì ì˜ GC ê°„ê²©, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì„¸ì…˜,\r\n                ê·¸ë¦¬ê³  ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë§ì€ ì‹œê°„ëŒ€ë¥¼ ì‹ë³„í•©ë‹ˆë‹¤.\r\n              </li>\r\n              <li>\r\n                <strong>ì‚¬ìš©ì í–‰ë™</strong>: ì‚¬ìš©ìì˜ ì…ë ¥ íŒ¨í„´, ìì£¼ ì‚¬ìš©í•˜ëŠ” ë‹¨ì–´, í™œë°œí•œ í™œë™ ì‹œê°„ëŒ€ ë“±ì„ ë¶„ì„í•˜ì—¬\r\n                ì‚¬ìš©ì ê²½í—˜ ìµœì í™” ë°©ì•ˆì„ ì œì•ˆí•©ë‹ˆë‹¤.\r\n              </li>\r\n              <li>\r\n                <strong>ì˜¤ë¥˜ ì˜ˆì¸¡</strong>: ë°œìƒí•œ ì˜¤ë¥˜ì˜ ìœ í˜•ê³¼ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ ìì£¼ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì— ëŒ€í•œ ëŒ€ì‘ ì „ëµì„\r\n                ì œì‹œí•©ë‹ˆë‹¤.\r\n              </li>\r\n              <li>\r\n                <strong>ì¢…í•© ë¶„ì„</strong>: ëª¨ë“  ë°ì´í„°ë¥¼ ì¢…í•©í•˜ì—¬ ì‹œìŠ¤í…œ ì „ë°˜ì˜ ìµœì í™” ê¶Œì¥ì‚¬í•­ì„ ì œê³µí•©ë‹ˆë‹¤.\r\n              </li>\r\n            </ul>\r\n\r\n            <h3>í•™ìŠµ ì‹œ ì°¸ê³ ì‚¬í•­</h3>\r\n            <p>\r\n              <strong>ë°ì´í„° ì–‘</strong>: ë³´ë‹¤ ì •í™•í•œ ë¶„ì„ ê²°ê³¼ë¥¼ ìœ„í•´ ì¶©ë¶„í•œ ì–‘ì˜ ë¡œê·¸ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìµœì†Œ ëª‡ ì¼ ì´ìƒì˜\r\n              ì‚¬ìš© ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.\r\n            </p>\r\n            <p>\r\n              <strong>í•™ìŠµ ì£¼ê¸°</strong>: ì‹œìŠ¤í…œ ë³€í™”ë‚˜ ìƒˆë¡œìš´ íŒ¨í„´ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ ì •ê¸°ì ìœ¼ë¡œ í•™ìŠµì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\r\n            </p>\r\n            <p>\r\n              <strong>ë¦¬ì†ŒìŠ¤ ì‚¬ìš©</strong>: í•™ìŠµ ê³¼ì •ì€ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì‚¬ìš©ëŸ‰ì´ ì ì€ ì‹œê°„ëŒ€ì— ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.\r\n            </p>\r\n          </div>\r\n\r\n          <div className={styles.actions}>\r\n            <button\r\n              onClick={() => router.push('/dashboard')}\r\n              className={styles.secondaryButton}\r\n            >\r\n              ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°\r\n            </button>\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["OPTIMIZATION_LEVEL","MEDIUM","DEFAULT_OPTIONS","minLevel","maxLogs","printToConsole","moduleName","MemoryLogger","level","message","data","options","entry","timestamp","Date","now","logs","push","length","shift","toISOString","prefix","console","debug","info","warn","error","log","getLogs","getLogsByLevel","filter","getErrorLogs","constructor","memoryLogger","bind","INDEXEDDB_STORE","getMemoryInfo","response","success","memoryInfo","Error","logger","String","heap_used","heap_total","heap_used_mb","heapUsed","heapTotal","heapUsedMB","rss","rss_mb","rssMB","percent_used","percentUsed","heap_limit","saveLogToIndexedDB","logEntry","Promise","resolve","reject","window","indexedDB","request","open","MEMORY_LOG_DB","onupgradeneeded","db","target","result","objectStoreNames","contains","createObjectStore","keyPath","onerror","errorMsg","onsuccess","event","transaction","addRequest","objectStore","add","oncomplete","close","LearningModelType","LogAnalysisPanel","className","isLoading","setIsLoading","useState","setError","results","setResults","selectedTab","setSelectedTab","MEMORY_OPTIMIZATION","lastAnalysisTime","setLastAnalysisTime","combinedRecommendations","setCombinedRecommendations","setLearningStatus","isLearning","lastLearningTime","availableModels","Object","values","useRef","checkLearningStatus","useCallback","fetch","ok","status","statusText","json","useEffect","runLearning","models","modelsToLearn","method","headers","body","JSON","stringify","modelTypes","memory","timeRange","startTime","endTime","user","getResultForModel","find","modelType","renderRecommendations","recommendations","ul","styles","map","rec","index","li","renderMetricItem","label","value","formattedValue","toLowerCase","includes","bytes","decimals","formatBytes","i","Math","floor","k","parseFloat","pow","toFixed","sizes","Number","isInteger","div","span","renderMemoryOptimizationResults","p","button","onClick","disabled","insights","metrics","h3","h4","insight","type","h5","hour","style","height","percentage","session","date","formatTime","milliseconds","minutes","seconds","duration","KeyboardIcon","keyCount","entries","key","replace","str","toUpperCase","renderUserBehaviorResults","USER_BEHAVIOR","slice","word","count","renderErrorPredictionResults","ERROR_PREDICTION","width","min","examples","max","backgroundColor","renderOverallInsights","toLocaleString","h2","PERFORMANCE_OPTIMIZATION","renderSelectedTabContent","LogAnalysisPage","router","useRouter","header","h1","main","section","strong"],"sourceRoot":"","ignoreList":[]}