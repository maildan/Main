(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{104:e=>{e.exports={windowControls:"WindowControls_windowControls__SbBFq",windowButton:"WindowControls_windowButton__rzJFU",buttonContent:"WindowControls_buttonContent__1XpLJ",minimizeButton:"WindowControls_minimizeButton__hBC_D",maximizeButton:"WindowControls_maximizeButton__19xOw",closeButton:"WindowControls_closeButton__GWHV_",minimizeIcon:"WindowControls_minimizeIcon__HwMi5",maximizeIcon:"WindowControls_maximizeIcon__H4uH1",closeIcon:"WindowControls_closeIcon__OfU_7"}},753:e=>{e.exports={monitorContainer:"TypingMonitor_monitorContainer__ER1LM",controlPanel:"TypingMonitor_controlPanel__mnPAg",startButton:"TypingMonitor_startButton__6Kfxe",stopButton:"TypingMonitor_stopButton__KAJ8v",saveButton:"TypingMonitor_saveButton__WglP8",statsPanel:"TypingMonitor_statsPanel__hOEWj",statItem:"TypingMonitor_statItem__uJud3",statLabel:"TypingMonitor_statLabel___96yv",statValue:"TypingMonitor_statValue__Gutae",saveSection:"TypingMonitor_saveSection__KoLn9",descriptionInput:"TypingMonitor_descriptionInput__B_Lx7",helpSection:"TypingMonitor_helpSection__JbpyP",statusIndicator:"TypingMonitor_statusIndicator__kULxH",indicator:"TypingMonitor_indicator__z3RHP",active:"TypingMonitor_active__hioKY",pulse:"TypingMonitor_pulse__PJDcF",googleDocsLink:"TypingMonitor_googleDocsLink__sa_xR",websiteTabs:"TypingMonitor_websiteTabs__RgoMF",websiteTabHeader:"TypingMonitor_websiteTabHeader__V_y3l",websiteTabButton:"TypingMonitor_websiteTabButton__rXPP4",activeWebsiteTab:"TypingMonitor_activeWebsiteTab__niDOn",websiteTabContent:"TypingMonitor_websiteTabContent__RBMcj",websiteLinks:"TypingMonitor_websiteLinks__3vAID",websiteLink:"TypingMonitor_websiteLink__lqd9U",actionFeedback:"TypingMonitor_actionFeedback__VPiGl",fadeIn:"TypingMonitor_fadeIn__BRcC2",browserStatus:"TypingMonitor_browserStatus__b4rGV",browserInfo:"TypingMonitor_browserInfo__w3N_l",browserRow:"TypingMonitor_browserRow__27uT0",browserValue:"TypingMonitor_browserValue__cu5JE",detectedBadge:"TypingMonitor_detectedBadge__iDUgv",notDetectedBadge:"TypingMonitor_notDetectedBadge__EtIo1",browserList:"TypingMonitor_browserList__JrDTA",browserColumn:"TypingMonitor_browserColumn__EOGEk",trackingButton:"TypingMonitor_trackingButton__szR9V",trackingActive:"TypingMonitor_trackingActive__eHDsS",monitorHeader:"TypingMonitor_monitorHeader__yUhAy",container:"TypingMonitor_container__TzhrN",contentWrapper:"TypingMonitor_contentWrapper__PPmCK",leftPanel:"TypingMonitor_leftPanel__FJhBH",rightPanel:"TypingMonitor_rightPanel__DQxqP",statsTabs:"TypingMonitor_statsTabs__BFC0M",statsTabButton:"TypingMonitor_statsTabButton__PM_Rt",activeStatsTab:"TypingMonitor_activeStatsTab__rEAV4",statsTabContent:"TypingMonitor_statsTabContent__RAlml",statsGroup:"TypingMonitor_statsGroup__eqddv",statCard:"TypingMonitor_statCard__qVky4"}},773:(e,t,n)=>{"use strict";n.d(t,{t:()=>c,d:()=>d});var a=n(5155),r=n(2115),o=n(5821),s=n.n(o);function i(e){let{message:t,type:n,duration:o=3e3,onClose:i}=e,[l,c]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{c(!1),i&&i()},o);return()=>clearTimeout(e)},[o,i]),l?(0,a.jsx)("div",{className:"".concat(s().toast," ").concat(s()[n]),children:(0,a.jsx)("span",{className:s().message,children:t})}):null}let l=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[n,o]=(0,r.useState)(null);return(0,a.jsxs)(l.Provider,{value:{showToast:(e,t)=>{o({message:e,type:t}),setTimeout(()=>{o(null)},3e3)}},children:[t,n&&(0,a.jsx)(i,{message:n.message,type:n.type,onClose:()=>o(null)})]})}let d=()=>{let e=(0,r.useContext)(l);return void 0===e?{showToast:(e,t)=>{console.warn("ToastProvider가 설정되지 않았습니다:",e)}}:e}},812:e=>{e.exports={appHeader:"AppHeader_appHeader__GHmNp",leftSection:"AppHeader_leftSection__bx_bz",rightSection:"AppHeader_rightSection__2Sou5",iconOnly:"AppHeader_iconOnly__AbZ3Q",darkMode:"AppHeader_darkMode__vqPCA",visible:"AppHeader_visible__uRggq",hidden:"AppHeader_hidden__yln_L",autoHide:"AppHeader_autoHide__qqjph",headerDetectionArea:"AppHeader_headerDetectionArea__vaapr"}},1755:e=>{e.exports={container:"TypingAnalyzer_container__EiTxp",header:"TypingAnalyzer_header__hDX3y",title:"TypingAnalyzer_title__b6HkC",gpuToggle:"TypingAnalyzer_gpuToggle__05K5J",loading:"TypingAnalyzer_loading__Q5qi0",error:"TypingAnalyzer_error__LKAhd",results:"TypingAnalyzer_results__r6qGE",stat:"TypingAnalyzer_stat__beTdm",label:"TypingAnalyzer_label__Xjl78",value:"TypingAnalyzer_value__ZPUzc",fatigue:"TypingAnalyzer_fatigue__z3q__",fatigueMeter:"TypingAnalyzer_fatigueMeter__KSS5H",fatigueIndicator:"TypingAnalyzer_fatigueIndicator__p0ieh",recommendation:"TypingAnalyzer_recommendation__TFBU4"}},2147:e=>{e.exports={chartContainer:"TypingChart_chartContainer__Xxoiu",charts:"TypingChart_charts__fz60g",chartItem:"TypingChart_chartItem__CNTM_",chartWrapper:"TypingChart_chartWrapper__1KDYX",noData:"TypingChart_noData__zjjvx"}},2335:e=>{e.exports={settingsContainer:"Settings_settingsContainer__0SxHP",darkMode:"Settings_darkMode__a5VLX",settingSection:"Settings_settingSection__XwrF7",categoryToggles:"Settings_categoryToggles__HQHhT",toggleItem:"Settings_toggleItem___q_0D",toggleLabel:"Settings_toggleLabel__8fIJv",radioGroup:"Settings_radioGroup__QGEGo",radioLabel:"Settings_radioLabel__Iog9l",radioText:"Settings_radioText__hi7nW",selectLabel:"Settings_selectLabel__p8LXx",selectControl:"Settings_selectControl__Wv09K",numberInput:"Settings_numberInput__hKIK9",buttonRow:"Settings_buttonRow__7DE_2",saveButton:"Settings_saveButton__hOtLB",disabledNote:"Settings_disabledNote__pj8Vq",settingDescription:"Settings_settingDescription__uTSPW",settingSectionTitle:"Settings_settingSectionTitle__7AAKi",highlightedSetting:"Settings_highlightedSetting__nv197",restartNotice:"Settings_restartNotice__7IuFo",restartButton:"Settings_restartButton__W35gK",monitoringAutoStart:"Settings_monitoringAutoStart__QvixM",buttonGroup:"Settings_buttonGroup__INZRh",debugButton:"Settings_debugButton__fDkOc",debugInfo:"Settings_debugInfo__oW81q"}},3249:(e,t,n)=>{Promise.resolve().then(n.bind(n,3984))},3252:e=>{e.exports={overlay:"ConfirmDialog_overlay__XcVfx",dialog:"ConfirmDialog_dialog__CZkp6",fadeIn:"ConfirmDialog_fadeIn____2_q",header:"ConfirmDialog_header__TwDKK",info:"ConfirmDialog_info__c4R3u",warning:"ConfirmDialog_warning__CAxfo",error:"ConfirmDialog_error__1lLKt",success:"ConfirmDialog_success__4OJVN",closeButton:"ConfirmDialog_closeButton__xqxS2",content:"ConfirmDialog_content__DjEqW",message:"ConfirmDialog_message__e3Avu",actions:"ConfirmDialog_actions___hCeq",button:"ConfirmDialog_button__4hdj9",cancelButton:"ConfirmDialog_cancelButton__jtlqe",confirmButton:"ConfirmDialog_confirmButton__qHQyl",warningButton:"ConfirmDialog_warningButton__NGvq4",errorButton:"ConfirmDialog_errorButton__vhkIj",successButton:"ConfirmDialog_successButton__ZgRV9",darkMode:"ConfirmDialog_darkMode__GApyi"}},3984:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>er});var a=n(5155),r=n(2115),o=n(5028),s=n(753),i=n.n(s);let l=e=>{if(e<60)return"".concat(e,"초");let t=Math.floor(e/60),n=e%60;if(t<60)return"".concat(t,"분 ").concat(n,"초");let a=Math.floor(t/60);return"".concat(a,"시간 ").concat(t%60,"분 ").concat(n,"초")},c=(e,t)=>t<=0?"0 타/분":"".concat(Math.round(e/t*60)," 타/분"),d=r.memo(function(e){var t,n,o,s,d;let{stats:u,isTracking:m,onStartTracking:g,onStopTracking:h,onSaveStats:p}=e,[_,w]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[x,y]=(0,r.useState)("docs"),[v,j]=(0,r.useState)("typing"),C=r.useRef(null),k=(0,r.useCallback)(async()=>{var e;if(null==(e=window.electronAPI)?void 0:e.getCurrentBrowserInfo)try{C.current=await window.electronAPI.getCurrentBrowserInfo()}catch(e){console.error("브라우저 정보 확인 오류:",e)}},[]);(0,r.useEffect)(()=>{if(m){k();let e=setInterval(k,3e4);return()=>clearInterval(e)}},[m,k]);let T=(0,r.useCallback)(e=>{w(e.target.value)},[]),N=(0,r.useCallback)(()=>{p(_),w(""),f("저장됨"),setTimeout(()=>{f("")},2e3)},[_,p]),S=(0,r.useCallback)(()=>{m?(h(),f("모니터링 중지됨"),setTimeout(()=>{f("")},2e3)):(g(),f("모니터링 시작됨"),setTimeout(()=>{f("키보드 입력 감지 중...")},2e3),setTimeout(()=>{u.keyCount>0?f("타이핑 감지됨"):f("키보드 입력 대기 중...")},5e3))},[m,g,h,u.keyCount]),M=(0,r.useCallback)(e=>{y(e)},[]),A=(0,r.useCallback)(e=>{j(e)},[]),I=(0,r.useMemo)(()=>{switch(x){case"docs":return(0,a.jsxs)("div",{className:i().websiteLinks,children:[(0,a.jsx)("a",{href:"https://docs.google.com/document/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"구글 문서 열기"}),(0,a.jsx)("a",{href:"https://docs.google.com/spreadsheets/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"구글 스프레드시트 열기"}),(0,a.jsx)("a",{href:"https://docs.google.com/presentation/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"구글 프레젠테이션 열기"}),(0,a.jsx)("a",{href:"https://www.notion.so/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Notion 열기"})]});case"office":return(0,a.jsxs)("div",{className:i().websiteLinks,children:[(0,a.jsx)("a",{href:"https://www.office.com/launch/word",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Word 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.office.com/launch/excel",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Excel 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.office.com/launch/powerpoint",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"PowerPoint 온라인 열기"}),(0,a.jsx)("a",{href:"https://www.hancom.com/main/main.do",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"한글과컴퓨터 열기"})]});case"coding":return(0,a.jsxs)("div",{className:i().websiteLinks,children:[(0,a.jsx)("a",{href:"https://github.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"GitHub 열기"}),(0,a.jsx)("a",{href:"https://gitlab.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"GitLab 열기"}),(0,a.jsx)("a",{href:"https://codesandbox.io/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"CodeSandbox 열기"}),(0,a.jsx)("a",{href:"https://codepen.io/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"CodePen 열기"})]});case"sns":return(0,a.jsxs)("div",{className:i().websiteLinks,children:[(0,a.jsx)("a",{href:"https://slack.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Slack 열기"}),(0,a.jsx)("a",{href:"https://discord.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Discord 열기"}),(0,a.jsx)("a",{href:"https://www.messenger.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Messenger 열기"}),(0,a.jsx)("a",{href:"https://mail.google.com/",target:"_blank",rel:"noopener noreferrer",className:i().websiteLink,children:"Gmail 열기"})]});default:return null}},[x]),L=(0,r.useMemo)(()=>{var e,t,n,r;switch(v){case"typing":return(0,a.jsxs)("div",{className:i().statsGroup,children:[(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"타자 수"}),(0,a.jsx)("div",{className:i().statValue,children:u.keyCount.toLocaleString()})]}),(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"타이핑 시간"}),(0,a.jsx)("div",{className:i().statValue,children:l(u.typingTime)})]}),(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"평균 속도"}),(0,a.jsx)("div",{className:i().statValue,children:c(u.keyCount,u.typingTime)})]})]});case"document":return(0,a.jsxs)("div",{className:i().statsGroup,children:[(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"페이지 수"}),(0,a.jsx)("div",{className:i().statValue,children:(null==(e=u.pages)?void 0:e.toFixed(1))||"0.0"})]}),(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"단어 수"}),(0,a.jsx)("div",{className:i().statValue,children:(null==(t=u.totalWords)?void 0:t.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"글자 수"}),(0,a.jsx)("div",{className:i().statValue,children:(null==(n=u.totalChars)?void 0:n.toLocaleString())||"0"})]})]});case"accuracy":return(0,a.jsxs)("div",{className:i().statsGroup,children:[(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"글자 수 (공백 제외)"}),(0,a.jsx)("div",{className:i().statValue,children:(null==(r=u.totalCharsNoSpace)?void 0:r.toLocaleString())||"0"})]}),(0,a.jsxs)("div",{className:i().statCard,children:[(0,a.jsx)("div",{className:i().statLabel,children:"정확도"}),(0,a.jsxs)("div",{className:i().statValue,children:[u.accuracy||100,"%"]})]})]});default:return null}},[v,u]);return(0,a.jsxs)("div",{className:i().container,children:[(0,a.jsxs)("div",{className:i().monitorHeader,children:[(0,a.jsx)("h2",{children:"타이핑 모니터링"}),(0,a.jsx)("button",{className:"".concat(i().trackingButton," ").concat(m?i().trackingActive:""),onClick:S,children:m?"모니터링 중지":"모니터링 시작"})]}),(0,a.jsxs)("div",{className:i().statusIndicator,children:[(0,a.jsx)("div",{className:"".concat(i().indicator," ").concat(m?i().active:"")}),(0,a.jsxs)("span",{children:["모니터링 상태: ",(0,a.jsx)("strong",{children:m?"활성화":"비활성화"})]}),b&&(0,a.jsx)("div",{className:i().actionFeedback,children:b})]}),(0,a.jsxs)("div",{className:i().contentWrapper,children:[(0,a.jsxs)("div",{className:i().leftPanel,children:[(0,a.jsxs)("div",{className:i().browserStatus,children:[(0,a.jsx)("h3",{children:"브라우저 상태"}),(0,a.jsxs)("div",{className:i().browserInfo,children:[(0,a.jsxs)("div",{className:i().browserRow,children:[(0,a.jsx)("span",{children:"감지된 브라우저:"}),(0,a.jsx)("span",{className:i().browserValue,children:u.browserName||(null==(t=C.current)?void 0:t.name)||"없음"})]}),(0,a.jsxs)("div",{className:i().browserRow,children:[(0,a.jsx)("span",{children:"구글 문서 감지:"}),(0,a.jsx)("span",{className:i().browserValue,children:(null==(n=C.current)?void 0:n.isGoogleDocs)?(0,a.jsx)("span",{className:i().detectedBadge,children:"감지됨 ✓"}):(0,a.jsx)("span",{className:i().notDetectedBadge,children:"아님 ⨯"})})]}),(0,a.jsxs)("div",{className:i().browserRow,children:[(0,a.jsx)("span",{children:"현재 창:"}),(0,a.jsxs)("span",{className:i().browserValue,title:u.windowTitle||(null==(o=C.current)?void 0:o.title)||"",children:[(u.windowTitle||(null==(s=C.current)?void 0:s.title)||"없음").substring(0,60),(u.windowTitle||(null==(d=C.current)?void 0:d.title)||"").length>60?"...":""]})]})]})]}),(0,a.jsxs)("div",{className:i().websiteTabs,children:[(0,a.jsxs)("div",{className:i().websiteTabHeader,children:[(0,a.jsx)("button",{className:"".concat(i().websiteTabButton," ").concat("docs"===x?i().activeWebsiteTab:""),onClick:()=>M("docs"),children:"구글 문서"}),(0,a.jsx)("button",{className:"".concat(i().websiteTabButton," ").concat("office"===x?i().activeWebsiteTab:""),onClick:()=>M("office"),children:"오피스"}),(0,a.jsx)("button",{className:"".concat(i().websiteTabButton," ").concat("coding"===x?i().activeWebsiteTab:""),onClick:()=>M("coding"),children:"코딩"}),(0,a.jsx)("button",{className:"".concat(i().websiteTabButton," ").concat("sns"===x?i().activeWebsiteTab:""),onClick:()=>M("sns"),children:"SNS/메신저"})]}),(0,a.jsx)("div",{className:i().websiteTabContent,children:I})]})]}),(0,a.jsxs)("div",{className:i().rightPanel,children:[(0,a.jsxs)("div",{className:i().statsTabs,children:[(0,a.jsx)("button",{className:"".concat(i().statsTabButton," ").concat("typing"===v?i().activeStatsTab:""),onClick:()=>A("typing"),children:"타이핑 정보"}),(0,a.jsx)("button",{className:"".concat(i().statsTabButton," ").concat("document"===v?i().activeStatsTab:""),onClick:()=>A("document"),children:"문서 정보"}),(0,a.jsx)("button",{className:"".concat(i().statsTabButton," ").concat("accuracy"===v?i().activeStatsTab:""),onClick:()=>A("accuracy"),children:"정확도 & 속도"})]}),(0,a.jsx)("div",{className:i().statsTabContent,children:L}),(0,a.jsxs)("div",{className:i().saveSection,children:[(0,a.jsx)("h3",{children:"세션 저장"}),(0,a.jsx)("p",{children:"작업한 내용에 대한 설명을 입력하세요"}),(0,a.jsx)("textarea",{className:i().descriptionInput,value:_,onChange:T,placeholder:"작업 내용 (예: 보고서 작성, 논문 작성 등)",rows:4}),(0,a.jsx)("button",{className:i().saveButton,onClick:N,disabled:0===u.keyCount||!_.trim(),children:"통계 저장"})]})]})]})]})});var u=n(2502),m=n(4065),g=n(2147),h=n.n(g);u.t1.register(u.PP,u.kc,u.FN,u.No,u.E8,u.hE,u.m_,u.s$);let p=e=>{let t=new Date;return t.setDate(t.getDate()-7),e.filter(e=>new Date(e.timestamp)>=t).slice(0,50)},_=r.memo(function(e){let{logs:t}=e,[n,o]=(0,r.useState)(!1),s=(0,r.useRef)([]),i=(0,r.useRef)(!0);(0,r.useEffect)(()=>{let e=()=>{o(document.documentElement.classList.contains("dark-mode")||document.body.classList.contains("dark-mode"))};e();let t=e=>{o(e.detail.darkMode)};window.addEventListener("darkmode-changed",t);let n=new MutationObserver(e);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),n.observe(document.body,{attributes:!0,attributeFilter:["class"]}),i.current=!0,()=>{if(i.current=!1,n.disconnect(),window.removeEventListener("darkmode-changed",t),s.current.forEach(e=>{e&&e.destroy&&e.destroy()}),window.gc)try{window.gc()}catch(e){console.log("GC 호출 실패")}}},[]);let l=(0,r.useMemo)(()=>{try{if(!Array.isArray(t))return console.warn("유효하지 않은 로그 데이터:",t),[];return p(t)}catch(e){return console.error("로그 필터링 중 오류:",e),[]}},[t]),c=(0,r.useCallback)(e=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:0},elements:{point:{radius:2,hoverRadius:4},line:{tension:0}},devicePixelRatio:1,plugins:{legend:{position:"top",labels:{color:n?"#E0E0E0":"#333",font:{size:11}}},title:{display:!0,text:e,color:n?"#E0E0E0":"#333",font:{size:12,weight:"normal"}},tooltip:{enabled:!0,backgroundColor:n?"rgba(30, 30, 30, 0.8)":"rgba(255, 255, 255, 0.8)",titleColor:n?"#E0E0E0":"#333",bodyColor:n?"#B0B0B0":"#666",borderColor:n?"#303030":"#ddd",borderWidth:1,callbacks:{label:function(e){return e.raw}}}},scales:{x:{ticks:{color:n?"#B0B0B0":"#666",maxTicksLimit:7,font:{size:10}},grid:{color:n?"rgba(60, 60, 60, 0.3)":"rgba(0, 0, 0, 0.1)",display:!1}},y:{ticks:{color:n?"#B0B0B0":"#666",font:{size:10}},grid:{color:n?"rgba(60, 60, 60, 0.3)":"rgba(0, 0, 0, 0.1)",tickLength:5}}}}),[n]),d=(0,r.useMemo)(()=>{try{if(!Array.isArray(l)||0===l.length)return{labels:[],keyCountData:[],timeData:[],speedData:[],wordData:[],charData:[]};let t=new Map;for(let n=0;n<l.length;n++){var e;let a=l[n];if(!a||"object"!=typeof a||!a.timestamp||!Date.parse(a.timestamp))continue;let r=new Date(a.timestamp).toLocaleDateString();t.has(r)||t.set(r,{totalKeyCount:0,totalTime:0,totalChars:0,totalWords:0});let o=t.get(r);o.totalKeyCount+=a.key_count||0,o.totalTime+=a.typing_time||0;let s=(null==(e=a.content)?void 0:e.length)||0;o.totalChars+=s,o.totalWords+=Math.ceil(s/5)}let n=Array.from(t.keys()).sort((e,t)=>new Date(e).getTime()-new Date(t).getTime());return{labels:n.map(e=>{let t=e.split("/");return t.length>=2?"".concat(t[0],"/").concat(t[1]):e}),keyCountData:n.map(e=>t.get(e).totalKeyCount),timeData:n.map(e=>Math.round(t.get(e).totalTime/60)),speedData:n.map(e=>{let n=t.get(e);return n.totalTime>0?Math.round(n.totalKeyCount/n.totalTime*60):0}),wordData:n.map(e=>t.get(e).totalWords),charData:n.map(e=>t.get(e).totalChars)}}catch(e){return console.error("차트 데이터 생성 중 오류:",e),{labels:[],keyCountData:[],timeData:[],speedData:[],wordData:[],charData:[]}}},[l]),u=(0,r.useCallback)((e,t,n,a,r)=>({labels:e,datasets:[{label:n,data:t,borderColor:a,backgroundColor:r,pointBackgroundColor:a,borderWidth:1,fill:!1}]}),[]),g=(0,r.useMemo)(()=>u(d.labels,d.speedData,"평균 타이핑 속도 (타/분)",n?"rgb(3, 218, 198)":"rgb(75, 192, 192)",n?"rgba(3, 218, 198, 0.5)":"rgba(75, 192, 192, 0.5)"),[d.labels,d.speedData,n,u]),[_,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!_&&l.length>0){let e=setTimeout(()=>{i.current&&w(!0)},100);return()=>clearTimeout(e)}},[l.length,_]);let b=(0,r.useCallback)(e=>{e&&s.current.push(e)},[]);return(0,a.jsxs)("div",{className:h().chartContainer,children:[(0,a.jsx)("h2",{children:"타이핑 통계 차트"}),l.length>0?(0,a.jsxs)("div",{className:h().charts,children:[_&&d.labels.length>0&&(0,a.jsxs)("div",{className:h().chartItem,children:[(0,a.jsx)("h3",{children:"일별 평균 타이핑 속도"}),(0,a.jsx)("div",{className:h().chartWrapper,children:(0,a.jsx)(m.N1,{data:g,options:c("일별 평균 속도 (타/분)"),redraw:!1,ref:b})})]}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:h().chartItem,children:[(0,a.jsx)("h3",{children:"일별 총 타자 수"}),(0,a.jsx)("div",{className:h().chartWrapper,children:(0,a.jsx)(m.yP,{data:{labels:d.labels,datasets:[{label:"총 타자 수",data:d.keyCountData,backgroundColor:n?"rgba(30, 136, 229, 0.7)":"rgba(54, 162, 235, 0.5)"}]},options:c("일별 총 타자 수"),redraw:!1,ref:b})})]}),(0,a.jsxs)("div",{className:h().chartItem,children:[(0,a.jsx)("h3",{children:"일별 총 타이핑 시간"}),(0,a.jsx)("div",{className:h().chartWrapper,children:(0,a.jsx)(m.yP,{data:{labels:d.labels,datasets:[{label:"총 타이핑 시간 (분)",data:d.timeData,backgroundColor:n?"rgba(207, 102, 121, 0.7)":"rgba(255, 99, 132, 0.5)"}]},options:c("일별 총 타이핑 시간 (분)"),redraw:!1,ref:b})})]})]})]}):(0,a.jsx)("p",{className:h().noData,children:"저장된 타이핑 데이터가 없습니다."})]})});var w=n(8334),b=n.n(w);let f=(0,r.memo)(function(e){let{activeTab:t,onTabChange:n,onDebugToggle:r,debugMode:o}=e;return(0,a.jsxs)("div",{className:b().appTabs,style:{pointerEvents:"auto"},children:[(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat("monitor"===t?b().activeTab:""),onClick:()=>n("monitor"),style:{pointerEvents:"auto"},children:"모니터링"}),(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat("history"===t?b().activeTab:""),onClick:()=>n("history"),style:{pointerEvents:"auto"},children:"히스토리"}),(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat("stats"===t?b().activeTab:""),onClick:()=>n("stats"),style:{pointerEvents:"auto"},children:"통계"}),(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat("chart"===t?b().activeTab:""),onClick:()=>n("chart"),style:{pointerEvents:"auto"},children:"차트"}),(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat("settings"===t?b().activeTab:""),onClick:()=>n("settings"),style:{pointerEvents:"auto"},children:"설정"}),(0,a.jsx)("button",{className:"".concat(b().tabButton," ").concat(b().debugButton," ").concat(o?b().debugActive:""),onClick:r,title:"디버그 모드 토글",style:{pointerEvents:"auto"},children:"\uD83D\uDC1E"})]})}),x=(0,r.createContext)({theme:"light",toggleTheme:()=>{},setDarkMode:()=>{}}),y=()=>(0,r.useContext)(x);var v=n(104),j=n.n(v);function C(e){let{api:t}=e;return(0,a.jsxs)("div",{className:j().windowControls,children:[(0,a.jsx)("button",{className:"".concat(j().windowButton," ").concat(j().minimizeButton),onClick:()=>{t&&"function"==typeof t.windowControl&&t.windowControl("minimize")},"aria-label":"최소화",children:(0,a.jsx)("div",{className:j().buttonContent,children:(0,a.jsx)(k,{})})}),(0,a.jsx)("button",{className:"".concat(j().windowButton," ").concat(j().maximizeButton),onClick:()=>{t&&"function"==typeof t.windowControl&&t.windowControl("maximize")},"aria-label":"최대화",children:(0,a.jsx)("div",{className:j().buttonContent,children:(0,a.jsx)(T,{})})}),(0,a.jsx)("button",{className:"".concat(j().windowButton," ").concat(j().closeButton),onClick:()=>{t&&"function"==typeof t.windowControl&&t.windowControl("close")},"aria-label":"닫기",children:(0,a.jsx)("div",{className:j().buttonContent,children:(0,a.jsx)(N,{})})})]})}function k(){return(0,a.jsx)("span",{className:j().minimizeIcon,children:"–"})}function T(){return(0,a.jsx)("span",{className:j().maximizeIcon,children:"□"})}function N(){return(0,a.jsx)("span",{className:j().closeIcon,children:"✕"})}var S=n(812),M=n.n(S),A=n(6766);let I=(0,r.memo)(function(e){let{api:t,isVisible:n=!0,onVisibilityChange:o,autoHide:s=!1}=e,{theme:i}=y(),[l,c]=(0,r.useState)(n),d=(0,r.useRef)(0),u=(0,r.useRef)(null),m=(0,r.useRef)(null),g=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{c(n)},[n]),(0,r.useEffect)(()=>{if(!s)return;let e=e=>{let t=e.clientY;t<20&&!l?(c(!0),o&&o(!0)):t>80&&!g.current&&l&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{c(!1),o&&o(!1),m.current=null},1e3)),d.current=t},t=()=>{g.current=!0,m.current&&(clearTimeout(m.current),m.current=null)},n=()=>{g.current=!1};document.addEventListener("mousemove",e);let a=u.current;return a&&(a.addEventListener("mouseenter",t),a.addEventListener("mouseleave",n)),()=>{document.removeEventListener("mousemove",e),a&&(a.removeEventListener("mouseenter",t),a.removeEventListener("mouseleave",n)),m.current&&clearTimeout(m.current)}},[s,l,o]),(0,r.useEffect)(()=>{if(!s)return;let e=()=>{!l&&(c(!0),o&&o(!0))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[s,l,o]),(0,a.jsx)("div",{ref:u,className:"".concat(M().header," ").concat(!l?M().hidden:""," ").concat("dark"===i?M().darkMode:""),"aria-hidden":!l,children:(0,a.jsxs)("div",{className:M().titleBar,children:[(0,a.jsx)("div",{className:M().appIcon,children:(0,a.jsx)(A.default,{src:"/app_icon.webp",alt:"App Icon",width:24,height:24,onError:e=>{e.target.style.display="none"}})}),(0,a.jsx)("div",{className:M().appTitle,children:"Loop"}),(0,a.jsx)(C,{api:t})]})})});function L(){let e=new Date().getFullYear();return(0,a.jsx)("footer",{className:"footer",children:(0,a.jsxs)("div",{className:"copyright",children:["\xa9 ",e," loop. All rights reserved."]})})}let B=(0,r.memo)(function(e){let{children:t,darkMode:n=!1,windowMode:o="normal",electronAPI:s=null,isHeaderVisible:i=!0}=e,l=(0,r.useRef)(null);return(0,a.jsxs)("div",{className:"".concat(b().container," ").concat(n?"dark-mode":""," ").concat("fullscreen-auto-hide"===o?b().zenMode:""),style:{position:"relative",zIndex:1},children:[i&&(0,a.jsx)(I,{api:s}),i&&(0,a.jsx)("nav",{className:b().navLinks,children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/",className:b().navLink,children:"홈"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"/pages/analysis",className:b().navLink,children:"로그 분석"})})]})}),"fullscreen-auto-hide"===o&&(0,a.jsx)("div",{ref:l,className:b().headerDetectionArea,"aria-hidden":"true",style:{pointerEvents:"auto"}}),(0,a.jsx)("main",{className:b().mainContent,children:t}),(0,a.jsx)(L,{})]})}),P=(0,r.memo)(function(e){let{isVisible:t,stats:n,logsCount:r,isTracking:o,windowMode:s}=e;return t?(0,a.jsxs)("div",{className:b().debugPanelBottom,children:[(0,a.jsx)("h3",{children:"디버그 정보"}),(0,a.jsxs)("div",{className:b().debugInfo,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"isTracking:"})," ",o?"true":"false"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Logs:"})," ",r,"개"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Current keyCount:"})," ",n.keyCount]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Browser:"})," ",n.browserName||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Window:"})," ",n.windowTitle||"N/A"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Window Mode:"})," ",s]})]})]}):null});var E=n(2335),D=n.n(E),z=n(773),G=n(3252),W=n.n(G);let H=e=>{let{title:t,message:n,isOpen:o,onConfirm:s,onCancel:i,confirmText:l="확인",cancelText:c="취소",type:d="info",isDarkMode:u=!1}=e;return((0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o&&i()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o,i]),(0,r.useEffect)(()=>{let e=e=>{"Enter"===e.key&&o&&s()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o,s]),o)?(0,a.jsx)("div",{className:"".concat(W().overlay," ").concat(u?W().darkMode:""),children:(0,a.jsxs)("div",{className:W().dialog,children:[(0,a.jsxs)("div",{className:"".concat(W().header," ").concat(W()[d]),children:[(0,a.jsx)("h2",{children:t}),(0,a.jsx)("button",{className:W().closeButton,onClick:i,"aria-label":"닫기",children:"\xd7"})]}),(0,a.jsx)("div",{className:W().content,children:(0,a.jsx)("p",{className:W().message,children:n})}),(0,a.jsxs)("div",{className:W().actions,children:[(0,a.jsx)("button",{className:"".concat(W().button," ").concat(W().cancelButton),onClick:i,children:c}),(0,a.jsx)("button",{className:"".concat(W().button," ").concat(W().confirmButton," ").concat(W()[d+"Button"]),onClick:s,autoFocus:!0,children:l})]})]})}):null},R=e=>{let{isOpen:t,onConfirm:n,onCancel:r,settingsType:o="설정",isDarkMode:s=!1}=e,i="".concat(o," 저장"),l="변경된 ".concat(o,"을(를) 저장하시겠습니까?");return(0,a.jsx)(H,{title:i,message:l,isOpen:t,onConfirm:n,onCancel:r,confirmText:"저장",cancelText:"취소",type:"info",isDarkMode:s})};function U(e){let{onSave:t,initialSettings:n,darkMode:o,onDarkModeChange:s,onWindowModeChange:i}=e,[l,c]=(0,r.useState)({enabledCategories:{docs:!0,office:!0,coding:!0,sns:!0},autoStartMonitoring:!0,darkMode:!1,windowMode:"windowed",minimizeToTray:!0,showTrayNotifications:!0,reduceMemoryInBackground:!0,enableMiniView:!0,useHardwareAcceleration:!!n&&"useHardwareAcceleration"in n&&n.useHardwareAcceleration,processingMode:n&&"processingMode"in n?n.processingMode:"auto",maxMemoryThreshold:n&&"maxMemoryThreshold"in n?n.maxMemoryThreshold:100,resumeAfterIdle:!n||!("resumeAfterIdle"in n)||n.resumeAfterIdle}),[d,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),{showToast:h}=(0,z.d)(),[p,_]=(0,r.useState)(""),[w,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&c(n)},[n]),(0,r.useEffect)(()=>{l.darkMode?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")},[l.darkMode]);let f=e=>{c(t=>({...t,enabledCategories:{...t.enabledCategories,[e]:!t.enabledCategories[e]}}))},x=e=>{c(t=>({...t,windowMode:e})),i(e)},y=(e,t)=>{c(n=>({...n,[e]:t}))},v=(0,r.useCallback)(()=>{try{if(!window.electronAPI)return void h("Electron API를 찾을 수 없습니다. preload 스크립트가 올바르게 로드되었는지 확인하세요.","error");let e=Object.keys(window.electronAPI).map(e=>"".concat(e,": ").concat(typeof window.electronAPI[e])).join("\n");if(console.log("사용 가능한 API 목록:",e),_(e),"function"==typeof window.electronAPI.restartApp)return void window.electronAPI.restartApp();if("function"==typeof window.electronAPI.showRestartPrompt)return void window.electronAPI.showRestartPrompt();if(window.electron&&"function"==typeof window.electron.restartApp)return void window.electron.restartApp();h("재시작 기능을 사용할 수 없습니다. 앱을 수동으로 재시작하세요.","warning"),b(!0)}catch(e){console.error("앱 재시작 시도 중 오류:",e),h("재시작 중 오류: ".concat(e.message),"error"),_(String(e)),b(!0)}},[h]);return(0,a.jsxs)("div",{className:"".concat(D().settingsContainer," ").concat(o?D().darkMode:""),children:[(0,a.jsx)("h2",{children:"설정"}),(0,a.jsxs)("div",{className:"".concat(D().settingSection," ").concat(D().highlightedSetting),children:[(0,a.jsx)("h3",{children:"모니터링 자동 시작"}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.autoStartMonitoring,onChange:()=>{c(e=>({...e,autoStartMonitoring:!e.autoStartMonitoring}))}}),(0,a.jsx)("span",{className:D().toggleLabel,children:"앱 시작 시 자동으로 모니터링 시작"})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.resumeAfterIdle||!1,onChange:e=>y("resumeAfterIdle",e.target.checked)}),(0,a.jsx)("span",{className:D().toggleLabel,children:"일정 시간 사용하지 않다가 돌아왔을 때 자동 재시작"})]})}),(0,a.jsx)("div",{className:D().settingDescription,children:"자동 모니터링 설정을 통해 앱 시작 시 또는 일정 시간 사용하지 않다가 돌아왔을 때 자동으로 타이핑 모니터링을 시작할 수 있습니다."})]}),(0,a.jsxs)("div",{className:"".concat(D().settingSection),children:[(0,a.jsx)("h3",{children:"일반 설정"}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.darkMode,onChange:()=>{let e=!l.darkMode;c(t=>({...t,darkMode:e})),s(e)}}),(0,a.jsx)("span",{className:D().toggleLabel,children:"다크 모드"})]})})]}),(0,a.jsxs)("div",{className:D().settingSection,children:[(0,a.jsx)("h3",{children:"화면 모드"}),(0,a.jsxs)("div",{className:D().radioGroup,children:[(0,a.jsxs)("label",{className:D().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",checked:"windowed"===l.windowMode,onChange:()=>x("windowed")}),(0,a.jsx)("span",{className:D().radioText,children:"창 모드"})]}),(0,a.jsxs)("label",{className:D().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",checked:"fullscreen"===l.windowMode,onChange:()=>x("fullscreen")}),(0,a.jsx)("span",{className:D().radioText,children:"전체화면 모드"})]}),(0,a.jsxs)("label",{className:D().radioLabel,children:[(0,a.jsx)("input",{type:"radio",name:"windowMode",value:"fullscreen-auto-hide",checked:"fullscreen-auto-hide"===l.windowMode,onChange:()=>x("fullscreen-auto-hide")}),(0,a.jsx)("span",{className:D().radioText,children:"자동 숨김 모드"})]})]}),(0,a.jsx)("p",{className:D().settingDescription,children:"자동 숨김 모드에서는 마우스를 화면 상단에 가져가면 도구모음이 자동으로 표시됩니다."})]}),(0,a.jsxs)("div",{className:D().settingSection,children:[(0,a.jsx)("h3",{children:"모니터링 대상 카테고리"}),(0,a.jsxs)("div",{className:D().categoryToggles,children:[(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.enabledCategories.docs,onChange:()=>f("docs")}),(0,a.jsx)("span",{className:D().toggleLabel,children:"문서 작업 (Notion, Google Docs 등)"})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.enabledCategories.office,onChange:()=>f("office")}),(0,a.jsx)("span",{className:D().toggleLabel,children:"오피스 웹앱 (Microsoft Office, 한컴오피스 등)"})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.enabledCategories.coding,onChange:()=>f("coding")}),(0,a.jsx)("span",{className:D().toggleLabel,children:"코딩 관련 (GitHub, GitLab 등)"})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.enabledCategories.sns,onChange:()=>f("sns")}),(0,a.jsx)("span",{className:D().toggleLabel,children:"SNS/메신저 (Discord, Slack 등)"})]})})]})]}),(0,a.jsxs)("div",{className:D().settingSection,children:[(0,a.jsx)("h3",{children:"시스템 트레이 설정"}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.minimizeToTray,onChange:()=>{c(e=>({...e,minimizeToTray:!e.minimizeToTray}))}}),(0,a.jsx)("span",{className:D().toggleLabel,children:"창 닫기 시 트레이로 최소화 (백그라운드 실행)"})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.showTrayNotifications,onChange:()=>{c(e=>({...e,showTrayNotifications:!e.showTrayNotifications}))},disabled:!l.minimizeToTray}),(0,a.jsxs)("span",{className:D().toggleLabel,children:["트레이 알림 표시",!l.minimizeToTray&&(0,a.jsx)("small",{className:D().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.reduceMemoryInBackground,onChange:()=>{c(e=>({...e,reduceMemoryInBackground:!e.reduceMemoryInBackground}))},disabled:!l.minimizeToTray}),(0,a.jsxs)("span",{className:D().toggleLabel,children:["백그라운드에서 메모리 사용 최적화",!l.minimizeToTray&&(0,a.jsx)("small",{className:D().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("div",{className:D().toggleItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.enableMiniView,onChange:()=>{c(e=>({...e,enableMiniView:!e.enableMiniView}))},disabled:!l.minimizeToTray}),(0,a.jsxs)("span",{className:D().toggleLabel,children:["트레이 아이콘 클릭 시 미니뷰(PiP) 표시",!l.minimizeToTray&&(0,a.jsx)("small",{className:D().disabledNote,children:" (트레이로 최소화 옵션이 활성화되어야 함)"})]})]})}),(0,a.jsx)("p",{className:D().settingDescription,children:"트레이로 최소화 기능을 사용하면 창을 닫아도 앱이 백그라운드에서 계속 실행되어 타이핑을 모니터링합니다. 메모리 사용 최적화 옵션은 백그라운드 실행 시 RAM 사용량을 줄여줍니다."}),(0,a.jsx)("p",{className:D().settingDescription,children:"미니뷰를 활성화하면 트레이 아이콘을 클릭할 때 화면 상단에 작은 통계 창이 표시됩니다. 이를 통해 앱을 최소화한 상태에서도 중요한 타이핑 통계를 확인할 수 있습니다."})]}),(0,a.jsxs)("div",{className:D().settingSection,children:[(0,a.jsx)("h3",{children:"성능 설정"}),(0,a.jsxs)("div",{className:D().toggleItem,children:[(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:l.useHardwareAcceleration,onChange:e=>{let t=e.target.checked;t!==n.useHardwareAcceleration&&u(!0),y("useHardwareAcceleration",t)}}),(0,a.jsx)("span",{className:D().toggleLabel,children:"GPU 하드웨어 가속 사용 (재시작 필요)"})]}),(0,a.jsx)("p",{className:D().settingDescription,children:"GPU 하드웨어 가속을 활성화하면 그래픽 렌더링과 일부 계산이 더 빨라질 수 있지만, 일부 시스템에서는 불안정할 수 있습니다. 변경 후 앱 재시작이 필요합니다."}),d&&(0,a.jsxs)("div",{className:D().restartNotice,children:[(0,a.jsx)("p",{children:"GPU 가속 설정이 변경되었습니다. 변경 사항을 적용하려면 앱을 재시작해야 합니다."}),(0,a.jsxs)("div",{className:D().buttonGroup,children:[(0,a.jsx)("button",{className:D().restartButton,onClick:v,children:"지금 재시작"}),(0,a.jsx)("button",{className:D().debugButton,onClick:()=>{window.electronAPI?_(Object.keys(window.electronAPI).map(e=>{let t=typeof window.electronAPI[e];return"".concat(e,": ").concat(t)}).join("\n")):_("electronAPI가 정의되지 않았습니다"),b(!w)},children:"API 디버그 정보"})]}),w&&(0,a.jsxs)("div",{className:D().debugInfo,children:[(0,a.jsx)("h4",{children:"API 디버그 정보"}),(0,a.jsx)("pre",{children:p||"정보 없음"})]})]})]}),(0,a.jsxs)("div",{className:D().toggleItem,children:[(0,a.jsx)("label",{className:D().selectLabel,children:"처리 모드:"}),(0,a.jsxs)("select",{className:D().selectControl,value:l.processingMode||"auto",onChange:e=>y("processingMode",e.target.value),children:[(0,a.jsx)("option",{value:"auto",children:"자동 (리소스에 따라 결정)"}),(0,a.jsx)("option",{value:"normal",children:"일반 모드"}),(0,a.jsx)("option",{value:"cpu-intensive",children:"CPU 집약적 모드 (메모리 최적화)"}),(0,a.jsx)("option",{value:"gpu-intensive",children:"GPU 가속 모드 (실험적)"})]})]}),(0,a.jsx)("p",{className:D().settingDescription,children:"처리 모드에 따라 타이핑 통계 계산 방식이 달라집니다. 자동 모드는 시스템 리소스에 따라 최적의 모드를 선택합니다. CPU 집약적 모드는 메모리 사용을 줄이고, GPU 가속 모드는 GPU를 활용하여 계산 속도를 높입니다."}),(0,a.jsxs)("div",{className:D().toggleItem,children:[(0,a.jsx)("label",{className:D().selectLabel,children:"메모리 임계치 (MB):"}),(0,a.jsx)("input",{type:"number",className:D().numberInput,value:l.maxMemoryThreshold||100,onChange:e=>y("maxMemoryThreshold",parseInt(e.target.value)),min:50,max:500})]}),(0,a.jsx)("p",{className:D().settingDescription,children:"메모리 사용량이 이 임계치를 초과하면 메모리 최적화 모드로 전환됩니다. 값이 높을수록 더 많은 메모리를 사용하지만 성능이 향상될 수 있습니다."})]}),(0,a.jsx)("div",{className:D().buttonRow,children:(0,a.jsx)("button",{className:D().saveButton,onClick:()=>{JSON.stringify(l)!==JSON.stringify(n)?g(!0):h("변경된 설정이 없습니다.","info")},children:"설정 저장"})}),(0,a.jsx)(R,{isOpen:m,onConfirm:()=>{g(!1),t(l),d?(h("GPU 가속 설정이 변경되었습니다. 변경 사항을 적용하려면 앱을 재시작하세요.","info"),window.electronAPI&&("function"==typeof window.electronAPI.showRestartPrompt?window.electronAPI.showRestartPrompt():window.confirm("GPU 가속 설정이 변경되었습니다. 지금 앱을 재시작하시겠습니까?")&&("function"==typeof window.electronAPI.restartApp?window.electronAPI.restartApp():(console.error("restartApp 함수를 찾을 수 없습니다."),h("앱을 수동으로 재시작해 주세요.","warning"))))):h("설정이 저장되었습니다.","success")},onCancel:()=>{g(!1)},isDarkMode:o})]})}var V=n(5375),O=n.n(V);function q(e){let{message:t="앱을 재시작하는 중입니다...",isVisible:n,onClose:o}=e,[s,i]=(0,r.useState)(""),[l,c]=(0,r.useState)(0);return((0,r.useEffect)(()=>{if(!n)return;let e=setInterval(()=>{i(e=>e.length>=3?"":e+".")},500),t=setInterval(()=>{c(e=>e>=100?100:e+5)},100);return()=>{clearInterval(e),clearInterval(t)}},[n]),n)?(0,a.jsx)("div",{className:O().overlay,children:(0,a.jsxs)("div",{className:O().loadingContainer,children:[(0,a.jsx)("div",{className:O().spinner}),(0,a.jsxs)("h3",{className:O().title,children:[t,s]}),(0,a.jsx)("div",{className:O().progressContainer,children:(0,a.jsx)("div",{className:O().progressBar,style:{width:"".concat(l,"%")}})}),(0,a.jsx)("p",{className:O().note,children:"앱이 곧 다시 시작됩니다."})]})}):null}let F=()=>({windowControl:e=>console.log("개발용 windowControl 호출: ".concat(e)),onTypingStatsUpdate:e=>(console.log("개발용 onTypingStatsUpdate 리스너 등록"),()=>console.log("개발용 onTypingStatsUpdate 리스너 제거")),onStatsSaved:e=>(console.log("개발용 onStatsSaved 리스너 등록"),()=>console.log("개발용 onStatsSaved 리스너 제거")),startTracking:()=>console.log("개발용 startTracking 호출"),stopTracking:()=>console.log("개발용 stopTracking 호출"),saveStats:e=>(console.log("개발용 saveStats 호출:",e),Promise.resolve(!0)),loadSettings:()=>(console.log("개발용 loadSettings 호출"),{darkMode:!1,windowMode:"normal"}),saveSettings:e=>(console.log("개발용 saveSettings 호출:",e),!0),getCurrentBrowserInfo:()=>Promise.resolve({name:null,isGoogleDocs:!1,title:null}),getDebugInfo:()=>Promise.resolve({isTracking:!1,currentStats:{keyCount:0,typingTime:0,startTime:null,lastActiveTime:null,currentWindow:null,currentBrowser:null,totalChars:0,totalWords:0,totalCharsNoSpace:0,pages:0,accuracy:100},platform:"web",electronVersion:"N/A",nodeVersion:"N/A"}),setDarkMode:()=>Promise.resolve({success:!0}),setWindowMode:()=>Promise.resolve({success:!0}),getWindowMode:()=>Promise.resolve("windowed"),checkAutoStart:()=>{},onAutoTrackingStarted:()=>()=>{},onSwitchTab:()=>()=>{},onOpenSaveStatsDialog:()=>()=>{},requestStatsUpdate:()=>{},onMiniViewStatsUpdate:()=>()=>{},toggleMiniView:()=>{},updateTraySettings:()=>Promise.resolve({success:!0}),quitApp:()=>console.log("개발용 quitApp 호출"),toggleWindow:()=>console.log("개발용 toggleWindow 호출"),onBackgroundModeChange:()=>()=>{},onTrayCommand:()=>()=>{},restartApp:()=>console.log("개발용 restartApp 호출"),showRestartPrompt:()=>console.log("개발용 showRestartPrompt 호출"),closeWindow:()=>console.log("개발용 closeWindow 호출"),getDarkMode:()=>Promise.resolve(!1)});function K(e){e?(document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode"),document.querySelectorAll(".tab-content, .chart-container, .history-table").forEach(e=>{e.classList.add("dark-mode")})):(document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode"),document.querySelectorAll(".tab-content, .chart-container, .history-table").forEach(e=>{e.classList.remove("dark-mode")}))}let J={enabledCategories:{docs:!0,office:!0,coding:!0,sns:!0},autoStartMonitoring:!0,resumeAfterIdle:!0,darkMode:!1,windowMode:"windowed",minimizeToTray:!0,showTrayNotifications:!0,reduceMemoryInBackground:!0,enableMiniView:!0,useHardwareAcceleration:!1,processingMode:"auto",maxMemoryThreshold:100};async function X(){try{let e=document.querySelectorAll("img:not([data-optimized])"),t=0;for(let n of Array.from(e)){let e=n.getBoundingClientRect();if((e.top<-window.innerHeight||e.bottom>2*window.innerHeight||e.left<-window.innerWidth||e.right>2*window.innerWidth)&&n.src&&!n.src.startsWith("data:")){let e=n.src;n.setAttribute("data-original-src",e),n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";let a=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target,n=t.getAttribute("data-original-src");n&&(t.src=n,t.removeAttribute("data-original-src"),t.setAttribute("data-optimized","restored")),a.disconnect()}})},{rootMargin:"200px"});a.observe(n),n.setAttribute("data-optimized","true"),t++}}return t>0&&console.log("이미지 리소스 최적화 완료: ".concat(t,"개 이미지 처리됨")),document.querySelectorAll("canvas[width][height], svg[width][height]").forEach(e=>{let t=parseInt(e.getAttribute("width")||"0"),n=parseInt(e.getAttribute("height")||"0");if(t*n>1e6&&!e.hasAttribute("data-optimized")){let t=e.getBoundingClientRect();(t.top<-window.innerHeight||t.bottom>2*window.innerHeight)&&(e.setAttribute("data-optimized","hidden"),e.setAttribute("data-original-display",e.style.display),e.style.display="none")}}),!0}catch(e){return console.error("이미지 리소스 최적화 오류:",e),!1}}let Q=r.memo(function(){let{electronAPI:e,api:t}=function(){let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{{let e=window.electronAPI;e?t(e):t(F())}},[]),{electronAPI:e,api:e,isElectron:void 0!==window.electronAPI}}(),{settings:n,darkMode:o,windowMode:s,handleSaveSettings:i,handleDarkModeChange:l,handleWindowModeChange:c}=function(e){let[t,n]=(0,r.useState)(J),[a,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)("windowed"),{showToast:l}=(0,z.d)(),c=(0,r.useCallback)(e=>{try{localStorage.setItem("app-settings",JSON.stringify(e))}catch(e){console.error("설정 저장 중 오류:",e)}},[]),d=(0,r.useCallback)(()=>{try{let y=localStorage.getItem("app-settings");if(y){var e,t,a,r,s,i,l,c,d,u,m,g,h,p,_,w,b,f,x;let v=JSON.parse(y),j={enabledCategories:{docs:null==(s=null==(e=v.enabledCategories)?void 0:e.docs)||s,office:null==(i=null==(t=v.enabledCategories)?void 0:t.office)||i,coding:null==(l=null==(a=v.enabledCategories)?void 0:a.coding)||l,sns:null==(c=null==(r=v.enabledCategories)?void 0:r.sns)||c},autoStartMonitoring:null==(d=v.autoStartMonitoring)||d,resumeAfterIdle:null==(u=v.resumeAfterIdle)||u,darkMode:null!=(m=v.darkMode)&&m,windowMode:null!=(g=v.windowMode)?g:"windowed",minimizeToTray:null==(h=v.minimizeToTray)||h,showTrayNotifications:null==(p=v.showTrayNotifications)||p,reduceMemoryInBackground:null==(_=v.reduceMemoryInBackground)||_,enableMiniView:null==(w=v.enableMiniView)||w,useHardwareAcceleration:null!=(b=v.useHardwareAcceleration)&&b,processingMode:null!=(f=v.processingMode)?f:"auto",maxMemoryThreshold:null!=(x=v.maxMemoryThreshold)?x:100};return n(j),o(j.darkMode),j}}catch(e){console.error("설정 로드 중 오류:",e)}return null},[]),u=(0,r.useCallback)(async t=>{n(t),c(t),o(t.darkMode);try{var a;if(!e)return;let n=null==e||null==(a=e.saveSettings)?void 0:a.call(e,t);if(n instanceof Promise){let e=await n;"object"==typeof e&&null!==e&&"success"in e?e.success?l("설정이 저장되었습니다.","success"):l("설정 저장에 실패했습니다.","error"):!0===e||"boolean"==typeof e&&e?l("설정이 저장되었습니다.","success"):l("설정 저장에 실패했습니다.","error")}(null==e?void 0:e.setDarkMode)&&await e.setDarkMode(t.darkMode),(null==e?void 0:e.setWindowMode)&&await e.setWindowMode(t.windowMode)}catch(e){console.error("Electron 설정 적용 오류:",e),l("설정 적용 중 오류가 발생했습니다.","error")}},[c,e,l]),m=(0,r.useCallback)(t=>{o(t),K(t),e&&e.setDarkMode(t)},[e]),g=(0,r.useCallback)(async t=>{try{if(i(t),e&&"function"==typeof e.setWindowMode){let n=new Promise((e,t)=>{setTimeout(()=>t(Error("창 모드 변경 시간 초과")),3e3)});try{let a=await Promise.race([e.setWindowMode(t),n]);a.success||(console.error("창 모드 변경 실패: ".concat(a.error||"알 수 없는 오류")),l("창 모드 변경에 실패했습니다.","error"))}catch(e){console.warn("창 모드 변경 시간 초과, UI 상태는 유지됩니다"),l("창 모드 변경 요청이 시간 초과되었지만, 변경이 적용될 수 있습니다.","warning")}}else console.warn("setWindowMode API를 사용할 수 없습니다. UI만 업데이트됩니다.")}catch(e){console.error("창 모드 변경 중 오류:",e),l("창 모드 변경 중 오류가 발생했습니다.","error")}},[e,l]);return(0,r.useEffect)(()=>{d()},[d]),(0,r.useEffect)(()=>{K(a);let e=new CustomEvent("darkmode-changed",{detail:{darkMode:a}});window.dispatchEvent(e)},[a]),(0,r.useEffect)(()=>{let e=()=>{c(t)};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[t,c]),{settings:t,darkMode:a,windowMode:s,handleSaveSettings:u,handleDarkModeChange:m,handleWindowModeChange:g,loadSettingsFromLocalStorage:d}}(e),{activeTab:u,debugMode:m,handleTabChange:g,toggleDebugMode:h}=function(e){let{initialTab:t,electronAPI:n}=e,[a,o]=(0,r.useState)(t),[s,i]=(0,r.useState)(!1),l=(0,r.useCallback)(e=>{o(e)},[]),c=(0,r.useCallback)(()=>{i(e=>!e)},[]);return(0,r.useEffect)(()=>{},[]),{activeTab:a,debugMode:s,handleTabChange:l,toggleDebugMode:c}}({initialTab:"monitor",electronAPI:t}),{isHeaderVisible:p}=function(e){let{windowMode:t,electronAPI:n}=e,[a,o]=(0,r.useState)(!0),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if("fullscreen-auto-hide"!==t){(null==n?void 0:n.windowControl)&&n.windowControl("showHeader");return}let e=e=>{let{clientY:t}=e;t<100?(o(!0),(null==n?void 0:n.windowControl)&&n.windowControl("showHeader"),s.current&&(clearTimeout(s.current),s.current=null)):t>150&&a&&!s.current&&(s.current=setTimeout(()=>{o(!1),(null==n?void 0:n.windowControl)&&n.windowControl("hideHeader"),s.current=null},1500))};return window.addEventListener("mousemove",e,{passive:!0,capture:!0}),()=>{window.removeEventListener("mousemove",e,{capture:!0}),s.current&&clearTimeout(s.current)}},[t,a,n]),{isHeaderVisible:a,setHeaderVisibility:(0,r.useCallback)(e=>{o(e),(null==n?void 0:n.windowControl)&&n.windowControl(e?"showHeader":"hideHeader")},[n])}}({windowMode:s,electronAPI:e}),{logs:w,isLoading:b,isTracking:x,displayStats:y,handleStartTracking:v,handleStopTracking:j,handleSaveStats:C,currentStatsRef:k,fetchLogs:T}=function(e){let[t,n]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),d=(0,r.useRef)([]),u=(0,r.useRef)([]),m=(0,r.useRef)({keyCount:0,typingTime:0,windowTitle:"",browserName:"",totalChars:0,totalCharsNoSpace:0,totalWords:0,pages:0,accuracy:100}),[g,h]=(0,r.useState)({...m.current}),{showToast:p}=(0,z.d)();(0,r.useEffect)(()=>{let e=setInterval(()=>{JSON.stringify(m.current)!==JSON.stringify(g)&&h({...m.current})},2e3);return u.current.push(e),()=>clearInterval(e)},[g]);let _=(0,r.useCallback)(()=>{try{if(e){var t;null==(t=e.startTracking)||t.call(e),i(!0)}else console.warn("electronAPI가 없습니다."),i(!0)}catch(e){console.error("startTracking 호출 오류:",e),i(!0)}},[e]),w=(0,r.useCallback)(()=>{try{if(e){var t;null==(t=e.stopTracking)||t.call(e),i(!1)}else console.warn("electronAPI가 없습니다."),i(!1)}catch(e){console.error("stopTracking 호출 오류:",e),i(!1)}},[e]),b=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(!a)try{o(!0);let a=await fetch("/api/getLogs?limit=".concat(e));if(!a.ok)throw Error("API 요청 실패: ".concat(a.status," ").concat(a.statusText));let r=a.headers.get("content-type");if(!r||!r.includes("application/json"))throw Error("서버에서 잘못된 응답 형식 반환");let s=await a.json();if(s.success){let e=s.logs.map(e=>({id:e.id,content:e.content,key_count:e.key_count,typing_time:e.typing_time,timestamp:e.timestamp,created_at:e.created_at,window_title:e.window_title,browser_name:e.browser_name,total_chars:e.total_chars,total_words:e.total_words,pages:e.pages,accuracy:e.accuracy}));JSON.stringify(t)!==JSON.stringify(e)&&n(e)}else console.error("로그 불러오기 실패:",s.error),n([])}catch(e){console.error("로그 API 요청 오류:",e),n([]),c("로그를 불러오는 중 문제가 발생했습니다."),null==p||p("데이터 로드 중 오류가 발생했습니다","error")}finally{o(!1)}},[t,p,a]),f=(0,r.useCallback)(async e=>{try{let t=await fetch("/api/saveLogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();t.ok?await b():console.error("저장 실패:",n.error)}catch(e){console.error("저장 API 요청 오류:",e)}},[b]),x=(0,r.useCallback)(t=>{try{if(e){var n;null==(n=e.saveStats)||n.call(e,t)}let a={content:t,keyCount:m.current.keyCount,typingTime:m.current.typingTime.toString(),timestamp:new Date().toISOString(),windowTitle:m.current.windowTitle,browserName:m.current.browserName,totalChars:m.current.totalChars,totalWords:m.current.totalWords,pages:m.current.pages,accuracy:m.current.accuracy};f(a)}catch(e){console.error("saveStats 호출 오류:",e),f({content:t,keyCount:m.current.keyCount,typingTime:m.current.typingTime.toString(),timestamp:new Date().toISOString(),windowTitle:m.current.windowTitle,browserName:m.current.browserName||"Unknown"})}},[e,f]),y=(0,r.useCallback)(()=>{if(!e)return;let t=[];if(e.onTypingStatsUpdate){let n=e.onTypingStatsUpdate(e=>{m.current={...m.current,...e}});t.push(n)}if(e.onStatsSaved){let n=e.onStatsSaved(()=>{b()});t.push(n)}d.current=t},[e,b]);return(0,r.useEffect)(()=>(y(),()=>{d.current.forEach(e=>{try{e()}catch(e){console.error("이벤트 리스너 정리 오류:",e)}})}),[y]),(0,r.useEffect)(()=>()=>{if(d.current.forEach(e=>e()),d.current=[],u.current.forEach(clearInterval),u.current=[],n([]),m.current={keyCount:0,typingTime:0,windowTitle:"",browserName:"",totalChars:0,totalCharsNoSpace:0,totalWords:0,pages:0,accuracy:100},window.gc)try{window.gc()}catch(e){console.log("GC 호출 실패")}},[]),(0,r.useEffect)(()=>{b()},[b]),{logs:t,isLoading:a,isTracking:s,displayStats:g,handleStartTracking:_,handleStopTracking:w,handleSaveStats:x,fetchLogs:b,currentStatsRef:m,error:l}}(e),[N,S]=(0,r.useState)([]),M=function(){let{debugMode:e=!1,checkInterval:t=3e4,memoryThreshold:n=100,activeTab:a="monitor",onClearLogs:o=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.useRef)([]),i=(0,r.useRef)(!1),l=(0,r.useRef)(0),c=(0,r.useCallback)(()=>{if(window.performance&&window.performance.memory){let r=window.performance.memory,s=r.usedJSHeapSize/1048576,c=r.totalJSHeapSize/1048576;e&&console.log("메모리 사용량: ".concat(Math.round(s),"MB (").concat(Math.round(s/c*100),"%)"));let d=Date.now();if(s>n&&d-l.current>6e4&&(l.current=d,!i.current&&e&&(console.warn("메모리 사용량 경고: ".concat(Math.round(s),"MB (임계치: ").concat(n,"MB)")),i.current=!0),"history"!==a&&"stats"!==a&&"chart"!==a)){var t;o(),"function"==typeof(null==(t=window.__memoryOptimizer)?void 0:t.optimizeMemory)&&(window.__memoryOptimizer.optimizeMemory(s>1.5*n),e&&console.log("메모리 자동 최적화 수행됨")),window.gc&&(window.gc(),e&&console.log("GC 호출됨"))}s<.8*n&&(i.current=!1)}},[a,e,n,o]);(0,r.useEffect)(()=>{c();let e=setInterval(c,t);s.current.push(e);let n=()=>{"visible"===document.visibilityState&&c()};return document.addEventListener("visibilitychange",n),()=>{if(clearInterval(e),s.current.forEach(clearInterval),s.current=[],document.removeEventListener("visibilitychange",n),window.gc)try{window.gc()}catch(e){console.warn("GC 호출 실패")}}},[c,t]);let d=(0,r.useCallback)(()=>{var t;if("function"==typeof(null==(t=window.__memoryOptimizer)?void 0:t.optimizeMemory))return window.__memoryOptimizer.optimizeMemory(!0),e&&console.log("수동 메모리 최적화 실행됨"),!0;if(window.gc)try{return window.gc(),e&&console.log("GC 호출 성공"),!0}catch(e){console.warn("GC 호출 실패")}return!1},[e]);return{cleanupMemory:d,addInterval:(0,r.useCallback)(e=>{s.current.push(e)},[]),clearIntervals:(0,r.useCallback)(()=>{s.current.forEach(clearInterval),s.current=[]},[]),checkMemoryUsage:c}}({debugMode:m,activeTab:u,memoryThreshold:100,checkInterval:3e4,onClearLogs:()=>{if("history"!==u&&"stats"!==u&&"chart"!==u){S([]);try{X().catch(e=>{console.error("이미지 리소스 최적화 중 오류:",e)})}catch(e){console.error("이미지 최적화 실행 오류:",e)}}}});(0,r.useEffect)(()=>{try{var e;(null==(e=window.__memoryOptimizer)?void 0:e.requestGC)&&window.__memoryOptimizer.requestGC(!1).catch(e=>{console.error("메모리 최적화 오류:",e)})}catch(e){console.error("GC 요청 오류:",e)}let t=setInterval(()=>{X().catch(e=>{console.error("이미지 리소스 최적화 주기 작업 중 오류:",e)})},3e5);return M.addInterval(t),()=>{M.clearIntervals()}},[M]),r.useEffect(()=>{w&&w.length>0&&S(w)},[w]);let[A,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var t;if(!e)return;let n=(null==(t=e.onShowRestartLoading)?void 0:t.call(e,e=>{I(!0),e.timeout&&setTimeout(()=>{I(!1)},e.timeout)}))||(()=>{});return()=>{n()}},[e]);let L=(0,r.useCallback)(()=>{switch(u){case"monitor":return(0,a.jsx)(d,{stats:y,isTracking:x,onStartTracking:v,onStopTracking:j,onSaveStats:C});case"stats":return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading chart..."}),children:(0,a.jsx)(_,{logs:w})});case"settings":return(0,a.jsx)("div",{className:"settings-tab-wrapper",style:{maxWidth:"800px",margin:"0 auto",width:"100%"},children:(0,a.jsx)(U,{onSave:i,initialSettings:n,darkMode:o,onDarkModeChange:l,onWindowModeChange:c})});default:return null}},[u,y,x,v,j,C,w,n,o,l,c,i]);return(0,a.jsxs)(B,{darkMode:o,windowMode:s,electronAPI:e,isHeaderVisible:p,children:[(0,a.jsx)(q,{isVisible:A,message:"앱을 재시작하는 중입니다"}),(0,a.jsx)(f,{activeTab:u,onTabChange:g,onDebugToggle:h,debugMode:m}),L(),(0,a.jsx)(P,{isVisible:m,stats:k.current,logsCount:N.length,isTracking:x,windowMode:s})]})});var Z=n(6980),Y=n(1755),$=n.n(Y);function ee(e){let{stats:t,_isTracking:n}=e,o=t||{keyCount:0,typingTime:0,accuracy:0},{available:s,enabled:i,loading:l,error:c,computeWithGpu:d,toggleGpuAcceleration:u}=function(){let[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),g=(0,r.useCallback)(async()=>{l(!0),d(null);try{let e=await (0,Z.Bb)();e?(t(e),a(e.available),s(e.accelerationEnabled||!1)):(d("GPU 정보를 가져오는데 실패했습니다."),a(!1),s(!1))}catch(e){console.error("GPU 정보 가져오기 오류:",e),d(e instanceof Error?e.message:"알 수 없는 오류"),a(!1),s(!1)}finally{l(!1)}},[]),h=(0,r.useCallback)(async e=>{l(!0),d(null);try{if(await (0,Z.pT)(e))return s(e),await g(),!0;return d("GPU 가속 설정 변경 실패"),!1}catch(e){return console.error("GPU 가속 변경 오류:",e),d(e instanceof Error?e.message:"알 수 없는 오류"),!1}finally{l(!1)}},[g]),p=(0,r.useCallback)(async(e,t)=>{l(!0),d(null);try{let n=await (0,Z.xz)(e,t);if(n)return m({computation_type:e,duration_ms:n.duration_ms||0,result:n.result,timestamp:Date.now()}),n.result;return d("GPU 계산 실패"),null}catch(e){return console.error("GPU 계산 오류:",e),d(e instanceof Error?e.message:"알 수 없는 오류"),null}finally{l(!1)}},[]);return(0,r.useEffect)(()=>{g()},[g]),{gpuInfo:e,available:n,enabled:o,loading:i,error:c,lastComputationResult:u,fetchGpuInfo:g,toggleGpuAcceleration:h,computeWithGpu:p}}(),[m,g]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),_=(0,r.useCallback)(async()=>{if(o.keyCount&&o.typingTime)try{if(h&&i){let e=await d(Z.KC.TypingStatistics,o);e&&e.result_summary&&g(e.result_summary)}else{let e=et(o);g(e)}}catch(e){console.error("타이핑 분석 오류:",e),g(et(o))}},[o,h,i,d]),w=(0,r.useCallback)(async()=>{let e=!h;p(e),e&&s&&!i&&await u(!0)},[h,s,i,u]);return(0,r.useEffect)(()=>{o.keyCount>0&&o.typingTime>0&&_()},[o,_]),(0,a.jsxs)("div",{className:$().container,children:[(0,a.jsxs)("div",{className:$().header,children:[(0,a.jsx)("h2",{className:$().title,children:"타이핑 분석"}),s&&(0,a.jsx)("div",{className:$().gpuToggle,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:h,onChange:w,disabled:l}),"GPU 가속 사용"]})})]}),l&&(0,a.jsx)("div",{className:$().loading,children:"분석 중..."}),c&&(0,a.jsx)("div",{className:$().error,children:c}),m&&!l&&(0,a.jsxs)("div",{className:$().results,children:[(0,a.jsxs)("div",{className:$().stat,children:[(0,a.jsx)("span",{className:$().label,children:"속도"}),(0,a.jsxs)("span",{className:$().value,children:[m.wpm," WPM"]})]}),(0,a.jsxs)("div",{className:$().stat,children:[(0,a.jsx)("span",{className:$().label,children:"정확도"}),(0,a.jsxs)("span",{className:$().value,children:[m.accuracy.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:$().stat,children:[(0,a.jsx)("span",{className:$().label,children:"성능 지수"}),(0,a.jsx)("span",{className:$().value,children:m.performanceIndex.toFixed(1)})]}),(0,a.jsxs)("div",{className:$().stat,children:[(0,a.jsx)("span",{className:$().label,children:"일관성"}),(0,a.jsx)("span",{className:$().value,children:m.consistencyScore.toFixed(1)})]}),(0,a.jsxs)("div",{className:$().fatigue,children:[(0,a.jsx)("h3",{children:"피로도 분석"}),(0,a.jsx)("div",{className:$().fatigueMeter,children:(0,a.jsx)("div",{className:$().fatigueIndicator,style:{width:"".concat(m.fatigueAnalysis.score,"%")}})}),(0,a.jsx)("p",{className:$().recommendation,children:m.fatigueAnalysis.recommendation})]})]})]})}function et(e){let{keyCount:t,typingTime:n,accuracy:a=100}=e,r=n/6e4,o=r>0?t/5/r:0;return{wpm:o,accuracy:a,performanceIndex:o*a/100,consistencyScore:65+Math.min(t,500)/20,fatigueAnalysis:{score:Math.min(100,10*r+o/10),timeFactor:r,intensityFactor:o/100,recommendation:r>30?"휴식이 필요합니다":r>15?"짧은 휴식을 고려하세요":"좋은 상태입니다"}}}function en(){let[e,t]=(0,r.useState)({keyCount:0,typingTime:0,totalChars:0,totalWords:0,accuracy:0}),[n,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=window.electronAPI,n=!!e;if(i(n),!n){t({keyCount:1250,typingTime:1800,totalChars:1050,totalWords:210,accuracy:98.5}),o(!0);return}try{let n;return e.onStatsUpdate&&"function"==typeof e.onStatsUpdate&&(n=e.onStatsUpdate(e=>{e&&t(e)})),e.requestCurrentStats&&"function"==typeof e.requestCurrentStats&&e.requestCurrentStats(),e.getTrackingStatus&&"function"==typeof e.getTrackingStatus&&e.getTrackingStatus().then(e=>{o(e)}).catch(e=>{console.warn("추적 상태를 가져오는데 실패했습니다:",e),o(!1)}),()=>{n&&"function"==typeof n&&n()}}catch(e){console.error("일렉트론 API 사용 중 오류 발생:",e),t({keyCount:500,typingTime:600,totalChars:450,totalWords:90,accuracy:95}),o(!1)}},[]),(0,a.jsx)(ee,{stats:e,_isTracking:n})}let ea=(0,o.default)(()=>Promise.all([n.e(670),n.e(1)]).then(n.bind(n,1001)),{loadableGenerated:{webpack:()=>[1001]},ssr:!1});function er(){let[e,t]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{t(!0)},[]),e)?(0,a.jsx)("main",{className:b().main,children:(0,a.jsxs)("div",{className:b().container,children:[(0,a.jsx)("h1",{className:b().title,children:"Loop"}),(0,a.jsx)("p",{className:b().description,children:"Next.js와 Rust 네이티브 모듈 통합 테스트"}),(0,a.jsx)(ea,{}),(0,a.jsx)(Q,{}),(0,a.jsx)(en,{})]})}):null}},5375:e=>{e.exports={overlay:"RestartLoading_overlay__xTGoM",loadingContainer:"RestartLoading_loadingContainer__fs5qH",spinner:"RestartLoading_spinner__pt5Mz",spin:"RestartLoading_spin__IcW5Z",title:"RestartLoading_title__0PqQH",progressContainer:"RestartLoading_progressContainer__fWgDe",progressBar:"RestartLoading_progressBar__MFOGS",note:"RestartLoading_note__iqeE6"}},5821:e=>{e.exports={toast:"Toast_toast__n4V9V",fadeIn:"Toast_fadeIn__8co0A",fadeOut:"Toast_fadeOut__PBTbC",success:"Toast_success__n3sBF",error:"Toast_error__vTefu",info:"Toast_info__iczaj",warning:"Toast_warning__u1w7_",message:"Toast_message__Ivwz3"}},6980:(e,t,n)=>{"use strict";n.d(t,{KC:()=>r,hT:()=>i,Bb:()=>c,Os:()=>o,du:()=>s,xz:()=>l,pT:()=>d});var a=function(e){return e[e.Normal=0]="Normal",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.Critical=4]="Critical",e}({}),r=function(e){return e.MatrixMultiplication="matrix",e.TextAnalysis="text",e.ImageProcessing="image",e.DataAggregation="data",e.PatternDetection="pattern",e.TypingStatistics="typing",e.Custom="custom",e}({});let o=async()=>{try{let e=await window.nativeModule.getMemoryInfo();if(!e.success||!e.data)return console.error("메모리 정보를 가져오는 데 실패했습니다:",e.error),null;return e.data}catch(e){return console.error("메모리 정보를 가져오는 중 오류 발생:",e),null}},s=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.Medium;try{let t=await window.nativeModule.optimizeMemory(e);if(!t.success||!t.data)return console.error("메모리 최적화에 실패했습니다:",t.error),null;return t.data}catch(e){return console.error("메모리 최적화 중 오류 발생:",e),null}},i=async()=>{try{let e=await window.nativeModule.forceGarbageCollection();if(!e.success||!e.data)return console.error("가비지 컬렉션에 실패했습니다:",e.error),null;return e.data}catch(e){return console.error("가비지 컬렉션 중 오류 발생:",e),null}},l=async(e,t)=>{try{let n=await window.nativeModule.performGpuComputation(e,t);if(!n.success||!n.data)return console.error("GPU 연산(".concat(e,")에 실패했습니다:"),n.error),null;return n.data}catch(t){return console.error("GPU 연산(".concat(e,") 중 오류 발생:"),t),null}},c=async()=>{try{if(!window.nativeModule||!window.nativeModule.getGpuInfo)return console.warn("네이티브 GPU 모듈을 사용할 수 없어 기본값을 반환합니다."),{name:"Default GPU",vendor:"Unknown",renderer:"Software Renderer",available:!1,accelerationEnabled:!1};let e=await window.nativeModule.getGpuInfo();if(!e.success||!e.data)return console.error("GPU 정보를 가져오는 데 실패했습니다:",e.error),null;return e.data}catch(e){return console.error("GPU 정보를 가져오는 중 오류 발생:",e),null}},d=async e=>{try{let t=await window.nativeModule.setGpuAcceleration(e);if(!t.success)return console.error("GPU 가속 설정에 실패했습니다:",t.error),!1;return t.data||!1}catch(e){return console.error("GPU 가속 설정 중 오류 발생:",e),!1}}},8334:e=>{e.exports={appContainer:"page_appContainer__p4TtA",mainContent:"page_mainContent__51TpB",appTabs:"page_appTabs__dehwV",tabButton:"page_tabButton__stR9X",activeTab:"page_activeTab__kgdSK",typingContainer:"page_typingContainer__Ltx96",statsContainer:"page_statsContainer__15RXV",historyContainer:"page_historyContainer__PhcIa",monitorContainer:"page_monitorContainer__nzoP_",debugButton:"page_debugButton__OpmNi",debugActive:"page_debugActive__1OXf0",debugPanel:"page_debugPanel__3hMsI",debugPanelBottom:"page_debugPanelBottom__KC93m",debugInfo:"page_debugInfo__i9tMu",zenMode:"page_zenMode__IMTVJ",headerDetectionArea:"page_headerDetectionArea__Mg4up",navLinks:"page_navLinks__3Mchl",navLink:"page_navLink__2S7dD","dark-mode":"page_dark-mode__8RLxf"}}},e=>{var t=t=>e(e.s=t);e.O(0,[943,647,579,701,441,684,358],()=>t(3249)),_N_E=e.O()}]);
//# sourceMappingURL=page-b7e9c7ad47bcbcbe.js.map